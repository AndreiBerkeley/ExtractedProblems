{"id": "APMO-2016-1", "contest": "APMO", "year": "2016", "problem_number": "1", "problem": "We say that a triangle \\(A B C\\) is great if the following holds: for any point \\(D\\) on the side \\(B C\\), if \\(P\\) and \\(Q\\) are the feet of the perpendiculars from \\(D\\) to the lines \\(A B\\) and \\(A C\\), respectively, then the reflection of \\(D\\) in the line \\(P Q\\) lies on the circumcircle of the triangle \\(A B C\\).\n\nProve that triangle \\(A B C\\) is great if and only if \\(\\angle A=90^{\\circ}\\) and \\(A B=A C\\).", "solution": "Solution. For every point \\(D\\) on the side \\(B C\\), let \\(D^{\\prime}\\) be the reflection of \\(D\\) in the line \\(P Q\\). We will first prove that if the triangle satisfies the condition then it is isosceles and right-angled at \\(A\\).\n\nChoose \\(D\\) to be the point where the angle bisector from \\(A\\) meets \\(B C\\). Note that \\(P\\) and \\(Q\\) lie on the rays \\(A B\\) and \\(A C\\) respectively. Furthermore, \\(P\\) and \\(Q\\) are reflections of each other in the line \\(A D\\), from which it follows that \\(P Q \\perp A D\\). Therefore, \\(D^{\\prime}\\) lies on the line \\(A D\\) and we may deduce that either \\(D^{\\prime}=A\\) or \\(D^{\\prime}\\) is the second point of the angle bisector at \\(A\\) and the circumcircle of \\(A B C\\). However, since \\(A P D Q\\) is a cyclic quadrilateral, the segment \\(P Q\\) intersects the segment \\(A D\\). Therefore, \\(D^{\\prime}\\) lies on the ray \\(D A\\) and therefore \\(D^{\\prime}=A\\). By angle chasing we obtain\n\\[\n\\angle P D^{\\prime} Q=\\angle P D Q=180^{\\circ}-\\angle B A C\n\\]\nand since \\(D^{\\prime}=A\\) we also know \\(\\angle P D^{\\prime} Q=\\angle B A C\\). This implies that \\(\\angle B A C=90^{\\circ}\\).\nNow we choose \\(D\\) to be the midpoint of \\(B C\\). Since \\(\\angle B A C=90^{\\circ}\\), we can deduce that \\(D Q P\\) is the medial triangle of triangle \\(A B C\\). Therefore, \\(P Q \\| B C\\) from which it follows that \\(D D^{\\prime} \\perp B C\\). But the distance from \\(D^{\\prime}\\) to \\(B C\\) is equal to both the circumradius of triangle \\(A B C\\) and to the distance from \\(A\\) to \\(B C\\). This can only happen if \\(A=D^{\\prime}\\). This implies that \\(A B C\\) is isosceles and right-angled at \\(A\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_0d61d483ddc68168f14bg-1.jpg?height=438&width=1629&top_left_y=1570&top_left_x=239)\n\nWe will now prove that if \\(A B C\\) is isosceles and right-angled at \\(A\\) then the required property in the problem holds. Let \\(D\\) be any point on side \\(B C\\). Then \\(D^{\\prime} P=D P\\) and we also have \\(D P=B P\\). Hence, \\(D^{\\prime} P=B P\\) and similarly \\(D^{\\prime} Q=C Q\\). Note that \\(A P D Q D^{\\prime}\\) is cyclic with diameter \\(P Q\\). Therefore, \\(\\angle A P D^{\\prime}=\\angle A Q D^{\\prime}\\), from which we obtain \\(\\angle B P D^{\\prime}=\\angle C Q D^{\\prime}\\). So triangles \\(D^{\\prime} P B\\) and \\(D^{\\prime} Q C\\) are similar. It follows that \\(\\angle P D^{\\prime} Q=\\angle P D^{\\prime} C+\\angle C D^{\\prime} Q= \\angle P D^{\\prime} C+\\angle B D^{\\prime} P=\\angle B D^{\\prime} C\\) and \\(\\frac{D^{\\prime} P}{D^{\\prime} Q}=\\frac{D^{\\prime} B}{D^{\\prime} C}\\). So we also obtain that triangles \\(D^{\\prime} P Q\\) and \\(D^{\\prime} B C\\) are similar. But since \\(D P Q\\) and \\(D^{\\prime} P Q\\) are congruent, we may deduce that \\(\\angle B D^{\\prime} C= \\angle P D^{\\prime} Q=\\angle P D Q=90^{\\circ}\\). Therefore, \\(D^{\\prime}\\) lies on the circle with diameter \\(B C\\), which is the circumcircle of triangle \\(A B C\\).", "source_pdf": "apmo_2016.pdf", "notes": ""}
{"id": "APMO-2016-2", "contest": "APMO", "year": "2016", "problem_number": "2", "problem": "A positive integer is called fancy if it can be expressed in the form\n\\[\n2^{a_{1}}+2^{a_{2}}+\\cdots+2^{a_{100}}\n\\]\nwhere \\(a_{1}, a_{2}, \\ldots, a_{100}\\) are non-negative integers that are not necessarily distinct.\nFind the smallest positive integer \\(n\\) such that no multiple of \\(n\\) is a fancy number.\nAnswer: The answer is \\(n=2^{101}-1\\).", "solution": "Solution. Let \\(k\\) be any positive integer less than \\(2^{101}-1\\). Then \\(k\\) can be expressed in binary notation using at most 100 ones, and therefore there exists a positive integer \\(r\\) and non-negative integers \\(a_{1}, a_{2}, \\ldots, a_{r}\\) such that \\(r \\leq 100\\) and \\(k=2^{a_{1}}+\\cdots+2^{a_{r}}\\). Notice that for a positive integer \\(s\\) we have:\n\\[\n\\begin{aligned}\n2^{s} k & =2^{a_{1}+s}+2^{a_{2}+s}+\\cdots+2^{a_{r-1}+s}+\\left(1+1+2+\\cdots+2^{s-1}\\right) 2^{a_{r}} \\\\\n& =2^{a_{1}+s}+2^{a_{2}+s}+\\cdots+2^{a_{r-1}+s}+2^{a_{r}}+2^{a_{r}}+\\cdots+2^{a_{r}+s-1}\n\\end{aligned}\n\\]\n\nThis shows that \\(k\\) has a multiple that is a sum of \\(r+s\\) powers of two. In particular, we may take \\(s=100-r \\geq 0\\), which shows that \\(k\\) has a multiple that is a fancy number.\n\nWe will now prove that no multiple of \\(n=2^{101}-1\\) is a fancy number. In fact we will prove a stronger statement, namely, that no multiple of \\(n\\) can be expressed as the sum of at most 100 powers of 2 .\n\nFor the sake of contradiction, suppose that there exists a positive integer \\(c\\) such that \\(c n\\) is the sum of at most 100 powers of 2 . We may assume that \\(c\\) is the smallest such integer. By repeatedly merging equal powers of two in the representation of \\(c n\\) we may assume that\n\\[\nc n=2^{a_{1}}+2^{a_{2}}+\\cdots+2^{a_{r}}\n\\]\nwhere \\(r \\leq 100\\) and \\(a_{1}<a_{2}<\\ldots<a_{r}\\) are distinct non-negative integers. Consider the following two cases:\n- If \\(a_{r} \\geq 101\\), then \\(2^{a_{r}}-2^{a_{r}-101}=2^{a_{r}-101} n\\). It follows that \\(2^{a_{1}}+2^{a_{2}}+\\cdots+2^{a_{r-1}}+2^{a_{r}-101}\\) would be a multiple of \\(n\\) that is smaller than \\(c n\\). This contradicts the minimality of \\(c\\).\n- If \\(a_{r} \\leq 100\\), then \\(\\left\\{a_{1}, \\ldots, a_{r}\\right\\}\\) is a proper subset of \\(\\{0,1, \\ldots, 100\\}\\). Then\n\\[\nn \\leq c n<2^{0}+2^{1}+\\cdots+2^{100}=n\n\\]\n\nThis is also a contradiction.\nFrom these contradictions we conclude that it is impossible for \\(c n\\) to be the sum of at most 100 powers of 2 . In particular, no multiple of \\(n\\) is a fancy number.", "source_pdf": "apmo_2016.pdf", "notes": ""}
{"id": "APMO-2016-3", "contest": "APMO", "year": "2016", "problem_number": "3", "problem": "Let \\(A B\\) and \\(A C\\) be two distinct rays not lying on the same line, and let \\(\\omega\\) be a circle with center \\(O\\) that is tangent to ray \\(A C\\) at \\(E\\) and ray \\(A B\\) at \\(F\\). Let \\(R\\) be a point on segment \\(E F\\). The line through \\(O\\) parallel to \\(E F\\) intersects line \\(A B\\) at \\(P\\). Let \\(N\\) be the intersection of lines \\(P R\\) and \\(A C\\), and let \\(M\\) be the intersection of line \\(A B\\) and the line through \\(R\\) parallel to \\(A C\\). Prove that line \\(M N\\) is tangent to \\(\\omega\\).", "solution": "Solution. We present two approaches. The first one introduces an auxiliary point and studies similarities in the figure. The second one reduces the problem to computations involving a particular exradius of a triangle. The second approach has two variants.\n\n\\section*{Solution 1.}\n![](https://cdn.mathpix.com/cropped/2025_08_23_0d61d483ddc68168f14bg-3.jpg?height=974&width=1200&top_left_y=254&top_left_x=425)\n\nLet the line through \\(N\\) tangent to \\(\\omega\\) at point \\(X \\neq E\\) intersect \\(A B\\) at point \\(M^{\\prime}\\). It suffices to show that \\(M^{\\prime} R \\| A C\\), since this would yield \\(M^{\\prime}=M\\).\n\nSuppose that the line \\(P O\\) intersects \\(A C\\) at \\(Q\\) and the circumcircle of \\(A M^{\\prime} O\\) at \\(Y\\), respectively. Then\n\\[\n\\angle A Y M^{\\prime}=\\angle A O M^{\\prime}=90^{\\circ}-\\angle M^{\\prime} O P .\n\\]\n\nBy angle chasing we have \\(\\angle E O Q=\\angle F O P=90^{\\circ}-\\angle A O F=\\angle M^{\\prime} A O=\\angle M^{\\prime} Y P\\) and by symmetry \\(\\angle E Q O=\\angle M^{\\prime} P Y\\). Therefore \\(\\triangle M^{\\prime} Y P \\sim \\triangle E O Q\\).\n\nOn the other hand, we have\n\\[\n\\begin{aligned}\n\\angle M^{\\prime} O P & =\\angle M^{\\prime} O F+\\angle F O P=\\frac{1}{2}(\\angle F O X+\\angle F O P+\\angle E O Q)= \\\\\n& =\\frac{1}{2}\\left(\\frac{180^{\\circ}-\\angle X O E}{2}\\right)=90^{\\circ}-\\frac{\\angle X O E}{2} .\n\\end{aligned}\n\\]\n\nSince we know that \\(\\angle A Y M^{\\prime}\\) and \\(\\angle M^{\\prime} O P\\) are complementary this implies\n\\[\n\\angle A Y M^{\\prime}=\\frac{\\angle X O E}{2}=\\angle N O E .\n\\]\n\nTherefore, \\(\\angle A Y M^{\\prime}\\) and \\(\\angle N O E\\) are congruent angles, and this means that \\(A\\) and \\(N\\) are corresponding points in the similarity of triangles \\(\\triangle M^{\\prime} Y P\\) and \\(\\triangle E O Q\\). It follows that\n\\[\n\\frac{A M^{\\prime}}{M^{\\prime} P}=\\frac{N E}{E Q}=\\frac{N R}{R P} .\n\\]\n\nWe conclude that \\(M^{\\prime} R \\| A C\\), as desired.\n\n\\section*{Solution 2a.}\n\nAs in Solution 1, we introduce point \\(M^{\\prime}\\) and reduce the problem to proving \\(\\frac{P R}{R N}=\\frac{P M^{\\prime}}{M^{\\prime} A}\\). Menelaus theorem in triangle \\(A N P\\) with transversal line \\(F R E\\) yields\n\\[\n\\frac{P R}{R N} \\cdot \\frac{N E}{E A} \\cdot \\frac{A F}{F P}=1 .\n\\]\n\nSince \\(A F=E A\\), we have \\(\\frac{F P}{N E}=\\frac{P R}{R N}\\), so that it suffices to prove\n\\[\n\\frac{F P}{N E}=\\frac{P M^{\\prime}}{M^{\\prime} A} .\n\\]\n\nThis is a computation regarding the triangle \\(A M^{\\prime} N\\) and its excircle opposite \\(A\\). Indeed, setting \\(a=M^{\\prime} N, b=N A, c=M^{\\prime} A, s=\\frac{a+b+c}{2}, x=s-a, y=s-b\\) and \\(z=s-c\\), then \\(A E=A F=s, M^{\\prime} F=z\\) and \\(N E=y\\). From \\(\\triangle O F P \\sim \\triangle A F O\\) we have \\(F P=\\frac{r_{a}^{2}}{s}\\), where \\(r_{a}=O F\\) is the exradius opposite \\(A\\). Combining the following two standard formulas for the area of a triangle\n\\[\n\\left|A M^{\\prime} N\\right|^{2}=x y z s \\quad \\text { (Heron's formula) and } \\quad\\left|A M^{\\prime} N\\right|=r_{a}(s-a),\n\\]\nwe have \\(r_{a}^{2}=\\frac{y z s}{x}\\). Therefore, \\(F P=\\frac{y z}{x}\\). We can now write everything in (1) in terms of \\(x, y, z\\). We conclude that we have to verify\n\\[\n\\frac{\\frac{y z}{x}}{y}=\\frac{z+\\frac{y z}{x}}{x+y},\n\\]\nwhich is easily seen to be true.\nNote: Antoher approach using Menalaus theorem is to construct the tangent from \\(M\\) to create a point \\(N^{\\prime}\\) in \\(A C\\) and then prove, using the theorem, that \\(P, R\\) and \\(N^{\\prime}\\) are collinear. This also reduces to an algebraic identity.\n\n\\section*{Solution 2b.}\n\nAs in Solution 1, we introduce point \\(M^{\\prime}\\). Let the line through \\(M^{\\prime}\\) and parallel to \\(A N\\) intersect \\(E F\\) at \\(R^{\\prime}\\). Let \\(P^{\\prime}\\) be the intersection of lines \\(N R^{\\prime}\\) and \\(A M\\). It suffices to show that \\(P^{\\prime} O \\| F E\\), since this would yield \\(P=P^{\\prime}\\), and then \\(R=R^{\\prime}\\) and \\(M=M^{\\prime}\\). Hence it is enough to prove that\n\\[\n\\frac{A F}{F P^{\\prime}}=\\frac{A D}{D O},\n\\]\nwhere \\(D\\) is the intersection of \\(A O\\) and \\(E F\\). Once again, this reduces to a computation regarding the triangle \\(A M^{\\prime} N\\) and its excircle opposite \\(A\\).\n\nLet \\(u=P^{\\prime} F\\) and \\(x, y, z, s\\) as in Solution 2a. Note that since \\(A E=A F\\) and \\(M^{\\prime} R^{\\prime} \\| A E\\), we have \\(M^{\\prime} R^{\\prime}=M^{\\prime} F=z\\). Since \\(M^{\\prime} R^{\\prime} \\| A N\\), we have \\(\\frac{P^{\\prime} M^{\\prime}}{P^{\\prime} A}=\\frac{M^{\\prime} R^{\\prime}}{N A}\\), that is,\n\\[\n\\frac{u+z}{u+x+y+z}=\\frac{z}{x+z} .\n\\]\n\nFrom this last equation we obtain \\(u=\\frac{y z}{x}\\). Hence \\(\\frac{A F}{F P^{\\prime}}=\\frac{x s}{y z}\\). Also, as in Solution 2a, we have \\(r_{a}^{2}=\\frac{y z s}{x}\\).\n\nFinally, using similar triangles \\(O D F, F D A\\) and \\(O F A\\), and the above equalities, we have\n\\[\n\\frac{A D}{D O}=\\frac{A D}{D F} \\cdot \\frac{D F}{D O}=\\frac{A F}{O F} \\cdot \\frac{A F}{O F}=\\frac{s^{2}}{r_{a}^{2}}=\\frac{s^{2}}{\\frac{y z s}{x}}=\\frac{x s}{y z}=\\frac{A F}{F P^{\\prime}},\n\\]\nas required.", "source_pdf": "apmo_2016.pdf", "notes": ""}
{"id": "APMO-2016-4", "contest": "APMO", "year": "2016", "problem_number": "4", "problem": "The country Dreamland consists of 2016 cities. The airline Starways wants to establish some one-way flights between pairs of cities in such a way that each city has exactly one flight out of it. Find the smallest positive integer \\(k\\) such that no matter how Starways establishes its flights, the cities can always be partitioned into \\(k\\) groups so that from any city it is not possible to reach another city in the same group by using at most 28 flights.\n\n\\section*{Answer: 57}", "solution": "Solution. The flights established by Starways yield a directed graph \\(G\\) on 2016 vertices in which each vertex has out-degree equal to 1 .\n\nWe first show that we need at least 57 groups. For this, suppose that \\(G\\) has a directed cycle of length 57. Then, for any two cities in the cycle, one is reachable from the other using at most 28 flights. So no two cities in the cycle can belong to the same group. Hence, we need at least 57 groups.\n\nWe will now show that 57 groups are enough. Consider another auxiliary directed graph \\(H\\) in which the vertices are the cities of Dreamland and there is an arrow from city \\(u\\) to city \\(v\\) if \\(u\\) can be reached from \\(v\\) using at most 28 flights. Each city has out-degree at most 28 . We will be done if we can split the cities of \\(H\\) in at most 57 groups such that there are no arrows between vertices of the same group. We prove the following stronger statement.\n\nLemma: Suppose we have a directed graph on \\(n \\geq 1\\) vertices such that each vertex has out-degree at most 28 . Then the vertices can be partitioned into 57 groups in such a way that no vertices in the same group are connected by an arrow.\n\nProof: We apply induction. The result is clear for 1 vertex. Now suppose we have more than one vertex. Since the out-degree of each vertex is at most 28 , there is a vertex, say \\(v\\), with in-degree at most 28. If we remove the vertex \\(v\\) we obtain a graph with fewer vertices which still satifies the conditions, so by inductive hypothesis we may split it into at most 57 groups with no adjacent vertices in the same group. Since \\(v\\) has in-degree and out-degree at most 28, it has at most 56 neighboors in the original directed graph. Therefore, we may add \\(v\\) back and place it in a group in which it has no neighbors. This completes the inductive step.", "source_pdf": "apmo_2016.pdf", "notes": ""}
{"id": "APMO-2016-5", "contest": "APMO", "year": "2016", "problem_number": "5", "problem": "Find all functions \\(f: \\mathbb{R}^{+} \\rightarrow \\mathbb{R}^{+}\\)such that\n\\[\n(z+1) f(x+y)=f(x f(z)+y)+f(y f(z)+x)\n\\]\nfor all positive real numbers \\(x, y, z\\).\nAnswer: The only solution is \\(f(x)=x\\) for all positive real numbers \\(x\\).", "solution": "Solution. The identity function \\(f(x)=x\\) clearly satisfies the functional equation. Now, let \\(f\\) be a function satisfying the functional equation. Plugging \\(x=y=1\\) into (3) we get \\(2 f(f(z)+1)=(z+1)(f(2))\\) for all \\(z \\in \\mathbb{R}^{+}\\). Hence, \\(f\\) is not bounded above.\n\nLemma. Let \\(a, b, c\\) be positive real numbers. If \\(c\\) is greater than \\(1, a / b\\) and \\(b / a\\), then the system of linear equations\n\\[\nc u+v=a \\quad u+c v=b\n\\]\nhas a positive real solution \\(u, v\\).\nProof. The solution is\n\\[\nu=\\frac{c a-b}{c^{2}-1} \\quad v=\\frac{c b-a}{c^{2}-1}\n\\]\n\nThe numbers \\(u\\) and \\(v\\) are positive if the conditions on \\(c\\) above are satisfied.\n\nWe will now prove that\n\\[\nf(a)+f(b)=f(c)+f(d) \\quad \\text { for all } a, b, c, d \\in \\mathbb{R}^{+} \\text {with } a+b=c+d\n\\]\n\nConsider \\(a, b, c, d \\in \\mathbb{R}^{+}\\)such that \\(a+b=c+d\\). Since \\(f\\) is not bounded above, we can choose a positive number \\(e\\) such that \\(f(e)\\) is greater than \\(1, a / b, b / a, c / d\\) and \\(d / c\\). Using the above lemma, we can find \\(u, v, w, t \\in \\mathbb{R}^{+}\\)satisfying\n\\[\n\\begin{array}{ll}\nf(e) u+v=a, & u+f(e) v=b \\\\\nf(e) w+t=c, & w+f(e) t=d .\n\\end{array}\n\\]\n\nNote that \\(u+v=w+t\\) since \\((u+v)(f(e)+1)=a+b\\) and \\((w+t)(f(e)+1)=c+d\\). Plugging \\(x=u, y=v\\) and \\(z=e\\) into (3) yields \\(f(a)+f(b)=(e+1) f(u+v)\\). Similarly, we have \\(f(c)+f(d)=(e+1) f(w+t)\\). The claim follows immediately.\n\nWe then have\n\\[\ny f(x)=f(x f(y)) \\quad \\text { for all } x, y \\in \\mathbb{R}^{+}\n\\]\nsince by (3) and (4),\n\\[\n(y+1) f(x)=f\\left(\\frac{x}{2} f(y)+\\frac{x}{2}\\right)+f\\left(\\frac{x}{2} f(y)+\\frac{x}{2}\\right)=f(x f(y))+f(x)\n\\]\n\nNow, let \\(a=f(1 / f(1))\\). Plugging \\(x=1\\) and \\(y=1 / f(1)\\) into (5) yields \\(f(a)=1\\). Hence \\(a=a f(a)\\) and \\(f(a f(a))=f(a)=1\\). Since \\(a f(a)=f(a f(a))\\) by (5), we have \\(f(1)=a=1\\). It follows from (5) that\n\\[\nf(f(y))=y \\quad \\text { for all } y \\in \\mathbb{R}^{+} .\n\\]\n\nUsing (4) we have for all \\(x, y \\in \\mathbb{R}^{+}\\)that\n\\[\n\\begin{aligned}\n& f(x+y)+f(1)=f(x)+f(y+1), \\quad \\text { and } \\\\\n& f(y+1)+f(1)=f(y)+f(2)\n\\end{aligned}\n\\]\n\nTherefore\n\\[\nf(x+y)=f(x)+f(y)+b \\quad \\text { for all } x, y \\in \\mathbb{R}^{+}\n\\]\nwhere \\(b=f(2)-2 f(1)=f(2)-2\\). Using (5), (7) and (6), we get\n\\[\n4+2 b=2 f(2)=f(2 f(2))=f(f(2)+f(2))=f(f(2))+f(f(2))+b=4+b\n\\]\n\nThis shows that \\(b=0\\) and thus\n\\[\nf(x+y)=f(x)+f(y) \\quad \\text { for all } x, y \\in \\mathbb{R}^{+} .\n\\]\n\nIn particular, \\(f\\) is strictly increasing.\nWe conclude as follows. Take any positive real number \\(x\\). If \\(f(x)>x\\), then \\(f(f(x))> f(x)>x=f(f(x))\\), a contradiction. Similarly, it is not possible that \\(f(x)<x\\). This shows that \\(f(x)=x\\) for all positive real numbers \\(x\\).", "source_pdf": "apmo_2016.pdf", "notes": ""}
{"id": "APMO-2018-1", "contest": "APMO", "year": "2018", "problem_number": "1", "problem": "Let \\(H\\) be the orthocenter of the triangle \\(A B C\\). Let \\(M\\) and \\(N\\) be the midpoints of the sides \\(A B\\) and \\(A C\\), respectively. Assume that \\(H\\) lies inside the quadrilateral \\(B M N C\\) and that the circumcircles of triangles \\(B M H\\) and \\(C N H\\) are tangent to each other. The line through \\(H\\) parallel to \\(B C\\) intersects the circumcircles of the triangles \\(B M H\\) and \\(C N H\\) in the points \\(K\\) and \\(L\\), respectively. Let \\(F\\) be the intersection point of \\(M K\\) and \\(N L\\) and let \\(J\\) be the incenter of triangle \\(M H N\\). Prove that \\(F J=F A\\).", "solution": "\\section*{Solution.}\n\nLemma 1. In a triangle \\(A B C\\), let \\(D\\) be the intersection of the interior angle bisector at \\(A\\) with the circumcircle of \\(A B C\\), and let \\(I\\) be the incenter of \\(\\triangle A B C\\). Then\n\\[\nD I=D B=D C .\n\\]\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-1.jpg?height=632&width=609&top_left_y=948&top_left_x=731)\n\nProof.\n\\[\n\\angle D B I=\\frac{\\angle B A C}{2}+\\frac{\\widehat{B}}{2}=\\angle D I B \\quad \\Rightarrow \\quad D I=D B\n\\]\n\nAnalogously \\(D I=D C\\).\nWe start solving the problem. First we state some position considerations. Since there is an arc of the circumcircle of \\(B H M\\) outside the triangle \\(A B C\\), it must happen that \\(K\\) and \\(N\\) lie on opposite sides of \\(A M\\). Similarly, \\(L\\) and \\(M\\) lie on opposite sides of \\(A N\\). Also, \\(K\\) and \\(L\\) lie on the same side of \\(M N\\), and opposite to \\(A\\). Therefore, \\(F\\) lies inside the triangle \\(A M N\\).\n\nNow, since \\(H\\) is the orthocenter of \\(\\triangle A B C\\) and the circumcircles of \\(B M H\\) and \\(C N H\\) are tangent we have\n\\[\n\\angle A B H=90^{\\circ}-\\angle B A C=\\angle A C H \\quad \\Rightarrow \\quad \\angle M H N=\\angle M B H+\\angle N C H=180^{\\circ}-2 \\angle B A C .\n\\]\n\nSo \\(\\angle M B H=\\angle M K H=\\angle N C H=\\angle N L H=90^{\\circ}-\\angle B A C\\) and, since \\(M N \\| K L\\), we have\n\\[\n\\angle F M N=\\angle F N M=90^{\\circ}-\\angle B A C \\quad \\Rightarrow \\quad \\angle M F N=2 \\angle B A C\n\\]\n\nThe relations (1) and (2) yield that the quadrilateral \\(M F N H\\) is cyclic, with the vertices in this order around the circumference. Since \\(F M=F N, \\angle M F N=2 \\angle B A C\\) and \\(F\\) is the correct side of \\(M N\\) we have that the point \\(F\\) is the circumcenter of triangle \\(A M N\\), and thus \\(F A=F M=F N\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-2.jpg?height=786&width=1020&top_left_y=188&top_left_x=525)\n\nSince the quadrilateral \\(M F N H\\) is cyclic, \\(F M=F N\\) and \\(H\\) lies on the correct side of \\(M N\\), we have that \\(H, J\\) and \\(F\\) are collinear. According to Lemma \\(1, F J=F M=F N\\). So \\(F J=F A\\).\n\nSolution 2: According to Solution 1, we have \\(\\angle M H N=180^{\\circ}-2 \\angle B A C\\) and since the point \\(J\\) is the incenter of \\(\\triangle M H N\\), we have \\(\\angle M J N=90^{\\circ}+\\frac{1}{2} \\angle M H N=180^{\\circ}-\\angle B A C\\). So the quadrilateral \\(A M J N\\) is cyclic.\n\nAccording to Solution 1, the point \\(F\\) is the circumcenter of \\(\\triangle A M N\\). So \\(F J=F A\\).", "source_pdf": "apmo_2018.pdf", "notes": ""}
{"id": "APMO-2018-2", "contest": "APMO", "year": "2018", "problem_number": "2", "problem": "Let \\(f(x)\\) and \\(g(x)\\) be given by\n\\[\nf(x)=\\frac{1}{x}+\\frac{1}{x-2}+\\frac{1}{x-4}+\\cdots+\\frac{1}{x-2018}\n\\]\nand\n\\[\ng(x)=\\frac{1}{x-1}+\\frac{1}{x-3}+\\frac{1}{x-5}+\\cdots+\\frac{1}{x-2017} .\n\\]\n\nProve that\n\\[\n|f(x)-g(x)|>2\n\\]\nfor any non-integer real number \\(x\\) satisfying \\(0<x<2018\\).", "solution": "Solution 1 There are two cases: \\(2 n-1<x<2 n\\) and \\(2 n<x<2 n+1\\). Note that \\(f(2018-x)=-f(x)\\) and \\(g(2018-x)=-g(x)\\), that is, a half turn about the point \\((1009,0)\\) preserves the graphs of \\(f\\) and \\(g\\). So it suffices to consider only the case \\(2 n-1<x<2 n\\).\n\nLet \\(d(x)=g(x)-f(x)\\). We will show that \\(d(x)>2\\) whenever \\(2 n-1<x<2 n\\) and \\(n \\in\\{1,2, \\ldots, 1009\\}\\).\n\nFor any non-integer \\(x\\) with \\(0<x<2018\\), we have\n\\[\nd(x+2)-d(x)=\\left(\\frac{1}{x+1}-\\frac{1}{x+2}\\right)+\\left(\\frac{1}{x-2018}-\\frac{1}{x-2017}\\right)>0+0=0 .\n\\]\n\nHence it suffices to prove \\(d(x)>2\\) for \\(1<x<2\\). Since \\(x<2\\), it follows that \\(\\frac{1}{x-2 i-1}> \\frac{1}{x-2 i}\\) for \\(i=2,3, \\ldots, 1008\\). We also have \\(\\frac{1}{x-2018}<0\\). Hence it suffices to prove the following\nfor \\(1<x<2\\).\n\\[\n\\begin{aligned}\n& \\frac{1}{x-1}+\\frac{1}{x-3}-\\frac{1}{x}-\\frac{1}{x-2}>2 \\\\\n\\Leftrightarrow & \\left(\\frac{1}{x-1}+\\frac{1}{2-x}\\right)+\\left(\\frac{1}{x-3}-\\frac{1}{x}\\right)>2 \\\\\n\\Leftrightarrow & \\frac{1}{(x-1)(2-x)}+\\frac{3}{x(x-3)}>2\n\\end{aligned}\n\\]\n\nBy the \\(G M-H M\\) inequality (alternatively, by considering the maximum of the quadratic \\((x-1)(2-x))\\) we have\n\\[\n\\frac{1}{x-1} \\cdot \\frac{1}{2-x}>\\left(\\frac{2}{(x-1)+(2-x)}\\right)^{2}=4\n\\]\n\nTo find a lower bound for \\(\\frac{3}{x(x-3)}\\), note that \\(x(x-3)<0\\) for \\(1<x<2\\). So we seek an upper bound for \\(x(x-3)\\). From the shape of the quadratic, this occurs at \\(x=1\\) or \\(x=2\\), both of which yield \\(\\frac{3}{x(x-3)}>-\\frac{3}{2}\\).\n\nIt follows that \\(d(x)>4-\\frac{3}{2}>2\\), as desired.\n\n\\section*{Solution 2}\n\nAs in Solution 1, we may assume \\(2 n-1<x<2 n\\) for some \\(1 \\leq n \\leq 1009\\). Let \\(d(x)= f(x)-g(x)\\), and note that\n\\[\nd(x)=\\frac{1}{x}+\\sum_{m=1}^{1009} \\frac{1}{(x-2 m)(x-2 m+1)}\n\\]\n\nWe split the sum into three parts: the terms before \\(m=n\\), after \\(m=n\\), and the term \\(m=n\\). The first two are\n\\[\n\\begin{aligned}\n0 & \\leq \\sum_{m=1}^{n-1} \\frac{1}{(x-2 m)(x-2 m+1)} \\\\\n& \\leq \\sum_{m=1}^{n-1} \\frac{1}{(2 n-1-2 m)(2 n-2 m)}=\\sum_{i=1}^{n-1} \\frac{1}{(2 i)(2 i-1)} \\leq \\sum_{i=1}^{1008} \\frac{1}{2 i-1}-\\frac{1}{2 i} \\\\\n0 & \\leq \\sum_{m=n+1}^{1009} \\frac{1}{(2 m-x)(2 m-1-x)} \\\\\n& \\leq \\sum_{m=n+1}^{1009} \\frac{1}{(2 m-2 n+1)(2 m-2 n)}=\\sum_{i=1}^{1009-n} \\frac{1}{(2 i+1)(2 i)} \\leq \\sum_{i=1}^{1008} \\frac{1}{2 i}-\\frac{1}{2 i+1}\n\\end{aligned}\n\\]\n\nWhen we add the two sums the terms telescope and we are left with\n\\[\n0 \\leq \\sum_{1 \\leq m \\leq 1009, m \\neq n} \\frac{1}{(x-2 m)(x-2 m+1)} \\leq 1-\\frac{1}{2017}<1\n\\]\n\nFor the term \\(m=n\\), we write\n\\[\n0<-(x-2 n)(x-2 n+1)=0.25-(x-2 n+0.5)^{2} \\leq 0.25\n\\]\nwhence\n\\[\n-4 \\geq \\frac{1}{(x-2 n)(x-2 n+1)}\n\\]\n\nFinally, \\(\\frac{1}{x}<1\\) since \\(x>2 n-1 \\geq 1\\). Combining these we get\n\\[\nd(x)=\\frac{1}{x}+\\sum_{m=1}^{1009} \\frac{1}{(x-2 m)(x-2 m+1)}<1+1-4<-2 .\n\\]\n\n\\section*{Solution 3}\n\nFirst notice that\n\\[\nf(x)-g(x)=\\frac{1}{x}-\\frac{1}{x-1}+\\frac{1}{x-2}-\\cdots-\\frac{1}{x-2017}+\\frac{1}{x-2018} .\n\\]\n\nAs in Solution 1, we may deal only with the case \\(2 n<x<2 n+1\\). Then \\(x-2 k+1\\) and \\(x-2 k\\) never differ in sign for any integer \\(k\\). Then\n\\[\n\\begin{aligned}\n-\\frac{1}{x-2 k+1}+\\frac{1}{x-2 k} & =\\frac{1}{(x-2 k+1)(x-2 k)}>0 \\quad \\text { for } k=1,2, \\ldots, n-1, n+2, \\ldots, 1009 . \\\\\n\\frac{1}{x-2 n}-\\frac{1}{x-2 n-1} & =\\frac{1}{(x-2 n)(2 n+1-x)} \\geq\\left(\\frac{2}{x-2 n+2 n+1-x}\\right)^{2}=4,\n\\end{aligned}\n\\]\n\nTherefore, summing all inequalities and collecting the remaining terms we find \\(f(x)-g(x)> 4+\\frac{1}{x-2}>4-1=3\\) for \\(0<x<1\\) and, for \\(n>0\\),\n\\[\n\\begin{aligned}\nf(x)-g(x) & >\\frac{1}{x}-\\frac{1}{x-2 n+1}+4+\\frac{1}{x-2 n-2} \\\\\n& =\\frac{1}{x}-\\frac{1}{x-2 n+1}+4-\\frac{1}{2 n+2-x} \\\\\n& >\\frac{1}{x}-\\frac{1}{2 n-2 n+1}+4-\\frac{1}{2 n+2-2 n-1} \\\\\n& =2+\\frac{1}{x}>2 .\n\\end{aligned}\n\\]", "source_pdf": "apmo_2018.pdf", "notes": ""}
{"id": "APMO-2018-3", "contest": "APMO", "year": "2018", "problem_number": "3", "problem": "A collection of \\(n\\) squares on the plane is called tri-connected if the following criteria are satisfied:\n(i) All the squares are congruent.\n(ii) If two squares have a point \\(P\\) in common, then \\(P\\) is a vertex of each of the squares.\n(iii) Each square touches exactly three other squares.\n\nHow many positive integers \\(n\\) are there with \\(2018 \\leq n \\leq 3018\\), such that there exists a collection of \\(n\\) squares that is tri-connected?\n\nAnswer: 501", "solution": "Solution. We will prove that there is no tri-connected collection if \\(n\\) is odd, and that tri-connected collections exist for all even \\(n \\geq 38\\). Since there are 501 even numbers in the range from 2018 to 3018, this yields 501 as the answer.\n\nFor any two different squares \\(A\\) and \\(B\\), let us write \\(A \\sim B\\) to mean that square \\(A\\) touches square \\(B\\). Since each square touches exactly three other squares, and there are \\(n\\) squares in total, the total number of instances of \\(A \\sim B\\) is \\(3 n\\). But \\(A \\sim B\\) if and only if \\(B \\sim A\\). Hence the total number of instances of \\(A \\sim B\\) is even. Thus \\(3 n\\) and hence also \\(n\\) is even.\n\nWe now construct tri-connected collections for each even \\(n\\) in the range. We show two\nConstruction 1 The idea is to use the following two configurations. Observe that in each configuration every square is related to three squares except for the leftmost and rightmost squares which are related to two squares. Note that the configuration on the left is of variable length. Also observe that multiple copies of the configuration on the right can be chained together to end around corners.\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-5.jpg?height=156&width=363&top_left_y=753&top_left_x=628)\nand\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-5.jpg?height=147&width=247&top_left_y=759&top_left_x=1213)\n\nPutting the above two types of configurations together as in the following figure yields a tri-connected collection for every even \\(n \\geq 38\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-5.jpg?height=296&width=781&top_left_y=1107&top_left_x=633)\n\nConstruction 2 Consider a regular \\(4 n-\\) gon \\(A_{1} A_{2} \\cdots A_{4 n}\\), and make \\(4 n\\) squares on the outside of the \\(4 n\\)-gon with one side being on the \\(4 n\\)-gon. Reflect squares sharing sides \\(A_{4 m+2} A_{4 m+3}, A_{4 m+3} A_{4 m+4}\\) across line \\(A_{4 m+2} A_{4 m+4}\\), for \\(0 \\leq m \\leq n-1\\). This will produce a tri-connected set of \\(6 n\\) squares, as long as the squares inside the \\(4 n\\)-gon do not intersect. When \\(n \\geq 4\\), this will be true. The picture for \\(n=24\\) is as follows:\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-5.jpg?height=806&width=812&top_left_y=1767&top_left_x=602)\n\nTo treat the other cases, consider the following gadget\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-6.jpg?height=181&width=267&top_left_y=302&top_left_x=873)\n\nTwo squares touch 3 other squares, and the squares containing \\(X, Y\\) touch 2 other squares. Take the \\(4 n\\)-gon from above, and break it into two along the line \\(A_{1} A_{2 n}\\), moving the two parts away from that line. Do so until the gaps can be exactly filled by inserting two copies of the above figure, so that the vertices \\(X, Y\\) touch the two vertices which used to be \\(A_{1}\\) in one instance, and the two vertices which used to be \\(A_{2 n}\\) in the other.\nThis gives us a valid configuration for \\(6 n+8\\) squares, \\(n \\geq 4\\). Finally, if we had instead spread the two parts out more and inserted two copies of the above figure into each gap, we would get \\(6 n+16\\) for \\(n \\geq 4\\), which finishes the proof for all even numbers at least 36 .", "source_pdf": "apmo_2018.pdf", "notes": ""}
{"id": "APMO-2018-4", "contest": "APMO", "year": "2018", "problem_number": "4", "problem": "Let \\(A B C\\) be an equilateral triangle. From the vertex \\(A\\) we draw a ray towards the interior of the triangle such that the ray reaches one of the sides of the triangle. When the ray reaches a side, it then bounces off following the law of reflection, that is, if it arrives with a directed angle \\(\\alpha\\), it leaves with a directed angle \\(180^{\\circ}-\\alpha\\). After \\(n\\) bounces, the ray returns to \\(A\\) without ever landing on any of the other two vertices. Find all possible values of \\(n\\).\n\nAnswer: All \\(n \\equiv 1,5 \\bmod 6\\) with the exception of 5 and 17", "solution": "Solution. Consider an equilateral triangle \\(A A_{1} A_{2}\\) of side length \\(m\\) and triangulate it with unitary triangles. See the figure. To each of the vertices that remain after the triangulation we can assign a pair of coordinates ( \\(a, b\\) ) where \\(a, b\\) are non-negative integers, \\(a\\) is the number of edges we travel in the \\(A A_{1}\\) direction and \\(b\\) is the number of edges we travel in the \\(A A_{2}\\) direction to arrive to the vertex, (we have \\(A=(0,0), A_{1}=(m, 0)\\) and \\(A_{2}=(0, m)\\) ). The unitary triangle with vertex \\(A\\) will be our triangle \\(A B C,(B=(1,0), C=(0,1))\\). We can obtain every unitary triangle by starting with \\(A B C\\) and performing reflections with respect to a side (the vertex \\((1,1)\\) is the reflection of \\(A\\) with respect to \\(B C\\), the vertex ( 0,2 ) is the reflection of \\(B=(1,0)\\) with respect to the side formed by \\(C=(1,0)\\) and \\((1,1)\\), and so on).\n\nWhen we reflect a vertex ( \\(a, b\\) ) with respect to a side of one of the triangles, the congruence of \\(a-b\\) is preserved modulo 3. Furthermore, an induction argument shows that any two vertices \\((a, b)\\) and \\(\\left(a^{\\prime}, b^{\\prime}\\right)\\) with \\(a-b \\equiv a^{\\prime}-b^{\\prime} \\bmod 3\\) can be obtained from each other by a series of such reflections. Therefore, the set of vertices \\(V\\) that result from the reflections of \\(A\\) will be those of the form \\((a, b)\\) satisfying \\(a \\equiv b \\bmod 3\\). See the green vertices in the figure.\n\nNow, let \\(U\\) be the set of vertices \\(u\\) that satisfy that the line segment between \\(u\\) and \\(A\\) does not pass through any other vertex. A pair \\((a, b)\\) is in \\(U\\) if and only if \\(\\operatorname{gcd}(a, b)=1\\), since otherwise for \\(d=\\operatorname{gcd}(a, b)\\) we have that the vertex \\((a / d, b / d)\\) also lies on the line segment between \\(u\\) and \\(A\\).\n\nObserve that the rays that come out from \\(A\\) and eventually return to \\(A\\) are those that come out towards a vertex in \\(V \\cap U\\) (they would be in \\(V\\) to be able to come back to \\(A\\) and in \\(U\\) so that they do not reach a vertex beforehand). In the diagram, a ray toward one such vertex ( \\(a, b\\) ) will intersect exactly \\((a-1)+(b-1)+(a+b-1)=2(a+b)-3\\) lines: \\(a-1\\) of them parallel to \\(A B, b-1\\) parallel to \\(A C\\) and \\(a+b-1\\) parallel to \\(B C\\). Therefore, in the triangle \\(A B C\\) the ray will bounce \\(2(a+b)-3\\) times before returning to \\(A\\). So we want to find all\n![](https://cdn.mathpix.com/cropped/2025_08_23_94f4f829fd174a5ca813g-7.jpg?height=880&width=1029&top_left_y=188&top_left_x=516)\n\\(n=2(a+b)-3\\) where \\(a \\equiv b \\bmod 3\\) and \\(\\operatorname{gcd}(a, b)=1\\).\nIf \\(a+b\\) is a multiple of 3 then we cannot satisfy both conditions simultaneously, therefore \\(n\\) is not a multiple of 3 . We also know that \\(n\\) is odd. Therefore \\(n \\equiv 1,5,7,11 \\bmod 12\\). Note that the pair \\((1,3 k+1)\\) satisfies the conditions and we can create \\(n=2(3 k+2)-3=6 k+1\\) for all \\(k \\geq 0\\) (this settles the question for \\(n \\equiv 1,7 \\bmod 12\\) ). For \\(n \\equiv 5 \\bmod 12\\) consider the pair \\((3 k-1,3 k+5)\\) when \\(k\\) is even or ( \\(3 k-4,3 k+8\\) ) when \\(k\\) is odd. This gives us all the integers of the form \\(12 k+5\\) for \\(k \\geq 2\\). For \\(11 \\bmod 12\\), take the pairs \\((3 k-1,3 k+2)\\) (with \\(k \\geq 1\\) ), which yield all positive integers of the form \\(12 k-1\\).\n\nFinally, to discard 5 and 17 note that the only pairs ( \\(a, b\\) ) that are solutions to \\(2(a+b)-3=5\\) or \\(2(a+b)-3=17\\) with the same residue mod 3 in this range are the non-relatively prime pairs \\((2,2),(2,8)\\) and \\((5,5)\\).", "source_pdf": "apmo_2018.pdf", "notes": ""}
{"id": "APMO-2018-5", "contest": "APMO", "year": "2018", "problem_number": "5", "problem": "Find all polynomials \\(P(x)\\) with integer coefficients such that for all real numbers \\(s\\) and \\(t\\), if \\(P(s)\\) and \\(P(t)\\) are both integers, then \\(P(s t)\\) is also an integer.\n\nAnswer: \\(P(x)=x^{n}+k,-x^{n}+k\\) for \\(n\\) a non-negative integer and \\(k\\) an integer.", "solution": "Solution 1: \\(P(x)=x^{n}+k,-x^{n}+k\\) for \\(n\\) a non-negative integer and \\(k\\) an integer.\nNotice that if \\(P(x)\\) is a solution, then so is \\(P(x)+k\\) and \\(-P(x)+k\\) for any integer \\(k\\), so we may assume that the leading coefficient of \\(P(x)\\) is positive and that \\(P(0)=0\\), i.e., we can assume that \\(P(x)=\\sum_{i=1}^{n} a_{i} x^{i}\\) with \\(a_{n}>0\\). We are going to prove that \\(P(x)=x^{n}\\) in this case.\n\nLet \\(p\\) be a large prime such that \\(p>\\sum_{i=1}^{n}\\left|a_{i}\\right|\\). Because \\(P\\) has a positive leading coefficient and \\(p\\) is large enough, we can find \\(t \\in \\mathbb{R}\\) such that \\(P(t)=p\\). Denote the greatest common divisor of the polynomial \\(P(x)-p\\) and \\(P(2 x)-P(2 t)\\) as \\(f(x)\\), and \\(t\\) is a root of it, so \\(f\\) is a non-constant polynomial. Notice that \\(P(2 t)\\) is an integer by using the hypothesis for \\(s=2\\) and \\(t\\). Since \\(P(x)-p\\) and \\(P(2 x)-P(2 t)\\) are polynomials with integer coefficients, \\(f\\) can be chosen as a polynomial with rational coefficients.\n\nIn the following, we will prove that \\(f\\) is the same as \\(P(x)-p\\) up to a constant multiplier. Say \\(P(x)-p=f(x) g(x)\\), where \\(f\\) and \\(g\\) are non-constant polynomials. By Gauss's lemma, we can get \\(f_{1}, g_{1}\\) with \\(P(x)-p=f_{1}(x) g_{1}(x)\\) where \\(f_{1}\\) is a scalar multiple of \\(f\\) and \\(g_{1}\\) is a scalar multiple of \\(g\\) and one of \\(f_{1}, g_{1}\\) has constant term \\(\\pm 1\\) (this is because \\(-p=P(0)-p=f(0) g(0)\\) with \\(p\\) prime). So \\(P(x)-p\\) has at least one root \\(r\\) with absolute value not greater than 1 (using\n\nVieta, the product of the roots of the polynomial with constant term \\(\\pm 1\\) is \\(\\pm 1\\) ), but\n\\[\n|P(r)-p|=\\left|\\sum_{i=1}^{n} a_{i} r^{i}-p\\right|>p-\\sum_{i=1}^{n}\\left|a_{i}\\right|>0\n\\]\nhence we get a contradiction!\nTherefore \\(f\\) is a constant multiple of \\(P(x)-p\\), so \\(P(2 x)-P(2 t)\\) is a constant multiple of \\(P(x)-p\\) because they both have the same degree. By comparing leading coefficients we get that \\(P(2 x)-P(2 t)=2^{n}(P(x)-p)\\). Comparing the rest of the coefficients we get that \\(P(x)=a_{n} x^{n}\\). If we let \\(a=b=\\left(1 / a_{n}\\right)^{1 / n}\\), then \\(P(a)=P(b)=1\\), so \\(P(a b)\\) must also be an integer. But \\(P(a b)=\\frac{1}{a_{n}}\\). Therefore \\(a_{n}=1\\) and the proof is complete.\n\nSolution 2: Assume \\(P(x)=\\sum_{i=0}^{n} a_{i} x^{i}\\). Consider the following system of equations\n\\[\n\\begin{aligned}\na_{0} & =P(0) \\\\\na_{n} t^{n}+a_{n-1} t^{n-1}+\\cdots+a_{0} & =P(t) \\\\\n2^{n} a_{n} t^{n}+2^{n-1} a_{n-1} t^{n-1}+\\cdots+a_{0} & =P(2 t) \\\\\n\\vdots & \\\\\nn^{n} a_{n} t^{n}+n^{n-1} a_{n-1} t^{n-1}+\\cdots+a_{0} & =P(n t)\n\\end{aligned}\n\\]\nviewing \\(a_{k} t^{k}\\) as variables. Note that if \\(P(t)\\) is an integer, then by the hypothesis all the terms on the right hand side of the equations are integers as well. By using Cramer's rule, we can get that \\(a_{k} t^{k}=D / M\\), where \\(D\\) is an integer and \\(M\\) is the following determinant\n\\[\n\\left|\\begin{array}{ccccc}\n1 & 0 & 0 & \\cdots & 0 \\\\\n1 & 1 & 1 & \\cdots & 1 \\\\\n1 & 2 & 4 & \\cdots & 2^{n} \\\\\n\\vdots & \\vdots & \\vdots & & \\vdots \\\\\n1 & n & n^{2} & \\cdots & n^{n}\n\\end{array}\\right| \\neq 0 .\n\\]\n\nThus, if we let \\(r\\) be the smallest positive index such that \\(a_{r} \\neq 0\\), we can express each \\(t \\in \\mathbb{R}\\) with \\(P(t) \\in \\mathbb{Z}\\) in the form \\(\\left(\\frac{m}{M^{\\prime}}\\right)^{1 / r}\\) for some integer \\(m\\), and where \\(M^{\\prime}=M \\times a_{r}\\) is a constant.\n\nWe can choose \\(L\\) large enough such that \\(\\left.P\\right|_{\\mathbb{R} \\geq L}\\) is injective, and for any larger \\(N\\), the growth order of the number of values in the form \\(\\left(\\frac{m}{M^{\\prime}}\\right)^{1 / r}\\) is \\(N^{r}\\), while the growth order of the number of integers in \\([P(L), P(N)]\\) is \\(N^{n}\\), so \\(r=n\\). Therefore \\(P(x)\\) is of the form \\(a_{n} x^{n}+k\\). The problem can be finished as in Solution 1.", "source_pdf": "apmo_2018.pdf", "notes": ""}
{"id": "APMO-2022-1", "contest": "APMO", "year": "2022", "problem_number": "1", "problem": "Find all pairs ( \\(a, b\\) ) of positive integers such that \\(a^{3}\\) is a multiple of \\(b^{2}\\) and \\(b-1\\) is a multiple of \\(a-1\\). Note: An integer \\(n\\) is said to be a multiple of an integer \\(m\\) if there is an integer \\(k\\) such that \\(n=k m\\).", "solution": "\\section*{Solution}\n\n\\section*{Solution 1.1}\n\nBy inspection, we see that the pairs ( \\(a, b\\) ) with \\(a=b\\) are solutions, and so too are the pairs ( \\(a, 1\\) ). We will see that these are the only solutions.\n- Case 1. Consider the case \\(b<a\\). Since \\(b-1\\) is a multiple of \\(a-1\\), it follows that \\(b=1\\). This yields the second set of solutions described above.\n- Case 2. This leaves the case \\(b \\geq a\\). Since the positive integer \\(a^{3}\\) is a multiple of \\(b^{2}\\), there is a positive integer \\(c\\) such that \\(a^{3}=b^{2} c\\).\nNote that \\(a \\equiv b \\equiv 1\\) modulo \\(a-1\\). So we have\n\\[\n1 \\equiv a^{3}=b^{2} c \\equiv c \\quad(\\bmod a-1) .\n\\]\n\nIf \\(c<a\\), then we must have \\(c=1\\), hence, \\(a^{3}=b^{2}\\). So there is a positive integer \\(d\\) such that \\(a=d^{2}\\) and \\(b=d^{3}\\). Now \\(a-1 \\mid b-1\\) yields \\(d^{2}-1 \\mid d^{3}-1\\). This implies that \\(d+1 \\mid d(d+1)+1\\), which is impossible.\nIf \\(c \\geq a\\), then \\(b^{2} c \\geq b^{2} a \\geq a^{3}=b^{2} c\\). So there's equality throughout, implying \\(a=c=b\\). This yields the first set of solutions described above.\n\nTherefore, the solutions described above are the only solutions.\n\n\\section*{Solution 1.2}\n\nWe will start by showing that there are positive integers \\(x, c, d\\) such that \\(a=x^{2} c d\\) and \\(b=x^{3} c\\). Let \\(g=\\operatorname{gcd}(a, b)\\) so that \\(a=g d\\) and \\(b=g x\\) for some coprime \\(d\\) and \\(x\\). Then, \\(b^{2} \\mid a^{3}\\) is equivalent to \\(g^{2} x^{2} \\mid g^{3} d^{3}\\), which is equivalent to \\(x^{2} \\mid g d^{3}\\). Since \\(x\\) and \\(d\\) are coprime, this implies \\(x^{2} \\mid g\\). Hence, \\(g=x^{2} c\\) for some \\(c\\), giving \\(a=x^{2} c d\\) and \\(b=x^{3} c\\) as required.\nNow, it remains to find all positive integers \\(x, c, d\\) satisfying\n\\[\nx^{2} c d-1 \\mid x^{3} c-1 .\n\\]\n\nThat is, \\(x^{3} c \\equiv 1\\left(\\bmod x^{2} c d-1\\right)\\). Assuming that this congruence holds, it follows that \\(d \\equiv x^{3} c d \\equiv x \\left(\\bmod x^{2} c d-1\\right)\\). Then, either \\(x=d\\) or \\(x-d \\geq x^{2} c d-1\\) or \\(d-x \\geq x^{2} c d-1\\).\n- If \\(x=d\\) then \\(b=a\\).\n- If \\(x-d \\geq x^{2} c d-1\\), then \\(x-d \\geq x^{2} c d-1 \\geq x-1 \\geq x-d\\). Hence, each of these inequalities must in fact be an equality. This implies that \\(x=c=d=1\\), which implies that \\(a=b=1\\).\n- If \\(d-x \\geq x^{2} c d-1\\), then \\(d-x \\geq x^{2} c d-1 \\geq d-1 \\geq d-x\\). Hence, each of these inequalities must in fact be an equality. This implies that \\(x=c=1\\), which implies that \\(b=1\\).\n\nHence the only solutions are the pairs ( \\(a, b\\) ) such that \\(a=b\\) or \\(b=1\\). These pairs can be checked to satisfy the given conditions.\n\n\\section*{Solution 1.3}\n\nAll answers are ( \\(n, n\\) ) and ( \\(n, 1\\) ) where \\(n\\) is any positive integer. They all clearly work.\nTo show that these are all solutions, note that we can easily eliminate the case \\(a=1\\) or \\(b=1\\). Thus, assume that \\(a, b \\neq 1\\) and \\(a \\neq b\\). By the second divisibility, we see that \\(a-1 \\mid b-a\\). However, \\(\\operatorname{gcd}(a, b) \\mid b-a\\) and \\(a-1\\) is relatively prime to \\(\\operatorname{gcd}(a, b)\\). This implies that \\((a-1) \\operatorname{gcd}(a, b) \\mid b-a\\), which implies \\(\\operatorname{gcd}(a, b) \\left\\lvert\\, \\frac{b-1}{a-1}-1\\right.\\).\nThe last relation implies that \\(\\operatorname{gcd}(a, b)<\\frac{b-1}{a-1}\\), since the right-hand side are positive. However, due to the first divisibility,\n\\[\n\\operatorname{gcd}(a, b)^{3}=\\operatorname{gcd}\\left(a^{3}, b^{3}\\right) \\geq \\operatorname{gcd}\\left(b^{2}, b^{3}\\right)=b^{2} .\n\\]\n\nCombining these two inequalities, we get that\n\\[\nb^{\\frac{2}{3}}<\\frac{b-1}{a-1}<2 \\frac{b}{a} .\n\\]\n\nThis implies \\(a<2 b^{\\frac{1}{3}}\\). However, \\(b^{2} \\mid a^{3}\\) gives \\(b \\leq a^{\\frac{3}{2}}\\). This forces\n\\[\na<2\\left(a^{\\frac{3}{2}}\\right)^{\\frac{1}{3}}=2 \\sqrt{a} \\Longrightarrow a<4 .\n\\]\n\nExtracting \\(a=2,3\\) by hand yields no additional solution.", "source_pdf": "apmo_2022.pdf", "notes": ""}
{"id": "APMO-2022-2", "contest": "APMO", "year": "2022", "problem_number": "2", "problem": "Let \\(A B C\\) be a right triangle with \\(\\angle B=90^{\\circ}\\). Point \\(D\\) lies on the line \\(C B\\) such that \\(B\\) is between \\(D\\) and \\(C\\). Let \\(E\\) be the midpoint of \\(A D\\) and let \\(F\\) be the second intersection point of the circumcircle of \\(\\triangle A C D\\) and the circumcircle of \\(\\triangle B D E\\). Prove that as \\(D\\) varies, the line \\(E F\\) passes through a fixed point.\n![](https://cdn.mathpix.com/cropped/2025_08_23_d0cc35e860272a0e8f74g-2.jpg?height=887&width=1272&top_left_y=1507&top_left_x=460)", "solution": "\\section*{Solution}\n\n\\section*{Solution 2.1}\n\nLet the line \\(E F\\) intersect the line \\(B C\\) at \\(P\\) and the circumcircle of \\(\\triangle A C D\\) at \\(G\\) distinct from \\(F\\). We will prove that \\(P\\) is the fixed point.\n\nFirst, notice that \\(\\triangle B E D\\) is isosceles with \\(E B=E D\\). This implies \\(\\angle E B C=\\angle E D P\\).\nThen, \\(\\angle D A G=\\angle D F G=\\angle E B C=\\angle E D P\\) which implies \\(A G \\| D C\\). Hence, \\(A G C D\\) is an isosceles trapezoid.\nAlso, \\(A G \\| D C\\) and \\(A E=E D\\). This implies \\(\\triangle A E G \\cong \\triangle D E P\\) and \\(A G=D P\\).\nSince \\(B\\) is the foot of the perpendicular from \\(A\\) onto the side \\(C D\\) of the isosceles trapezoid \\(A G C D\\), we have \\(P B=P D+D B=A G+D B=B C\\), which does not depend on the choice of \\(D\\). Hence, the initial statement is proven.\n\n\\section*{Solution 2.2}\n\nSet up a coordinate system where \\(B C\\) is along the positive \\(x\\)-axis, \\(B A\\) is along the positive \\(y\\)-axis, and \\(B\\) is the origin. Take \\(A=(0, a), B=(0,0), C=(c, 0), D=(-d, 0)\\) where \\(a, b, c, d>0\\). Then \\(E=\\left(-\\frac{d}{2}, \\frac{a}{2}\\right)\\). The general equation of a circle is\n\\[\nx^{2}+y^{2}+2 f x+2 g y+h=0\n\\]\n\nSubstituting the coordinates of \\(A, D, C\\) into (1) and solving for \\(f, g, h\\), we find that the equation of the circumcircle of \\(\\triangle A D C\\) is\n\\[\nx^{2}+y^{2}+(d-c) x+\\left(\\frac{c d}{a}-a\\right) y-c d=0 .\n\\]\n\nSimilarly, the equation of the circumcircle of \\(\\triangle B D E\\) is\n\\[\nx^{2}+y^{2}+d x+\\left(\\frac{d^{2}}{2 a}-\\frac{a}{2}\\right) y=0 .\n\\]\n\nThen (3)-(2) gives the equation of the line \\(D F\\) which is\n\\[\nc x+\\frac{a^{2}+d^{2}-2 c d}{2 a} y+c d=0 .\n\\]\n\nSolving (3) and (4) simultaneously, we get\n\\[\nF=\\left(\\frac{c\\left(d^{2}-a^{2}-2 c d\\right)}{a^{2}+(d-2 c)^{2}}, \\frac{2 a c(c-d)}{a^{2}+(d-2 c)^{2}}\\right),\n\\]\nand the other solution \\(D=(-d, 0)\\).\nFrom this we obtain the equation of the line \\(E F\\) which is \\(a x+(d-2 c) y+a c=0\\). It passes through \\(P(-c, 0)\\) which is independent of \\(d\\).", "source_pdf": "apmo_2022.pdf", "notes": ""}
{"id": "APMO-2022-3", "contest": "APMO", "year": "2022", "problem_number": "3", "problem": "Find all positive integers \\(k<202\\) for which there exists a positive integer \\(n\\) such that\n\\[\n\\left\\{\\frac{n}{202}\\right\\}+\\left\\{\\frac{2 n}{202}\\right\\}+\\cdots+\\left\\{\\frac{k n}{202}\\right\\}=\\frac{k}{2},\n\\]\nwhere \\(\\{x\\}\\) denote the fractional part of \\(x\\).\nNote: \\(\\{x\\}\\) denotes the real number \\(k\\) with \\(0 \\leq k<1\\) such that \\(x-k\\) is an integer.", "solution": "\\section*{Solution}\n\nDenote the equation in the problem statement as (*), and note that it is equivalent to the condition that the average of the remainders when dividing \\(n, 2 n, \\ldots, k n\\) by 202 is 101 . Since \\(\\left\\{\\frac{i n}{202}\\right\\}\\) is invariant in each residue class modulo 202 for each \\(1 \\leq i \\leq k\\), it suffices to consider \\(0 \\leq n<202\\).\n\nIf \\(n=0\\), so is \\(\\left\\{\\frac{i n}{202}\\right\\}\\), meaning that \\(\\left(^{*}\\right)\\) does not hold for any \\(k\\). If \\(n=101\\), then it can be checked that (*) is satisfied if and only if \\(k=1\\). From now on, we will assume that \\(101 \\nmid n\\).\nFor each \\(1 \\leq i \\leq k\\), let \\(a_{i}=\\left\\lfloor\\frac{i n}{202}\\right\\rfloor=\\frac{i n}{202}-\\left\\{\\frac{i n}{202}\\right\\}\\). Rewriting (*) and multiplying the equation by 202, we find that\n\\[\nn(1+2+\\ldots+k)-202\\left(a_{1}+a_{2}+\\ldots+a_{k}\\right)=101 k .\n\\]\n\nEquivalently, letting \\(z=a_{1}+a_{2}+\\ldots+a_{k}\\),\n\\[\nn k(k+1)-404 z=202 k .\n\\]\n\nSince \\(n\\) is not divisible by 101 , which is prime, it follows that \\(101 \\mid k(k+1)\\). In particular, \\(101 \\mid k\\) or \\(101 \\mid k+1\\). This means that \\(k \\in\\{100,101,201\\}\\). We claim that all these values of \\(k\\) work.\n- If \\(k=201\\), we may choose \\(n=1\\). The remainders when dividing \\(n, 2 n, \\ldots, k n\\) by 202 are 1,2 , \\(\\ldots, 201\\), which have an average of 101 .\n- If \\(k=100\\), we may choose \\(n=2\\). The remainders when dividing \\(n, 2 n, \\ldots, k n\\) by 202 are 2,4 , \\(\\ldots, 200\\), which have an average of 101 .\n- If \\(k=101\\), we may choose \\(n=51\\). To see this, note that the first four remainders are \\(51,102,153\\), 2 , which have an average of 77 . The next four remainders ( \\(53,104,155,4\\) ) are shifted upwards from the first four remainders by 2 each, and so on, until the 25 th set of the remainders ( 99 , 150, 201, 50) which have an average of 125 . Hence, the first 100 remainders have an average of \\(\\frac{77+125}{2}=101\\). The 101th remainder is also 101, meaning that the average of all 101 remainders is 101 .\n\nIn conclusion, all values \\(k \\in\\{1,100,101,201\\}\\) satisfy the initial condition.", "source_pdf": "apmo_2022.pdf", "notes": ""}
{"id": "APMO-2022-4", "contest": "APMO", "year": "2022", "problem_number": "4", "problem": "Let \\(n\\) and \\(k\\) be positive integers. Cathy is playing the following game. There are \\(n\\) marbles and \\(k\\) boxes, with the marbles labelled 1 to \\(n\\). Initially, all marbles are placed inside one box. Each turn, Cathy chooses a box and then moves the marbles with the smallest label, say \\(i\\), to either any empty box or the box containing marble \\(i+1\\). Cathy wins if at any point there is a box containing only marble \\(n\\).\nDetermine all pairs of integers ( \\(n, k\\) ) such that Cathy can win this game.", "solution": "\\section*{Solution}\n\nWe claim Cathy can win if and only if \\(n \\leq 2^{k-1}\\).\n\nFirst, note that each non-empty box always contains a consecutive sequence of labeled marbles. This is true since Cathy is always either removing from or placing in the lowest marble in a box. As a consequence, every move made is reversible.\n\nNext, we prove by induction that Cathy can win if \\(n=2^{k-1}\\). The base case of \\(n=k=1\\) is trivial. Assume a victory can be obtained for \\(m\\) boxes and \\(2^{m-1}\\) marbles. Consider the case of \\(m+1\\) boxes and \\(2^{m}\\) marbles. Cathy can first perform a sequence of moves so that only marbles \\(2^{m-1}, \\ldots, 2^{m}\\) are left in the starting box, while keeping one box, say \\(B\\), empty. Now move the marble \\(2^{m-1}\\) to box \\(B\\), then reverse all of the initial moves while treating \\(B\\) as the starting box. At the end of that, we will have marbles \\(2^{m-1}+1, \\ldots, 2^{m}\\) in the starting box, marbles \\(1,2, \\ldots, 2^{m-1}\\) in box \\(B\\), and \\(m-1\\) empty boxes. By repeating the original sequence of moves on marbles \\(2^{m-1}+1, \\ldots, 2^{m}\\), using the \\(m\\) boxes that are not box \\(B\\), we can reach a state where only marble \\(2^{m}\\) remains in the starting box. Therefore\na victory is possible if \\(n=2^{k-1}\\) or smaller.\n\nWe now prove by induction that Cathy loses if \\(n=2^{k-1}+1\\). The base case of \\(n=2\\) and \\(k=1\\) is trivial. Assume a victory is impossible for \\(m\\) boxes and \\(2^{m-1}+1\\) marbles. For the sake of contradiction, suppose that victory is possible for \\(m+1\\) boxes and \\(2^{m}+1\\) marbles. In a winning sequence of moves, consider the last time a marble \\(2^{m-1}+1\\) leaves the starting box, call this move \\(X\\). After \\(X\\), there cannot be a time when marbles \\(1, \\ldots, 2^{m-1}+1\\) are all in the same box. Otherwise, by reversing these moves after \\(X\\) and deleting marbles greater than \\(2^{m-1}+1\\), it gives us a winning sequence of moves for \\(2^{m-1}+1\\) marbles and \\(m\\) boxes (as the original starting box is not used here), contradicting the inductive hypothesis. Hence starting from \\(X\\), marbles 1 will never be in the same box as any marbles greater than or equal to \\(2^{m-1}+1\\).\n\nNow delete marbles \\(2, \\ldots, 2^{m-1}\\) and consider the winning moves starting from \\(X\\). Marble 1 would only move from one empty box to another, while blocking other marbles from entering its box. Thus we effectively have a sequence of moves for \\(2^{m-1}+1\\) marbles, while only able to use \\(m\\) boxes. This again contradicts the inductive hypothesis. Therefore, a victory is not possible if \\(n=2^{k-1}+1\\) or greater.", "source_pdf": "apmo_2022.pdf", "notes": ""}
{"id": "APMO-2022-5", "contest": "APMO", "year": "2022", "problem_number": "5", "problem": "Let \\(a, b, c, d\\) be real numbers such that \\(a^{2}+b^{2}+c^{2}+d^{2}=1\\). Determine the minimum value of \\((a-b)(b-c)(c-d)(d-a)\\) and determine all values of \\((a, b, c, d)\\) such that the minimum value is achieved.", "solution": "\\section*{Solution}\n\nThe minimum value is \\(-\\frac{1}{8}\\). There are eight equality cases in total. The first one is\n\\[\n\\left(\\frac{1}{4}+\\frac{\\sqrt{3}}{4},-\\frac{1}{4}-\\frac{\\sqrt{3}}{4}, \\frac{1}{4}-\\frac{\\sqrt{3}}{4},-\\frac{1}{4}+\\frac{\\sqrt{3}}{4}\\right) .\n\\]\n\nCyclic shifting all the entries give three more quadruples. Moreover, flipping the sign \\(((a, b, c, d) \\rightarrow (-a,-b,-c,-d)\\) ) all four entries in each of the four quadruples give four more equality cases.\n\n\\section*{Solution 5.1}\n\nSince the expression is cyclic, we could WLOG \\(a=\\max \\{a, b, c, d\\}\\). Let\n\\[\nS(a, b, c, d)=(a-b)(b-c)(c-d)(d-a)\n\\]\n\nNote that we have given \\((a, b, c, d)\\) such that \\(S(a, b, c, d)=-\\frac{1}{8}\\). Therefore, to prove that \\(S(a, b, c, d) \\geq -\\frac{1}{8}\\), we just need to consider the case where \\(S(a, b, c, d)<0\\).\n- Exactly 1 of \\(a-b, b-c, c-d, d-a\\) is negative.\n\nSince \\(a=\\max \\{a, b, c, d\\}\\), then we must have \\(d-a<0\\). This forces \\(a>b>c>d\\). Now, let us write\n\\[\nS(a, b, c, d)=-(a-b)(b-c)(c-d)(a-d)\n\\]\n\nWrite \\(a-b=y, b-c=x, c-d=w\\) for some positive reals \\(w, x, y>0\\). Plugging to the original condition, we have\n\\[\n(d+w+x+y)^{2}+(d+w+x)^{2}+(d+w)^{2}+d^{2}-1=0\n\\]\nand we want to prove that \\(w x y(w+x+y) \\leq \\frac{1}{8}\\). Consider the expression \\((*)\\) as a quadratic in \\(d\\) :\n\\[\n4 d^{2}+d(6 w+4 x+2 y)+\\left((w+x+y)^{2}+(w+x)^{2}+w^{2}-1\\right)=0\n\\]\n\nSince \\(d\\) is a real number, then the discriminant of the given equation has to be non-negative, i.e. we must have\n\\[\n\\begin{aligned}\n4 & \\geq 4\\left((w+x+y)^{2}+(w+x)^{2}+w^{2}\\right)-(3 w+2 x+y)^{2} \\\\\n& =\\left(3 w^{2}+2 w y+3 y^{2}\\right)+4 x(w+x+y) \\\\\n& \\geq 8 w y+4 x(w+x+y) \\\\\n& =4(x(w+x+y)+2 w y)\n\\end{aligned}\n\\]\n\nHowever, AM-GM gives us\n\\[\nw x y(w+x+y) \\leq \\frac{1}{2}\\left(\\frac{x(w+x+y)+2 w y}{2}\\right)^{2} \\leq \\frac{1}{8}\n\\]\n\nThis proves \\(S(a, b, c, d) \\geq-\\frac{1}{8}\\) for any \\(a, b, c, d \\in \\mathbb{R}\\) such that \\(a>b>c>d\\). Equality holds if and only if \\(w=y, x(w+x+y)=2 w y\\) and \\(w x y(w+x+y)=\\frac{1}{8}\\). Solving these equations gives us \\(w^{4}=\\frac{1}{16}\\) which forces \\(w=\\frac{1}{2}\\) since \\(w>0\\). Solving for \\(x\\) gives us \\(x(x+1)=\\frac{1}{2}\\), and we will get \\(x=-\\frac{1}{2}+\\frac{\\sqrt{3}}{2}\\) as \\(x>0\\). Plugging back gives us \\(d=-\\frac{1}{4}-\\frac{\\sqrt{3}}{4}\\), and this gives us\n\\[\n(a, b, c, d)=\\left(\\frac{1}{4}+\\frac{\\sqrt{3}}{4},-\\frac{1}{4}+\\frac{\\sqrt{3}}{4}, \\frac{1}{4}-\\frac{\\sqrt{3}}{4},-\\frac{1}{4}-\\frac{\\sqrt{3}}{4}\\right)\n\\]\n\nThus, any cyclic permutation of the above solution will achieve the minimum equality.\n- Exactly 3 of \\(a-b, b-c, c-d, d-a\\) are negative Since \\(a=\\max \\{a, b, c, d\\}\\), then \\(a-b\\) has to be positive. So we must have \\(b<c<d<a\\). Now, note that\n\\[\n\\begin{aligned}\nS(a, b, c, d) & =(a-b)(b-c)(c-d)(d-a) \\\\\n& =(a-d)(d-c)(c-b)(b-a) \\\\\n& =S(a, d, c, b)\n\\end{aligned}\n\\]\n\nNow, note that \\(a>d>c>b\\). By the previous case, \\(S(a, d, c, b) \\geq-\\frac{1}{8}\\), which implies that\n\\[\nS(a, b, c, d)=S(a, d, c, b) \\geq-\\frac{1}{8}\n\\]\nas well. Equality holds if and only if\n\\[\n(a, b, c, d)=\\left(\\frac{1}{4}+\\frac{\\sqrt{3}}{4},-\\frac{1}{4}-\\frac{\\sqrt{3}}{4}, \\frac{1}{4}-\\frac{\\sqrt{3}}{4},-\\frac{1}{4}+\\frac{\\sqrt{3}}{4}\\right)\n\\]\nand its cyclic permutation.\n\n\\section*{Solution 5.2}\n\nThe minimum value is \\(-\\frac{1}{8}\\). There are eight equality cases in total. The first one is\n\\[\n\\left(\\frac{1}{4}+\\frac{\\sqrt{3}}{4},-\\frac{1}{4}-\\frac{\\sqrt{3}}{4}, \\frac{1}{4}-\\frac{\\sqrt{3}}{4},-\\frac{1}{4}+\\frac{\\sqrt{3}}{4}\\right) .\n\\]\n\nCyclic shifting all the entries give three more quadruples. Moreover, flipping the sign \\(((a, b, c, d) \\rightarrow (-a,-b,-c,-d)\\) ) all four entries in each of the four quadruples give four more equality cases. We then begin the proof by the following optimization:\n\nClaim 1. In order to get the minimum value, we must have \\(a+b+c+d=0\\).\n\nProof. Assume not, let \\(\\delta=\\frac{a+b+c+d}{4}\\) and note that\n\\[\n(a-\\delta)^{2}+(b-\\delta)^{2}+(c-\\delta)^{2}+(d-\\delta)^{2}<a^{2}+b^{2}+c^{2}+d^{2}\n\\]\nso by shifting by \\(\\delta\\) and scaling, we get an even smaller value of \\((a-b)(b-c)(c-d)(d-a)\\).\n\nThe key idea is to substitute the variables\n\\[\n\\begin{aligned}\n& x=a c+b d \\\\\n& y=a b+c d \\\\\n& z=a d+b c\n\\end{aligned}\n\\]\nso that the original expression is just \\((x-y)(x-z)\\). We also have the conditions \\(x, y, z \\geq-0.5\\) because of:\n\\[\n2 x+\\left(a^{2}+b^{2}+c^{2}+d^{2}\\right)=(a+c)^{2}+(b+d)^{2} \\geq 0\n\\]\n\nMoreover, notice that\n\\[\n0=(a+b+c+d)^{2}=a^{2}+b^{2}+c^{2}+d^{2}+2(x+y+z) \\Longrightarrow x+y+z=\\frac{-1}{2}\n\\]\n\nNow, we reduce to the following optimization problem.\nClaim 2. Let \\(x, y, z \\geq-0.5\\) such that \\(x+y+z=-0.5\\). Then, the minimum value of\n\\[\n(x-y)(x-z)\n\\]\nis \\(-1 / 8\\). Moreover, the equality case occurs when \\(x=-1 / 4\\) and \\(\\{y, z\\}=\\{1 / 4,-1 / 2\\}\\).\nProof. We notice that\n\\[\n\\begin{aligned}\n(x-y)(x-z)+\\frac{1}{8} & =\\left(2 y+z+\\frac{1}{2}\\right)\\left(2 z+y+\\frac{1}{2}\\right)+\\frac{1}{8} \\\\\n& =\\frac{1}{8}(4 y+4 z+1)^{2}+\\left(y+\\frac{1}{2}\\right)\\left(z+\\frac{1}{2}\\right) \\geq 0\n\\end{aligned}\n\\]\n\nThe last inequality is true since both \\(y+\\frac{1}{2}\\) and \\(z+\\frac{1}{2}\\) are not less than zero.\nThe equality in the last inequality is attained when either \\(y+\\frac{1}{2}=0\\) or \\(z+\\frac{1}{2}=0\\), and \\(4 y+4 z+1=0\\). This system of equations give \\((y, z)=(1 / 4,-1 / 2)\\) or \\((y, z)=(-1 / 2,1 / 4)\\) as the desired equality cases.\n\nNote: We can also prove (the weakened) Claim 2 by using Lagrange Multiplier, as follows. We first prove that, in fact, \\(x, y, z \\in[-0.5,0.5]\\). This can be proved by considering that\n\\[\n-2 x+\\left(a^{2}+b^{2}+c^{2}+d^{2}\\right)=(a-c)^{2}+(b-d)^{2} \\geq 0\n\\]\n\nWe will prove the Claim 2, only that in this case, \\(x, y, z \\in[-0.5,0.5]\\). This is already sufficient to prove the original question. We already have the bounded domain \\([-0.5,0.5]^{3}\\), so the global minimum must occur somewhere. Thus, it suffices to consider two cases:\n- If the global minimum lies on the boundary of \\([-0.5,0.5]^{3}\\). Then, one of \\(x, y, z\\) must be -0.5 or 0.5 . By symmetry between \\(y\\) and \\(z\\), we split to a few more cases.\n- If \\(x=0.5\\), then \\(y=z=-0.5\\), so \\((x-y)(x-z)=1\\), not the minimum.\n- If \\(x=-0.5\\), then both \\(y\\) and \\(z\\) must be greater or equal to \\(x\\), so \\((x-y)(x-z) \\geq 0\\), not the minimum.\n- If \\(y=0.5\\), then \\(x=z=-0.5\\), so \\((x-y)(x-z)=0\\), not the minimum.\n- If \\(y=-0.5\\), then \\(z=-x\\), so\n\\[\n(x-y)(x-z)=2 x(x+0.5),\n\\]\nwhich obtain the minimum at \\(x=-1 / 4\\). This gives the desired equality case.\n- If the global minimum lies in the interior \\((-0.5,0.5)^{3}\\), then we apply Lagrange multiplier:\n\\[\n\\begin{aligned}\n\\frac{\\partial}{\\partial x}(x-y)(x-z) & =\\lambda \\frac{\\partial}{\\partial x}(x+y+z) \\\\\n\\frac{\\partial}{\\partial y}(x-y)(x-z) & =\\lambda \\frac{\\partial}{\\partial y}(x+y+z) \\Longrightarrow z-x=\\lambda . \\\\\n\\frac{\\partial}{\\partial z}(x-y)(x-z) & =\\lambda \\frac{\\partial}{\\partial z}(x+y+z) \\Longrightarrow y-x=\\lambda .\n\\end{aligned}\n\\]\n\nAdding the last two equations gives \\(\\lambda=0\\), or \\(x=y=z\\). This gives \\((x-y)(x-z)=0\\), not the minimum.\n\nHaving exhausted all cases, we are done.", "source_pdf": "apmo_2022.pdf", "notes": ""}
{"id": "APMO-2017-1", "contest": "APMO", "year": "2017", "problem_number": "1", "problem": "We call a 5-tuple of integers arrangeable if its elements can be labeled \\(a\\), \\(b, c, d, e\\) in some order so that \\(a-b+c-d+e=29\\). Determine all 2017-tuples of integers \\(n_{1}, n_{2}, \\ldots, n_{2017}\\) such that if we place them in a circle in clockwise order, then any 5 -tuple of numbers in consecutive positions on the circle is arrangeable.\n\nAnswer: \\(n_{1}=\\cdots=n_{2017}=29\\).", "solution": "Solution. A valid 2017-tuple is \\(n_{1}=\\cdots=n_{2017}=29\\). We will show that it is the only solution.\n\nWe first replace each number \\(n_{i}\\) in the circle by \\(m_{i}:=n_{i}-29\\). Since the condition \\(a-b+ c-d+e=29\\) can be rewritten as \\((a-29)-(b-29)+(c-29)-(d-29)+(e-29)=0\\), we have that any five consecutive replaced integers in the circle can be labeled \\(a, b, c, d, e\\) in such a way that \\(a-b+c-d+e=0\\). We claim that this is possible only when all of the \\(m_{i}\\) 's are 0 (and thus all of the original \\(n_{i}\\) 's are 29).\n\nWe work with indexes modulo 2017. Notice that for every \\(i, m_{i}\\) and \\(m_{i+5}\\) have the same parity. Indeed, this follows from \\(m_{i} \\equiv m_{i+1}+m_{i+2}+m_{i+3}+m_{i+4} \\equiv m_{i+5}(\\bmod 2)\\). Since \\(\\operatorname{gcd}(5,2017)=1\\), this implies that all \\(m_{i}\\) 's are of the same parity. Since \\(m_{1}+m_{2}+m_{3}+m_{4}+m_{5}\\) is even, all \\(m_{i}\\) 's must be even as well.\n\nSuppose for the sake of contradiction that not all \\(m_{i}\\) 's are zero. Then our condition still holds when we divide each number in the circle by 2 . However, by performing repeated divisions, we eventually reach a point where some \\(m_{i}\\) is odd. This is a contradiction.", "source_pdf": "apmo_2017.pdf", "notes": ""}
{"id": "APMO-2017-2", "contest": "APMO", "year": "2017", "problem_number": "2", "problem": "Let \\(A B C\\) be a triangle with \\(A B<A C\\). Let \\(D\\) be the intersection point of the internal bisector of angle \\(B A C\\) and the circumcircle of \\(A B C\\). Let \\(Z\\) be the intersection point of the perpendicular bisector of \\(A C\\) with the external bisector of angle \\(\\angle B A C\\). Prove that the midpoint of the segment \\(A B\\) lies on the circumcircle of triangle \\(A D Z\\).", "solution": "Solution 1. Let \\(N\\) be the midpoint of \\(A C\\). Let \\(M\\) be the intersection point of the circumcircle of triangle \\(A D Z\\) and the segment \\(A B\\). We will show that \\(M\\) is the midpoint of \\(A B\\). To do this, let \\(D^{\\prime}\\) the reflection of \\(D\\) with respect to \\(M\\). It suffices to show that \\(A D B D^{\\prime}\\) is a parallelogram.\n\nThe internal and external bisectors of an angle in a triangle are perpendicular. This implies that \\(Z D\\) is a diameter of the circumcircle of \\(A Z D\\) and thus \\(\\angle Z M D=90^{\\circ}\\). This means that \\(Z M\\) is the perpendicular bisector of \\(D^{\\prime} D\\) and thus \\(Z D^{\\prime}=Z D\\). By construction, \\(Z\\) is in the perpendicular bisector of \\(A C\\) and thus \\(Z A=Z C\\).\n\nNow, let \\(\\alpha\\) be the angle \\(\\angle B A D=\\angle D A C\\). In the cyclic quadrilateral \\(A Z D M\\) we get \\(\\angle M Z D=\\angle M A D=\\alpha\\), and thus \\(\\angle D^{\\prime} Z D=2 \\alpha\\). By angle chasing we get\n\\[\n\\angle A Z N=90^{\\circ}-\\angle Z A N=\\angle D A C=\\alpha,\n\\]\nwhich implies that \\(\\angle A Z C=2 \\alpha\\). Therefore,\n\\[\n\\angle D^{\\prime} Z A=\\angle D^{\\prime} Z D-\\angle A Z D=2 \\alpha-\\angle A Z D=\\angle A Z C-\\angle A Z D=\\angle D Z C .\n\\]\n\nCombining \\(\\angle D^{\\prime} Z A=\\angle D Z C, Z D^{\\prime}=Z D\\) and \\(Z A=Z C\\), we obtain by the \\(S A S\\) criterion that the triangles \\(D^{\\prime} Z A\\) and \\(D Z C\\) are congruent. In particular, \\(D^{\\prime} A=D C\\) and \\(\\angle D^{\\prime} A Z= \\angle D C Z\\). From here \\(D B=D C=D^{\\prime} A\\).\n\nFinally, let \\(\\beta=\\angle A B C=\\angle A D C\\). We get the first of the following equalities by the sum of angles around point \\(A\\) and the second one by the sum of internal angles of quadrilateral \\(A Z C D\\)\n\\[\n\\begin{aligned}\n& 360^{\\circ}=\\angle D^{\\prime} A Z+\\angle Z A D+\\angle D A B+\\angle B A D^{\\prime}=\\angle D^{\\prime} A Z+90^{\\circ}+\\alpha+\\angle B A D^{\\prime} \\\\\n& 360^{\\circ}=\\angle D C Z+\\angle Z A D+\\angle C Z A+\\angle A D C=\\angle D C Z+90^{\\circ}+2 \\alpha+\\beta .\n\\end{aligned}\n\\]\n\nBy canceling equal terms we conclude that \\(\\angle B A D^{\\prime}=\\alpha+\\beta\\). Also, \\(\\angle A B D=\\alpha+\\beta\\). Therefore, the segments \\(D^{\\prime} A\\) and \\(D B\\) are parallel and have the same length. We conclude that \\(A D B D^{\\prime}\\) is a parallelogram. As the diagonals of a parallelogram intersect at their midpoints, we obtain that \\(M\\) is the midpoint of \\(A B\\) as desired.\n![](https://cdn.mathpix.com/cropped/2025_08_23_20e80a7167e7927432a3g-2.jpg?height=983&width=1243&top_left_y=739&top_left_x=402)\n\nVariant of solution. The solution above is indirect in the sense that it assumes that \\(M\\) is in the circumcircle of \\(A Z D\\) and then shows that \\(M\\) is the midpoint of \\(A B\\). We point out that the same ideas in the solution can be used to give a direct solution. Here we present a sketch on how to proceed in this manner.\n\nNow we know that \\(M\\) is the midpoint of the side \\(A B\\). We construct the point \\(D^{\\prime}\\) in the same way. Now we have directly that \\(A D B D^{\\prime}\\) is a parallelogram and thus \\(D^{\\prime} A=D B=D C\\). By construction \\(Z A=Z C\\). Also, the two sums of angles equal to \\(360^{\\circ}\\) in the previous solution let us conclude that \\(\\angle D^{\\prime} A Z=\\angle D C Z\\). Once again, we use (differently) the \\(S A S\\) criterion and obtain that the triangles \\(D^{\\prime} A Z\\) and \\(D C Z\\) are congruent. Thus, \\(D^{\\prime} Z=D Z\\).\n\nWe finish the problem by noting that \\(Z M\\) is a median of the isosceles triangle \\(D^{\\prime} Z D\\), so it is also a perpendicular bisector. This shows that \\(\\angle D M Z=90^{\\circ}=\\angle D A Z\\), and therefore \\(M\\) lies in the circumcircle of \\(D A Z\\).\n\nSolution 2. We proceed directly. As above, we name\n\\[\n\\alpha=\\angle D A C=\\angle A Z N=\\angle C Z N=\\angle D C B .\n\\]\n\nLet \\(L\\) be the midpoint of the segment \\(B C\\). Since \\(M\\) and \\(N\\) are midpoints of \\(A B\\) and \\(A C\\), we have that \\(M N=C L\\) and that the segment \\(M N\\) is parallel to \\(B C\\). Thus, \\(\\angle A N M=\\angle A C B\\).\n\nTherefore, \\(\\angle Z N M=\\angle A C B+90^{\\circ}\\). Also, \\(\\angle D C Z=\\angle D C B+\\angle A C B+\\angle Z C A=\\angle A C B+90^{\\circ}\\). We conclude that \\(\\angle Z N M=\\angle D C Z\\).\n\nNow, the triangles \\(Z N C\\) and \\(C L D\\) are similar since \\(\\angle D C L=90^{\\circ}=\\angle C N Z\\) and \\(\\angle D C L= \\alpha=\\angle C Z N\\). We use this fact to obtain the following chain of equalities\n\\[\n\\frac{C D}{M N}=\\frac{C D}{C L}=\\frac{C Z}{Z N}\n\\]\n\nWe combine the equality above with \\(\\angle Z N M=\\angle D C Z\\) to conclude that the triangles \\(Z N M\\) and \\(Z C D\\) are similar. In particular, \\(\\angle M Z N=\\angle D Z C\\) and \\(\\frac{Z M}{Z N}=\\frac{Z D}{Z C}\\). Since we also have \\(\\angle M Z D=\\angle M Z N+\\angle N Z D=\\angle D Z C+\\angle N Z D=\\angle N Z C\\), we conclude that the triangles \\(M Z D\\) and \\(N Z C\\) are similar. This yields that \\(\\angle Z M D=90^{\\circ}\\) and therefore \\(M\\) is in the circumcircle of triangle \\(D A Z\\).\n\nSolution 3. Let \\(m\\) be the perpendicular bisector of \\(A D\\); thus \\(m\\) passes through the center \\(O\\) of the circumcircle of triangle \\(A B C\\). Since \\(A D\\) is the internal angle bisector of \\(A\\) and \\(O M\\) and \\(O N\\) are perpendicular to \\(A B\\) and \\(A C\\) respectively, we obtain that \\(O M\\) and \\(O N\\) form equal angles with \\(A D\\). This implies that they are symmetric with respect to \\(M\\).\n\nTherefore, the line \\(M O\\) passes through the point \\(Z^{\\prime}\\) symmetrical to \\(Z\\) with respect to \\(m\\). Since \\(\\angle D A Z=90^{\\circ}\\), then also \\(\\angle A D Z^{\\prime}=90^{\\circ}\\). Moreover, since \\(A Z=D Z^{\\prime}\\), we have that \\(\\angle A Z Z^{\\prime}=\\angle D Z^{\\prime} Z=90^{\\circ}\\), so \\(A Z Z^{\\prime} D\\) is a rectangle. Since \\(\\angle A M Z^{\\prime}=\\angle A M O=90^{\\circ}\\), we conclude that \\(M\\) is in the circle with diameter \\(A Z^{\\prime}\\), which is the circumcircle of the rectangle. Thus \\(M\\) lies on the circumcircle of the triangle \\(A D Z\\).", "source_pdf": "apmo_2017.pdf", "notes": ""}
{"id": "APMO-2017-3", "contest": "APMO", "year": "2017", "problem_number": "3", "problem": "Let \\(A(n)\\) denote the number of sequences \\(a_{1} \\geq a_{2} \\geq \\ldots \\geq a_{k}\\) of positive integers for which \\(a_{1}+\\cdots+a_{k}=n\\) and each \\(a_{i}+1\\) is a power of two ( \\(i=1,2, \\ldots, k\\) ). Let \\(B(n)\\) denote the number of sequences \\(b_{1} \\geq b_{2} \\geq \\ldots \\geq b_{m}\\) of positive integers for which \\(b_{1}+\\cdots+b_{m}=n\\) and each inequality \\(b_{j} \\geq 2 b_{j+1}\\) holds ( \\(j=1,2, \\ldots, m-1\\) ).\n\nProve that \\(A(n)=B(n)\\) for every positive integer \\(n\\).", "solution": "Solution. We say that a sequence \\(a_{1} \\geq a_{2} \\geq \\ldots \\geq a_{k}\\) of positive integers has type \\(A\\) if \\(a_{i}+1\\) is a power of two for \\(i=1,2, \\ldots, k\\). We say that a sequence \\(b_{1} \\geq b_{2} \\geq \\ldots \\geq b_{m}\\) of positive integer has type \\(B\\) if \\(b_{j} \\geq 2 b_{j+1}\\) for \\(j=1,2, \\ldots, m-1\\).\n\nRecall that the binary representation of a positive integer expresses it as a sum of distinct powers of two in a unique way. Furthermore, we have the following formula for every positive integer \\(N\\)\n\\[\n2^{N}-1=2^{N-1}+2^{N-2}+\\cdots+2^{1}+2^{0}\n\\]\n\nGiven a sequence \\(a_{1} \\geq a_{2} \\geq \\ldots \\geq a_{k}\\) of type \\(A\\), use the preceding formula to express each term as a sum of powers of two. Write these powers of two in left-aligned rows, in decreasing order of size. By construction, \\(a_{i}\\) is the sum of the numbers in the \\(i\\) th row. For example, we obtain the following array when we start with the type A sequence \\(15,15,7,3,3,3,1\\).\n\n\\begin{tabular}{llll}\n8 & 4 & 2 & 1 \\\\\n8 & 4 & 2 & 1 \\\\\n4 & 2 & 1 & \\\\\n2 & 1 & & \\\\\n2 & 1 & & \\\\\n2 & 1 & & \\\\\n1 & & & \\\\\n\\hline 27 & 13 & 5 & 2\n\\end{tabular}\n\nDefine the sequence \\(b_{1}, b_{2}, \\ldots, b_{n}\\) by setting \\(b_{j}\\) to be the sum of the numbers in the \\(j\\) th column of the array. For example, we obtain the sequence \\(27,13,5,2\\) from the array above. We now show that this new sequence has type B. This is clear from the fact that each column in the array contains at least as many entries as the column to the right of it and that each number larger than 1 in the array is twice the number to the right of it. Furthermore, it is clear that \\(a_{1}+a_{2}+\\cdots+a_{k}=b_{1}+b_{2}+\\cdots+b_{m}\\), since both are equal to the sum of all the entries in the array.\n\nWe now show that we can do this operation backwards. Suppose that we are given a type B sequence \\(b_{1} \\geq b_{2} \\geq \\ldots \\geq b_{m}\\). We construct an array inductively as follows:\n- We fill \\(b_{m}\\) left-aligned rows with the numbers \\(2^{m-1}, 2^{m-2}, \\ldots, 2^{1}, 2^{0}\\).\n- Then we fill \\(b_{m-1}-2 b_{m}\\) left aligned rows with the numbers \\(2^{m-2}, 2^{m-3}, \\ldots, 2^{1}, 2^{0}\\).\n- Then we fill \\(b_{m-2}-2 b_{m-1}\\) left aligned rows with the numbers \\(2^{m-3}, 2^{m-4}, \\ldots, 2^{1}, 2^{0}\\), and so on.\n- In the last step we fill \\(b_{1}-2 b_{2}\\) left-aligned rows with the number 1 .\n\nFor example, if we start with the type B sequence \\(27,13,5,2\\), we obtain once again the array above. We define the sequence \\(a_{1}, a_{2}, \\ldots, a_{k}\\) by setting \\(a_{i}\\) to be the sum of the numbers in the \\(i\\) th row of the array. By construction, this sequence has type A. Furthermore, it is clear that \\(a_{1}+\\cdots+a_{k}=b_{1}+\\cdots+b_{m}\\), since once again both sums are equal to the sum of all the entries in the array.\n\nWe have defined an operation that starts with a sequence of type A, produces an array whose row sums are given by the sequence, and outputs a sequence of type B corresponding to the column sums. We have also defined an operation that starts with a sequence of type B, produces an array whose column sums are given by the sequence, and outputs a sequence of type A corresponding to the row sums. The arrays produced in both cases comprise leftaligned rows of the form \\(2^{N-1}, 2^{N-2}, \\ldots, 2^{1}, 2^{0}\\), with non-increasing lengths. Let us refer to arrays obeying these properties as marvelous.\n\nTo show that these two operations are inverses of each other, it then suffices to prove that marvelous arrays are uniquely defined by either their row sums or their column sums. The former is obviously true and the latter arises from the observation that each step in the above inductive algorithm was forced in order to create a marvelous array with the prescribed column sums.\n\nThus, we have produced a bijection between the sequences of type A with sum \\(n\\) and the sequences of type B with sum \\(n\\). So we can conclude that \\(A(n)=B(n)\\) for every positive integer \\(n\\).\n\nRemark The solution above provides a bijection between type A and type B sequences via an algorithm. There are alternative ways to provide such a bijection. For example, given the numbers \\(a_{1} \\geq \\ldots \\geq a_{k}\\) we may define the \\(b_{i}\\) 's as\n\\[\nb_{j}=\\sum_{i}\\left\\lfloor\\frac{a_{i}+1}{2^{j}}\\right\\rfloor .\n\\]\n\nConversely, given the numbers \\(b_{1} \\geq \\ldots \\geq b_{m}\\), one may define the \\(a_{i}\\) 's by taking, as in the solution, \\(b_{m}\\) numbers equal to \\(2^{m}-1, b_{m-1}-2 b_{m}\\) numbers equal to \\(2^{m-1}-1, \\ldots\\), and \\(b_{1}-2 b_{2}\\) numbers equal to \\(2^{1}-1\\). One now needs to verify that these maps are mutually inverse.", "source_pdf": "apmo_2017.pdf", "notes": ""}
{"id": "APMO-2017-4", "contest": "APMO", "year": "2017", "problem_number": "4", "problem": "Call a rational number \\(r\\) powerful if \\(r\\) can be expressed in the form \\(\\frac{p^{k}}{q}\\) for some relatively prime positive integers \\(p, q\\) and some integer \\(k>1\\). Let \\(a, b, c\\) be positive\nrational numbers such that \\(a b c=1\\). Suppose there exist positive integers \\(x, y, z\\) such that \\(a^{x}+b^{y}+c^{z}\\) is an integer. Prove that \\(a, b, c\\) are all powerful.", "solution": "Solution. Let \\(a=\\frac{a_{1}}{b_{1}}, b=\\frac{a_{2}}{b_{2}}\\), where \\(\\operatorname{gcd}\\left(a_{1}, b_{1}\\right)=\\operatorname{gcd}\\left(a_{2}, b_{2}\\right)=1\\). Then \\(c=\\frac{b_{1} b_{2}}{a_{1} a_{2}}\\). The condition that \\(a^{x}+b^{y}+c^{z}\\) is an integer becomes\n\\[\n\\frac{a_{1}^{x+z} a_{2}^{z} b_{2}^{y}+a_{1}^{z} a_{2}^{y+z} b_{1}^{x}+b_{1}^{x+z} b_{2}^{y+z}}{a_{1}^{z} a_{2}^{z} b_{1}^{x} b_{2}^{y}} \\in \\mathbb{Z}\n\\]\nwhich can be restated as\n\\[\na_{1}^{z} a_{2}^{z} b_{1}^{x} b_{2}^{y} \\mid a_{1}^{x+z} a_{2}^{z} b_{2}^{y}+a_{1}^{z} a_{2}^{y+z} b_{1}^{x}+b_{1}^{x+z} b_{2}^{y+z}\n\\]\n\nIn particular, \\(a_{1}^{z}\\) divides the right-hand side. Since it divides the first and second terms in the sum, we conclude that \\(a_{1}^{z} \\mid b_{1}^{x+z} b_{2}^{y+z}\\). Since \\(\\operatorname{gcd}\\left(a_{1}, b_{1}\\right)=1\\), we have \\(a_{1}^{z} \\mid b_{2}^{y+z}\\).\n\nLet \\(p\\) be a prime that divides \\(a_{1}\\). Let \\(m, n \\geq 1\\) be integers such that \\(p^{n} \\| a_{1}\\) (i.e. \\(p^{n} \\mid a_{1}\\) but \\(p^{n+1} \\nmid a_{1}\\) ) and \\(p^{m} \\| b_{2}\\). The fact that \\(a_{1}^{z} \\mid b_{2}^{y+z}\\) implies \\(n z \\leq m(y+z)\\). Since \\(\\operatorname{gcd}\\left(a_{1}, b_{1}\\right)= \\operatorname{gcd}\\left(a_{2}, b_{2}\\right)=1\\), we have \\(p\\) does not divide \\(b_{1}\\) and does not divide \\(a_{2}\\). Thus\n\\[\np^{n z} \\| a_{1}^{z} a_{2}^{y+z} b_{1}^{x} \\text { and } p^{m(y+z)} \\| b_{1}^{x+z} b_{2}^{y+z}\n\\]\n\nOn the other hand, (1) implies that\n\\[\np^{n z+m y} \\mid a_{1}^{z} a_{2}^{y+z} b_{1}^{x}+b_{1}^{x+z} b_{2}^{y+z}\n\\]\n\nIf \\(n z<m(y+z)\\), then (2) gives \\(p^{n z} \\| a_{1}^{z} a_{2}^{y+z} b_{1}^{x}+b_{1}^{x+z} b_{2}^{y+z}\\), which contradicts (3). Thus \\(n z=m(y+z)\\) so \\(n\\) is divisible by \\(k:=\\frac{y+z}{\\operatorname{gcd}(z, y+z)}>1\\). Thus each exponent in the prime decomposition of \\(a_{1}\\) must be divisible by \\(k\\). Hence \\(a_{1}\\) is a perfect \\(k\\)-power which means \\(a\\) is powerful. Similarly, \\(b\\) and \\(c\\) are also powerful.", "source_pdf": "apmo_2017.pdf", "notes": ""}
{"id": "APMO-2017-5", "contest": "APMO", "year": "2017", "problem_number": "5", "problem": "Let \\(n\\) be a positive integer. A pair of \\(n\\)-tuples ( \\(a_{1}, \\ldots, a_{n}\\) ) and ( \\(b_{1}, \\ldots, b_{n}\\) ) with integer entries is called an exquisite pair if\n\\[\n\\left|a_{1} b_{1}+\\cdots+a_{n} b_{n}\\right| \\leq 1\n\\]\n\nDetermine the maximum number of distinct \\(n\\)-tuples with integer entries such that any two of them form an exquisite pair.\n\nAnswer: The maximum is \\(n^{2}+n+1\\).", "solution": "Solution. First, we construct an example with \\(n^{2}+n+1 n\\)-tuples, each two of them forming an exquisite pair. In the following list, \\(*\\) represents any number of zeros as long as the total number of entries is \\(n\\).\n- \\((*)\\)\n- \\((*, 1, *)\\)\n- \\((*,-1, *)\\)\n- \\((*, 1, *, 1, *)\\)\n- \\((*, 1, *,-1, *)\\)\n\nFor example, for \\(n=2\\) we have the tuples \\((0,0),(0,1),(1,0),(0,-1),(-1,0),(1,1),(1,-1)\\).\nThe total number of such tuples is \\(1+n+n+\\binom{n}{2}+\\binom{n}{2}=n^{2}+n+1\\). For any two of them, at most two of the products \\(a_{i} b_{i}\\) are non-zero. The only case in which two of them are non-zero is when we take a sequence ( \\(*, 1, *, 1, *\\) ) and a sequence ( \\(*, 1, *,-1, *\\) ) with zero entries in the same places. But in this case one \\(a_{i} b_{i}\\) is 1 and the other -1 . This shows that any two of these sequences form an exquisite pair.\n\nNext, we claim that among any \\(n^{2}+n+2\\) tuples, some two of them do not form an exquisite pair. We begin with lemma.\n\nLemma. Given \\(2 n+1\\) distinct non-zero \\(n\\)-tuples of real numbers, some two of them \\(\\left(a_{1}, \\ldots, a_{n}\\right)\\) and \\(\\left(b_{1}, \\ldots, b_{n}\\right)\\) satisfy \\(a_{1} b_{1}+\\cdots+a_{n} b_{n}>0\\).\n\nProof of Lemma. We proceed by induction. The statement is easy for \\(n=1\\) since for every three non-zero numbers there are two of them with the same sign. Assume that the statement is true for \\(n-1\\) and consider \\(2 n+1\\) tuples with \\(n\\) entries. Since we are working with tuples of real numbers, we claim that we may assume that one of the tuples is \\(a=(0,0, \\ldots, 0,-1)\\). Let us postpone the proof of this claim for the moment.\n\nIf one of the remaining tuples \\(b\\) has a negative last entry, then \\(a\\) and \\(b\\) satisfy the desired condition. So we may assume all the remaining tuples has a non-negative last entry. Now, from each tuple remove the last number. If two \\(n\\)-tuples \\(b\\) and \\(c\\) yield the same ( \\(n-1\\) )-tuple, then\n\\[\nb_{1} c_{1}+\\cdots+b_{n-1} c_{n-1}+b_{n} c_{n}=b_{1}^{2}+\\cdots+b_{n-1}^{2}+b_{n} c_{n}>0\n\\]\nand we are done. The remaining case is that all the \\(n\\)-tuples yield distinct ( \\(n-1\\) )-tuples. Then at most one of them is the zero ( \\(n-1\\) )-tuple, and thus we can use the inductive hypothesis on \\(2 n-1\\) of them. So we find \\(b\\) and \\(c\\) for which\n\\[\n\\left(b_{1} c_{1}+\\cdots+b_{n-1} c_{n-1}\\right)+b_{n} c_{n}>0+b_{n} c_{n}>0 .\n\\]\n\nThe only thing that we are left to prove is that in the inductive step we may assume that one of the tuples is \\(a=(0,0, \\ldots, 0,-1)\\). Fix one of the tuples \\(x=\\left(x_{1}, \\ldots, x_{n}\\right)\\). Set a real number \\(\\varphi\\) for which \\(\\tan \\varphi=\\frac{x_{1}}{x_{2}}\\). Change each tuple \\(a=\\left(a_{1}, a_{2}, \\ldots, a_{n}\\right)\\) (including \\(x\\) ), to the tuple\n\\[\n\\left(a_{1} \\cos \\varphi-a_{2} \\sin \\varphi, a_{1} \\sin \\varphi+a_{2} \\cos \\varphi, a_{3}, a_{4}, \\ldots, a_{n}\\right) .\n\\]\n\nA straightforward calculation shows that the first coordinate of the tuple \\(x\\) becomes 0 , and that all the expressions of the form \\(a_{1} b_{1}+\\cdots+a_{n} b_{n}\\) are preserved. We may iterate this process until all the entries of \\(x\\) except for the last one are equal to 0 . We finish by multiplying all the entries in all the tuples by a suitable constant that makes the last entry of \\(x\\) equal to -1 . This preserves the sign of all the expressions of the form \\(a_{1} b_{1}+\\cdots+a_{n} b_{n}\\).\n\nWe proceed to the proof of our claim. Let \\(A\\) be a set of non-zero tuples among which any two form an exquisite pair. It suffices to prove that \\(|A| \\leq n^{2}+n\\). We can write \\(A\\) as a disjoint union of subsets \\(A_{1} \\cup A_{2} \\cup \\ldots \\cup A_{n}\\), where \\(A_{i}\\) is the set of tuples in \\(A\\) whose last non-zero entry appears in the \\(i\\) th position. We will show that \\(\\left|A_{i}\\right| \\leq 2 i\\), which will finish our proof since \\(2+4+\\cdots+2 n=n^{2}+n\\).\n\nProceeding by contradiction, suppose that \\(\\left|A_{i}\\right| \\geq 2 i+1\\). If \\(A_{i}\\) has three or more tuples whose only non-zero entry is in the \\(i\\) th position, then for two of them this entry has the same sign. Since the tuples are different and their entries are integers, this yields two tuples for which \\(\\left|\\sum a_{i} b_{i}\\right| \\geq 2\\), a contradiction. So there are at most two such tuples. We remove them from \\(A_{i}\\).\n\nNow, for each of the remaining tuples \\(a\\), if it has a positive \\(i\\) th coordinate, we keep \\(a\\) as it is. If it has a negative \\(i\\) th coordinate, we replace it with the opposite tuple \\(-a\\) with entries with opposite signs. This does not changes the exquisite pairs condition.\n\nAfter making the necessary changes, we have two cases. The first case is that there are two tuples \\(a\\) and \\(b\\) that have the same first \\(i-1\\) coordinates and thus\n\\[\na_{1} b_{1}+\\cdots+a_{i-1} b_{i-1}=a_{1}^{2}+\\cdots+a_{i-1}^{2}>0\n\\]\nand thus is at least 1 (the entries are integers). The second case is that no two tuples have the same first \\(i-1\\) coordinates, but then by the Lemma we find two tuples \\(a\\) and \\(b\\) for which\n\\[\na_{1} b_{1}+\\cdots+a_{i-1} b_{i-1} \\geq 1\n\\]\n\nIn any case, we obtain\n\\[\na_{1} b_{1}+\\cdots+a_{i-1} b_{i-1}+a_{i} b_{i} \\geq 2 .\n\\]\n\nThis yields a final contradiction to the exquisite pair hypothesis.", "source_pdf": "apmo_2017.pdf", "notes": ""}
{"id": "APMO-2021-1", "contest": "APMO", "year": "2021", "problem_number": "1", "problem": "Prove that for each real number \\(r>2\\), there are exactly two or three positive real numbers \\(x\\) satisfying the equation \\(x^{2}=r\\lfloor x\\rfloor\\).\nNote: \\(\\lfloor x\\rfloor\\) denotes the largest integer less than or equal to \\(x\\)", "solution": "Solution Let \\(r>2\\) be a real number. Let \\(x\\) be a positive real number such that \\(x^{2}=r\\lfloor x\\rfloor\\) with \\(\\lfloor x\\rfloor=k\\). Since \\(x>0\\) and \\(x^{2}=r k\\), we also have \\(k>0\\). From \\(k \\leq x<k+1\\), we get \\(k^{2} \\leq x^{2}=r k< k^{2}+2 k+1 \\leq k^{2}+3 k\\), hence \\(k \\leq r<k+3\\), or \\(r-3<k \\leq r\\). There are at most three positive integers in the interval \\((r-3, r]\\). Thus there are at most three possible values for \\(k\\). Consequently, there are at most three positive solutions to the given equation.\n\nNow suppose that \\(k\\) is a positive integer in the interval \\([r-2, r]\\). There are at least two such positive integer. Observe that \\(k \\leq \\sqrt{r k} \\leq \\sqrt{(k+2) k}<k+1\\) and so \\(r k=r\\lfloor\\sqrt{r k}\\rfloor\\). We conclude that the equation \\(x^{2}=r\\lfloor x\\rfloor\\) has at least two positive solutions, namely \\(x=\\sqrt{r k}\\) with \\(k \\in[r-2, r]\\).", "source_pdf": "apmo_2021.pdf", "notes": ""}
{"id": "APMO-2021-2", "contest": "APMO", "year": "2021", "problem_number": "2", "problem": "For a polynomial \\(P\\) and a positive integer \\(n\\), define \\(P_{n}\\) as the number of positive integer pairs ( \\(a, b\\) ) such that \\(a<b \\leq n\\) and \\(|P(a)|-|P(b)|\\) is divisible by \\(n\\).\nDetermine all polynomial \\(P\\) with integer coefficients such that for all positive integers \\(n, P_{n} \\leq 2021\\).", "solution": "Solution There are two possible families of solutions:\n- \\(P(x)=x+d\\), for some integer \\(d \\geq-2022\\).\n- \\(P(x)=-x+d\\), for some integer \\(d \\leq 2022\\).\n\nSuppose \\(P\\) satisfies the problem conditions. Clearly \\(P\\) cannot be a constant polynomial. Notice that a polynomial \\(P\\) satifies the conditions if and only if \\(-P\\) also satisfies them. Hence, we may assume the leading coefficient of \\(P\\) is positive. Then, there exists positive integer \\(M\\) such that \\(P(x)>0\\) for \\(x \\geq M\\).\n\nLemma 1. For any positive integer \\(n\\), the integers \\(P(1), P(2), \\ldots, P(n)\\) leave pairwise distinct remainders upon division by \\(n\\).\n\nProof. Assume for contradiction that this is not the case. Then, for some \\(1 \\leq y<z \\leq n\\), there exists \\(0 \\leq r \\leq n-1\\) such that \\(P(y) \\equiv P(z) \\equiv r(\\bmod n)\\). Since \\(P(a n+b) \\equiv P(b)(\\bmod n)\\) for all \\(a, b\\) integers, we have \\(P(a n+y) \\equiv P(a n+z) \\equiv r(\\bmod n)\\) for any integer \\(a\\). Let \\(A\\) be a positive integer such that \\(A n \\geq M\\), and let \\(k\\) be a positive integer such that \\(k>2 A+2021\\). Each of the \\(2(k-A)\\) integers \\(P(A n+y), P(A n+z), P((A+1) n+y), P((A+1) n+z), \\ldots, P((k-1) n+y), P((k-1) n+z)\\) leaves one of the \\(k\\) remainders\n\\[\nr, n+r, 2 n+r, \\ldots,(k-1) n+r\n\\]\nupon division by \\(k n\\). This implies that at least \\(2(k-A)-k=k-2 A\\) (possibly overlapping) pairs leave the same remainder upon division by \\(k n\\). Since \\(k-2 A>2021\\) and all of the \\(2(k-A)\\) integers are positive, we find more than 2021 pairs \\(a, b\\) with \\(a<b \\leq k n\\) for which \\(|P(b)|-|P(a)|\\) is divisible by \\(k n-\\) hence, \\(P_{k n}>2021\\), a contradiction.\n\nNext, we show that \\(P\\) is linear. Assume that this is not the case, i.e., \\(\\operatorname{deg} P \\geq 2\\). Then we can find a positive integer \\(k\\) such that \\(P(k)-P(1) \\geq k\\). This means that among the integers \\(P(1), P(2), \\ldots, P(P(k)-P(1))\\), two of them, namely \\(P(k)\\) and \\(P(1)\\), leave the same remainder upon division by \\(P(k)-P(1)\\) - contradicting the lemma (by taking \\(n=P(k)-P(1)\\) ). Hence, \\(P\\) must be linear.\nWe can now write \\(P(x)=c x+d\\) with \\(c>0\\). We prove that \\(c=1\\) by two ways.\nSolution 1 If \\(c \\geq 2\\), then \\(P(1)\\) and \\(P(2)\\) leave the same remainder upon division by \\(c\\), contradicting the Lemma. Hence \\(c=1\\).\n\nSolution 2 Suppose \\(c \\geq 2\\). Let \\(n\\) be a positive integer such that \\(n>2 c M, n\\left(1-\\frac{3}{2 c}\\right)>2022\\) and \\(2 c \\mid n\\). Notice that for any positive integers \\(i\\) such that \\(\\frac{3 n}{2 c}+i<n, P\\left(\\frac{3 n}{2 c}+i\\right)-P\\left(\\frac{n}{2 c}+i\\right)=n\\). Hence, \\(\\left(\\frac{n}{2 c}+i, \\frac{3 n}{2 c}+i\\right)\\) satifies the condition in the question for all positive integers \\(i\\) such that \\(\\frac{3 n}{2 c}+i<n\\). Hence, \\(P_{n}>2021\\), a contradiction. Then, \\(c=1\\).\n\nIf \\(d \\leq-2023\\), then there are at least 2022 pairs \\(a<b\\) such that \\(P(a)=P(b)\\), namely \\((a, b)= (1,-2 d-1),(2,-2 d-2), \\ldots,(-d-1,-d+1)\\). This implies that \\(d \\geq-2022\\).\nFinally, we verify that \\(P(x)=x+d\\) satisfies the condition for any \\(d \\geq-2022\\). Fix a positive integer \\(n\\). Note that \\(||P(b)|-|P(a)||<n\\) for all positive integers \\(a<b \\leq n\\), so the only pairs \\(a, b\\) for which \\(|P(b)|-|P(a)|\\) could be divisible by \\(n\\) are those for which \\(|P(a)|=|P(b)|\\). When \\(d \\geq-2022\\), there are indeed at most 2021 such pairs.", "source_pdf": "apmo_2021.pdf", "notes": ""}
{"id": "APMO-2021-3", "contest": "APMO", "year": "2021", "problem_number": "3", "problem": "Let \\(A B C D\\) be a cyclic convex quadrilateral and \\(\\Gamma\\) be its circumcircle. Let \\(E\\) be the intersection of the diagonals \\(A C\\) and \\(B D\\), let \\(L\\) be the center of the circle tangent to sides \\(A B, B C\\), and \\(C D\\), and let \\(M\\) be the midpoint of the \\(\\operatorname{arc} B C\\) of \\(\\Gamma\\) not containing \\(A\\) and \\(D\\). Prove that the excenter of triangle \\(B C E\\) opposite \\(E\\) lies on the line \\(L M\\).", "solution": "\\section*{Solution 1}\n\nLet \\(L\\) be the intersection of the bisectors of \\(\\angle A B C\\) and \\(\\angle B C D\\). Let \\(N\\) be the \\(E\\)-excenter of \\(\\triangle B C E\\). Let \\(\\angle B A C=\\angle B D C=\\alpha, \\angle D B C=\\beta\\) and \\(\\angle A C B=\\gamma\\).\nWe have the following:\n\\[\n\\begin{array}{r}\n\\angle C B L=\\frac{1}{2} \\angle A B C=90^{\\circ}-\\frac{1}{2} \\alpha-\\frac{1}{2} \\gamma \\text { and } \\angle B C L=90^{\\circ}-\\frac{1}{2} \\alpha-\\frac{1}{2} \\beta, \\\\\n\\angle C B N=90^{\\circ}-\\frac{1}{2} \\beta \\text { and } \\angle B C N=90^{\\circ}-\\frac{1}{2} \\gamma, \\\\\n\\angle M B L=\\angle M B C+\\angle C B L=90^{\\circ}-\\frac{1}{2} \\gamma \\text { and } \\angle M C L=90^{\\circ}-\\frac{1}{2} \\beta, \\\\\n\\angle L C N=\\angle L B N=180^{\\circ}-\\frac{1}{2}(\\alpha+\\beta+\\gamma) .\n\\end{array}\n\\]\n\nApplying the sine rule to \\(\\triangle M B L\\) and \\(\\triangle M C L\\) we obtain\n\\[\n\\frac{M B}{M L}=\\frac{M C}{M L}=\\frac{\\sin \\angle B L M}{\\sin \\angle M B L}=\\frac{\\sin \\angle C L M}{\\sin \\angle M C L}\n\\]\n\nIt follows that\n\\[\n\\frac{\\sin \\angle B L M}{\\sin \\angle C L M}=\\frac{\\sin \\angle M B L}{\\sin \\angle M C L}=\\frac{\\cos (\\gamma / 2)}{\\cos (\\beta / 2)}\n\\]\n\nNow\n\\[\n\\frac{\\sin \\angle B L M}{\\sin \\angle M L C} \\cdot \\frac{\\sin \\angle L C N}{\\sin \\angle N C B} \\cdot \\frac{\\sin \\angle N B C}{\\sin \\angle N B L}=\\frac{\\cos (\\gamma / 2)}{\\cos (\\beta / 2)} \\cdot \\frac{\\sin \\left(90^{\\circ}-\\frac{1}{2} \\beta\\right)}{\\sin \\left(90^{\\circ}-\\frac{1}{2} \\gamma\\right)}=1 .\n\\]\n\nHence \\(L M, B N, C N\\) are concurrent and therefore \\(L, M, N\\) are collinear.\n\n\\section*{Alternative proof}\n\nWe proceed similarly as above until the equation (1).\nWe use the following lemma.\nLemma: If \\(\\pi>\\alpha, \\beta, \\gamma, \\delta>0, \\alpha+\\beta=\\gamma+\\delta<\\pi\\), and \\(\\frac{\\sin \\alpha}{\\sin \\beta}=\\frac{\\sin \\gamma}{\\sin \\delta}\\), then \\(\\alpha=\\gamma\\) and \\(\\beta=\\delta\\).\nProof of Lemma: Let \\(\\theta=\\alpha+\\beta=\\gamma+\\delta\\). Then \\(\\frac{\\sin (\\theta-\\beta)}{\\sin \\beta}=\\frac{\\sin (\\theta-\\delta)}{\\sin \\delta}\\).\n\\[\n\\begin{gathered}\n\\Longleftrightarrow \\sin (\\theta-\\beta) \\sin \\delta=\\sin (\\theta-\\delta) \\sin \\beta \\\\\n\\Longleftrightarrow(\\sin \\theta \\cos \\beta-\\sin \\beta \\cos \\theta) \\sin \\delta=(\\sin \\theta \\cos \\delta-\\sin \\delta \\cos \\theta) \\sin \\beta \\\\\n\\Longleftrightarrow \\sin \\theta \\cos \\beta \\sin \\delta=\\sin \\theta \\cos \\delta \\sin \\beta \\\\\n\\Longleftrightarrow \\sin \\theta \\sin (\\beta-\\delta)=0\n\\end{gathered}\n\\]\n\nSince \\(0<\\theta<\\pi\\), then \\(\\sin \\theta \\neq 0\\). Therefore, \\(\\sin (\\beta-\\delta)=0\\), and we must have \\(\\beta=\\delta\\).\nApplying the sine rule to \\(\\triangle N B L\\) and \\(\\triangle N C L\\) we obtain\n\\[\n\\begin{aligned}\n& \\frac{N B}{N L}=\\frac{\\sin \\angle B L N}{\\sin \\angle L B N}, \\\\\n& \\frac{N C}{N L}=\\frac{\\sin \\angle C L N}{\\sin \\angle L C N} .\n\\end{aligned}\n\\]\n\nSince \\(\\angle L B N=\\angle L C N\\), it follows that\n\\[\n\\frac{\\sin \\angle B L N}{\\sin \\angle C L N}=\\frac{N B}{N C}=\\frac{\\sin \\angle B C N}{\\sin \\angle C B N}=\\frac{\\cos (\\gamma / 2)}{\\cos (\\beta / 2)}=\\frac{\\sin \\angle B L M}{\\sin \\angle C L M} .\n\\]\n\nBy the lemma, it is concluded that \\(\\angle B L M=\\angle B L N\\) and \\(\\angle C L M=\\angle C L N\\). Therefore, \\(L, M, N\\) are collinear.\n\n\\section*{Solution 2}\n\nDenote by \\(N\\) the excenter of triangle \\(B C E\\) opposite \\(E\\). Since \\(B L\\) bisects \\(\\angle A B C\\), we have \\(\\angle C B L= \\frac{\\angle A B C}{2}\\). Since \\(M\\) is the midpoint of \\(\\operatorname{arc} B C\\), we have \\(\\angle M B C=\\frac{1}{2}(\\angle M B C+\\angle M C B)\\) It follows by angle chasing that\n\\[\n\\begin{aligned}\n\\angle M B L & =\\angle M B C+\\angle C B L=\\frac{1}{2}(\\angle M B C+\\angle M C B+\\angle A B C) \\\\\n& =\\frac{1}{2}(\\angle M B A+\\angle M C B)=90^{\\circ}-\\frac{\\angle B C E}{2}=\\angle B C N .\n\\end{aligned}\n\\]\n\nDenote by \\(X\\) and \\(Y\\) the second intersections of lines \\(B M\\) and \\(C M\\) with the circumcircle of \\(B C L\\), respectively. Since \\(\\angle M B C=\\angle M C B\\), we have \\(B C \\| X Y\\). It suffices to show that \\(B N \\| X L\\) and \\(C N \\| Y L\\). Indeed, from this it follows that \\(\\triangle B C N \\sim \\triangle X Y L\\), and therefore a homothety with center \\(M\\) that maps \\(B\\) to \\(X\\) and \\(C\\) to \\(Y\\) also maps \\(N\\) to \\(L\\), implying that \\(N\\) lies on the line \\(L M\\).\nBy symmetry, it suffices to show that \\(C N \\| Y L\\), which is equivalent to showing that \\(\\angle B C N=\\angle X Y L\\). But we have \\(\\angle B C N=\\angle M B L=\\angle X B L=\\angle X Y L\\), completing the proof.", "source_pdf": "apmo_2021.pdf", "notes": ""}
{"id": "APMO-2021-4", "contest": "APMO", "year": "2021", "problem_number": "4", "problem": "Given a \\(32 \\times 32\\) table, we put a mouse (facing up) at the bottom left cell and a piece of cheese at several other cells. The mouse then starts moving. It moves forward except that when it reaches a piece of cheese, it eats a part of it, turns right, and continues moving forward. We say that a subset of cells containing cheese is good if, during this process, the mouse tastes each piece of cheese exactly once and then falls off the table. Show that:\n(a) No good subset consists of 888 cells.\n(b) There exists a good subset consisting of at least 666 cells.", "solution": "\\section*{Solution.}\n(a) For the sake of contradiction, assume a good subset consisting of 888 cells exists. We call those cheese-cells and the other ones gap-cells. Observe that since each cheese-cell is visited once, each gap-cell is visited at most twice (once vertically and once horizontally). Define a finite sequence \\(s\\) whose \\(i\\)-th element is \\(C\\) if the \\(i\\)-th step of the mouse was onto a cheese-cell, and \\(G\\) if it was onto a gap-cell. By assumption, \\(s\\) contains \\(888 C\\) 's. Note that \\(s\\) does not contain a contiguous block of 4 (or more) \\(C\\) 's. Hence \\(s\\) contains at least \\(888 / 3=296\\) such \\(C\\)-blocks and thus at least \\(295 G\\) 's. But since each gap-cell is traversed at most twice, this implies there are at least \\(\\lceil 295 / 2\\rceil=148\\) gap-cells, for a total of \\(888+148=1036>32^{2}\\) cells, a contradiction.\n(b) Let \\(L_{i}, X_{i}\\) be two \\(2^{i} \\times 2^{i}\\) tiles that allow the mouse to \"turn left\" and \"cross\", respectively. In detail, the \"turn left\" tiles allow the mouse to enter at its bottom left cell facing up and to leave at its bottom left cell facing left. The \"cross\" tiles allow the mouse to enter at its top right facing down and leave at its bottom left facing left, while also to enter at its bottom left facing up and leave at its top right facing right.\n(a) Basic tiles\n(b) Inductive construction\n(c) \\(16 \\times 16\\)\n![](https://cdn.mathpix.com/cropped/2025_08_23_a9a5617aa8dc98dad087g-4.jpg?height=394&width=1649&top_left_y=1067&top_left_x=243)\n\nNote that given two \\(2^{i} \\times 2^{i}\\) tiles \\(L_{i}, X_{i}\\) we can construct larger \\(2^{i+1} \\times 2^{i+1}\\) tiles \\(L_{i+1}, X_{i+1}\\) inductively as shown on in (b). The construction works because the path intersects itself (or the other path) only inside the smaller \\(X\\)-tiles where it works by induction.\nFor a tile \\(T\\), let \\(|T|\\) be the number of pieces of cheese in it. By straightforward induction, \\(\\left|L_{i}\\right|=\\left|X_{i}\\right|+1\\) and \\(\\left|L_{i+1}\\right|=4 \\cdot\\left|L_{i}\\right|-1\\). From the initial condition \\(\\left|L_{1}\\right|=3\\). We now easily compute \\(\\left|L_{2}\\right|=11,\\left|L_{3}\\right|=43,\\left|L_{4}\\right|=171\\), and \\(\\left|L_{5}\\right|=683\\). Hence we get the desired subset.\n\n\\section*{Another proof of (a).}\n\nLet \\(X_{N}\\) be the largest possible density of cheese-cells in a good subset on an \\(N \\times N\\) table. We will show that \\(X_{N} \\leq 4 / 5+o(1)\\). Specifically, this gives \\(X_{32} \\leq 817 / 1024\\). We look at the (discrete analogue) of the winding number of the trajectory of the mouse. Since the mouse enters and leaves the table, for every 4 right turns in its trajectory there has to be a self-crossing. But each self-crossing requires a different empty square, hence \\(X_{N} \\leq 4 / 5\\).", "source_pdf": "apmo_2021.pdf", "notes": ""}
{"id": "APMO-2021-5", "contest": "APMO", "year": "2021", "problem_number": "5", "problem": "Determine all functions \\(f: \\mathbb{Z} \\rightarrow \\mathbb{Z}\\) such that \\(f(f(a)-b)+b f(2 a)\\) is a perfect square for all integers \\(a\\) and \\(b\\).", "solution": "Solution 1.\nThere are two families of functions which satisfy the condition:\n(1) \\(f(n)= \\begin{cases}0 & \\text { if } n \\text { is even, and } \\\\ \\text { any perfect square } & \\text { if } n \\text { is odd }\\end{cases}\\)\n(2) \\(f(n)=n^{2}\\), for every integer \\(n\\).\n\nIt is straightforward to verify that the two families of functions are indeed solutions. Now, suppose that f is any function which satisfies the condition that \\(f(f(a)-b)+b f(2 a)\\) is a perfect square for every pair ( \\(a, b\\) ) of integers. We denote this condition by (*). We will show that \\(f\\) must belong to either Family (1) or Family (2).\nClaim 1. \\(f(0)=0\\) and \\(f(n)\\) is a perfect square for every integer \\(n\\).\nProof. Plugging \\((a, b) \\rightarrow(0, f(0))\\) in \\((*)\\) shows that \\(f(0)(f(0)+1)=z^{2}\\) for some integer \\(z\\). Thus, \\((2 f(0)+1-2 z)(2 f(0)+1+2 z)=1\\). Therefore, \\(f(0)\\) is either -1 or 0 .\nSuppose, for sake of contradiction, that \\(f(0)=-1\\). For any integer \\(a\\), plugging \\((a, b) \\rightarrow(a, f(a))\\) implies that \\(f(a) f(2 a)-1\\) is a square. Thus, for each \\(a \\in \\mathbb{Z}\\), there exists \\(x \\in \\mathbb{Z}\\) such that \\(f(a) f(2 a)=x^{2}+1\\) This implies that any prime divisor of \\(f(a)\\) is either 2 or is congruent to \\(1(\\bmod 4)\\), and that \\(4 \\nmid f(a)\\), for every \\(a \\in \\mathbb{Z}\\).\nPlugging \\((a, b) \\rightarrow(0,3)\\) in \\((*)\\) shows that \\(f(-4)-3\\) is a square. Thus, there is \\(y \\in \\mathbb{Z}\\) such that \\(f(-4)=y^{2}+3\\). Since \\(4 \\nmid f(-4)\\), we note that \\(f(-4)\\) is a positive integer congruent to \\(3(\\bmod 4)\\), but any prime dividing \\(f(-4)\\) is either 2 or is congruent to \\(1(\\bmod 4)\\). This gives a contradiction. Therefore, \\(f(0)\\) must be 0 .\nFor every integer \\(n\\), plugging \\((a, b) \\rightarrow(0,-n)\\) in \\((*)\\) shows that \\(f(n)\\) is a square.\nReplacing \\(b\\) with \\(f(a)-b\\), we find that for all integers \\(a\\) and \\(b\\),\n\\[\nf(b)+(f(a)-b) f(2 a) \\text { is a square. }\n\\]\n\nNow, let \\(S\\) be the set of all integers \\(n\\) such that \\(f(n)=0\\). We have two cases:\n- Case 1: \\(S\\) is unbounded from above.\n\nWe claim that \\(f(2 n)=0\\) for any integer \\(n\\). Fix some integer \\(n\\), and let \\(k \\in S\\) with \\(k>f(n)\\). Then, plugging \\((a, b) \\mapsto(n, k)\\) in \\((* *)\\) gives us that \\(f(k)+(f(n)-k) f(2 n)=(f(n)-k) f(2 n)\\) is a square. But \\(f(n)-k<0\\) and \\(f(2 n)\\) is a square by Claim 1 . This is possible only if \\(f(2 n)=0\\). In summary, \\(f(n)=0\\) whenever \\(n\\) is even and Claim 1 shows that \\(f(n)\\) is a square whenever \\(n\\) is odd.\n- Case 2: \\(S\\) is bounded from above.\n\nLet \\(T\\) be the set of all integers \\(n\\) such that \\(f(n)=n^{2}\\). We show that \\(T\\) is unbounded from above. In fact, we show that \\(\\frac{p+1}{2} \\in T\\) for all primes \\(p\\) big enough.\nFix a prime number \\(p\\) big enough, and let \\(n=\\frac{p+1}{2}\\). Plugging \\((a, b) \\mapsto(n, 2 n)\\) in (**) shows us that \\(f(2 n)(f(n)-2 n+1)\\) is a square for any integer \\(n\\). For \\(p\\) big enough, we have \\(2 n \\notin S\\), so \\(f(2 n)\\) is a non-zero square. As a result, when \\(p\\) is big enough, \\(f(n)\\) and \\(f(n)-2 n+1=f(n)-p\\) are both squares. Writing \\(f(n)=k^{2}\\) and \\(f(n)-p=m^{2}\\) for some \\(k, m \\geq 0\\), we have\n\\[\n(k+m)(k-m)=k^{2}-m^{2}=p \\Longrightarrow k+m=p, k-m=1 \\Longrightarrow k=n, m=n-1 .\n\\]\n\nThus, \\(f(n)=k^{2}=n^{2}\\), giving us \\(n=\\frac{p+1}{2} \\in T\\).\nNext, for all \\(k \\in T\\) and \\(n \\in \\mathbb{Z}\\), plugging \\((a, b) \\mapsto(n, k)\\) in (**) shows us that \\(k^{2}+(f(n)-k) f(2 n)\\) is a square. But that means \\((2 k-f(2 n))^{2}-\\left(f(2 n)^{2}-4 f(n) f(2 n)\\right)=4\\left(k^{2}+(f(n)-k) f(2 n)\\right)\\) is also a square. When \\(k\\) is large enough, we have \\(\\left|f(2 n)^{2}-4 f(n) f(2 n)\\right|+1<|2 k-f(2 n)|\\). As a result, we must have \\(f(2 n)^{2}=4 f(n) f(2 n)\\) and thus \\(f(2 n) \\in\\{0,4 f(n)\\}\\) for all integers \\(n\\).\nFinally, we prove that \\(f(n)=n^{2}\\) for all integers \\(n\\). Fix \\(n\\), and take \\(k \\in T\\) big enough such that \\(2 k \\notin S\\). Then, we have \\(f(k)=k^{2}\\) and \\(f(2 k)=4 f(k)=4 k^{2}\\). Plugging \\((a, b) \\mapsto(k, n)\\) to (**) shows us that \\(f(n)+\\left(k^{2}-n\\right) 4 k^{2}=\\left(2 k^{2}-n\\right)^{2}+\\left(f(n)-n^{2}\\right)\\) is a square. Since \\(T\\) is unbounded from above, we can take \\(k \\in T\\) such that \\(2 k \\notin S\\) and also \\(\\left|2 k^{2}-n\\right|>\\left|f(n)-n^{2}\\right|\\). This forces \\(f(n)=n^{2}\\), giving us the second family of solution.\n\n\\section*{Another approach of Case 1.}\n\nClaim 2. One of the following is true.\n(i) For every integer \\(n, f(2 n)=0\\).\n(ii) There exists an integer \\(K>0\\) such that for every integer \\(n \\geq K, f(n)>0\\).\n\nProof. Suppose that there exists an integer \\(\\alpha \\neq 0\\) such that \\(f(2 \\alpha)>0\\). We claim that for every integer \\(n \\geq f(\\alpha)+1\\), we have \\(f(n)>0\\).\nFor every \\(n \\geq f(\\alpha)+1\\), plugging \\((a, b) \\rightarrow(\\alpha, f(\\alpha)-n)\\) in \\(\\left(^{*}\\right)\\) shows that \\(f(n)+(f(\\alpha)-n) f(2 \\alpha)\\) is a square, and in particular, is non-negative. Hence, \\(f(n) \\geq(n-f(\\alpha)) f(2 \\alpha)>0\\), as desired.\nIf \\(f\\) belongs to Case (i), Claim 1 shows that \\(f\\) belongs to Family (1).\nIf \\(f\\) belongs to Case (ii), then \\(S\\) is bounded from above. From Case 2 we get \\(f(n)=n^{2}\\).", "source_pdf": "apmo_2021.pdf", "notes": ""}
{"id": "APMO-2023-1", "contest": "APMO", "year": "2023", "problem_number": "1", "problem": "Let \\(n \\geq 5\\) be an integer. Consider \\(n\\) squares with side lengths \\(1,2, \\ldots, n\\), respectively. The squares are arranged in the plane with their sides parallel to the \\(x\\) and \\(y\\) axes. Suppose that no two squares touch, except possibly at their vertices.\nShow that it is possible to arrange these squares in a way such that every square touches exactly two other squares.", "solution": "\\section*{Solution 1}\n\nSet aside the squares with sidelengths \\(n-3, n-2, n-1\\), and \\(n\\) and suppose we can split the remaining squares into two sets \\(A\\) and \\(B\\) such that the sum of the sidelengths of the squares in \\(A\\) is 1 or 2 units larger than the sum of the sidelengths of the squares in \\(B\\).\nString the squares of each set \\(A, B\\) along two parallel diagonals, one for each diagonal. Now use the four largest squares along two perpendicular diagonals to finish the construction: one will have sidelengths \\(n\\) and \\(n-3\\), and the other, sidelengths \\(n-1\\) and \\(n-2\\). If the sum of the sidelengths of the squares in \\(A\\) is 1 unit larger than the sum of the sidelengths of the squares in \\(B\\), attach the squares with sidelengths \\(n-3\\) and \\(n-1\\) to the \\(A\\)-diagonal, and the other two squares to the \\(B\\)-diagonal. The resulting configuration, in which the \\(A\\) and \\(B\\)-diagonals are represented by unit squares, and the sidelengths \\(a_{i}\\) of squares from \\(A\\) and \\(b_{j}\\) of squares from \\(B\\) are indicated within each square, follows:\n![](https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-01.jpg?height=586&width=1329&top_left_y=1199&top_left_x=331)\n\nSince \\(\\left(a_{1}+a_{2}+\\cdots+a_{k}\\right) \\sqrt{2}+\\frac{((n-3)+(n-2)) \\sqrt{2}}{2}=\\left(b_{1}+b_{2}+\\cdots+b_{\\ell}+2\\right) \\sqrt{2}+\\frac{(n+(n-1)) \\sqrt{2}}{2}\\), this case is done.\nIf the sum of the sidelengths of the squares in \\(A\\) is 1 unit larger than the sum of the sidelengths of the squares in \\(B\\), attach the squares with sidelengths \\(n-3\\) and \\(n-2\\) to the \\(A\\)-diagonal, and the other two squares to the \\(B\\)-diagonal. The resulting configuration follows:\n![](https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-01.jpg?height=615&width=1329&top_left_y=2095&top_left_x=331)\n\nSince \\(\\left(a_{1}+a_{2}+\\cdots+a_{k}\\right) \\sqrt{2}+\\frac{((n-3)+(n-1)) \\sqrt{2}}{2}=\\left(b_{1}+b_{2}+\\cdots+b_{\\ell}+1\\right) \\sqrt{2}+\\frac{(n+(n-2)) \\sqrt{2}}{2}\\), this case is also done.\nIn both cases, the distance between the \\(A\\)-diagonal and the \\(B\\)-diagonal is \\(\\frac{((n-3)+n) \\sqrt{2}}{2}=\\frac{(2 n-3) \\sqrt{2}}{2}\\).\nSince \\(a_{i}, b_{j} \\leq n-4, \\frac{\\left(a_{i}+b_{j}\\right) \\sqrt{2}}{2}<\\frac{(2 n-4) \\sqrt{2}}{2}<\\frac{(2 n-3) \\sqrt{2}}{2}\\), and therefore the \\(A\\) - and \\(B\\)-diagonals do not overlap.\nFinally, we prove that it is possible to split the squares of sidelengths 1 to \\(n-4\\) into two sets \\(A\\) and \\(B\\) such that the sum of the sidelengths of the squares in \\(A\\) is 1 or 2 units larger than the sum of the sidelengths of the squares in \\(B\\). One can do that in several ways; we present two possibilities:\n- Direct construction: Split the numbers from 1 to \\(n-4\\) into several sets of four consecutive numbers \\(\\{t, t+1, t+2, t+3\\}\\), beginning with the largest numbers; put squares of sidelengths \\(t\\) and \\(t+3\\) in \\(A\\) and squares of sidelengths \\(t+1\\) and \\(t+2\\) in \\(B\\). Notice that \\(t+(t+3)= (t+1)+(t+2)\\). In the end, at most four numbers remain.\n- If only 1 remains, put the corresponding square in \\(A\\), so the sum of the sidelengths of the squares in \\(A\\) is one unit larger that those in \\(B\\);\n- If 1 and 2 remains, put the square of sidelength 2 in \\(A\\) and the square of sidelength 1 in \\(B\\) (the difference is 1 );\n- If 1,2, and 3 remains, put the squares of sidelengths 1 and 3 in \\(A\\), and the square of sidelength 2 in \\(B\\) (the difference is 2 );\n- If 1,2,3, and 4 remains, put the squares of sidelengths 2 and 4 in \\(A\\), and the squares of sidelengths 1 and 3 in \\(B\\) (the difference is 2 ).\n- Indirect construction: Starting with \\(A\\) and \\(B\\) as empty sets, add the squares of sidelengths \\(n-4, n-3, \\ldots, 2\\) to either \\(A\\) or \\(B\\) in that order such that at each stage the difference between the sum of the sidelengths in \\(A\\) and the sum of the sidelengths of B is minimized. By induction it is clear that after adding an integer \\(j\\) to one of the sets, this difference is at most \\(j\\). In particular, the difference is 0,1 or 2 at the end. Finally adding the final 1 to one of the sets can ensure that the final difference is 1 or 2 . If necessary, flip \\(A\\) and \\(B\\).\n\n\\section*{Solution 2}\n\nSolve the problem by induction in \\(n\\). Construct examples for \\(n=5,6,7,8,9,10\\) (one can use the constructions from the previous solution, for instance). For \\(n>10\\), set aside the six larger squares and arrange them in the following fashion:\n![](https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-02.jpg?height=804&width=1029&top_left_y=1955&top_left_x=482)\n\nBy the induction hypothesis, one can arrange the remaining \\(n-6\\) squares away from the six larger squares, so we are done.", "source_pdf": "apmo_2023.pdf", "notes": ""}
{"id": "APMO-2023-2", "contest": "APMO", "year": "2023", "problem_number": "2", "problem": "Find all integers \\(n\\) satisfying \\(n \\geq 2\\) and \\(\\frac{\\sigma(n)}{p(n)-1}=n\\), in which \\(\\sigma(n)\\) denotes the sum of all positive divisors of \\(n\\), and \\(p(n)\\) denotes the largest prime divisor of \\(n\\).\n\nAnswer: \\(n=6\\).", "solution": "\\section*{Solution}\n\nLet \\(n=p_{1}^{\\alpha_{1}} \\cdot \\ldots \\cdot p_{k}^{\\alpha_{k}}\\) be the prime factorization of \\(n\\) with \\(p_{1}<\\ldots<p_{k}\\), so that \\(p(n)=p_{k}\\) and \\(\\sigma(n)=\\left(1+p_{1}+\\cdots+p_{1}^{\\alpha_{1}}\\right) \\ldots\\left(1+p_{k}+\\cdots+p_{k}^{\\alpha_{k}}\\right)\\). Hence\n\\(p_{k}-1=\\frac{\\sigma(n)}{n}=\\prod_{i=1}^{k}\\left(1+\\frac{1}{p_{i}}+\\cdots+\\frac{1}{p_{i}^{\\alpha_{i}}}\\right)<\\prod_{i=1}^{k} \\frac{1}{1-\\frac{1}{p_{i}}}=\\prod_{i=1}^{k}\\left(1+\\frac{1}{p_{i}-1}\\right) \\leq \\prod_{i=1}^{k}\\left(1+\\frac{1}{i}\\right)=k+1\\),\nthat is, \\(p_{k}-1<k+1\\), which is impossible for \\(k \\geq 3\\), because in this case \\(p_{k}-1 \\geq 2 k-2 \\geq k+1\\). Then \\(k \\leq 2\\) and \\(p_{k}<k+2 \\leq 4\\), which implies \\(p_{k} \\leq 3\\).\nIf \\(k=1\\) then \\(n=p^{\\alpha}\\) and \\(\\sigma(n)=1+p+\\cdots+p^{\\alpha}\\), and in this case \\(n \\nmid \\sigma(n)\\), which is not possible. Thus \\(k=2\\), and \\(n=2^{\\alpha} 3^{\\beta}\\) with \\(\\alpha, \\beta>0\\). If \\(\\alpha>1\\) or \\(\\beta>1\\),\n\\[\n\\frac{\\sigma(n)}{n}>\\left(1+\\frac{1}{2}\\right)\\left(1+\\frac{1}{3}\\right)=2 .\n\\]\n\nTherefore \\(\\alpha=\\beta=1\\) and the only answer is \\(n=6\\).\nComment: There are other ways to deal with the case \\(n=2^{\\alpha} 3^{\\beta}\\). For instance, we have \\(2^{\\alpha+2} 3^{\\beta}=\\left(2^{\\alpha+1}-1\\right)\\left(3^{\\beta+1}-1\\right)\\). Since \\(2^{\\alpha+1}-1\\) is not divisible by 2 , and \\(3^{\\beta+1}-1\\) is not divisible by 3 , we have\n\\[\n\\left\\{\\begin{array} { l } \n{ 2 ^ { \\alpha + 1 } - 1 = 3 ^ { \\beta } } \\\\\n{ 3 ^ { \\beta + 1 } - 1 = 2 ^ { \\alpha + 2 } }\n\\end{array} \\Longleftrightarrow \\left\\{\\begin{array} { c } \n{ 2 ^ { \\alpha + 1 } - 1 = 3 ^ { \\beta } } \\\\\n{ 3 \\cdot ( 2 ^ { \\alpha + 1 } - 1 ) - 1 = 2 \\cdot 2 ^ { \\alpha + 1 } }\n\\end{array} \\Longleftrightarrow \\left\\{\\begin{array}{r}\n2^{\\alpha+1}=4 \\\\\n3^{\\beta}=3\n\\end{array},\\right.\\right.\\right.\n\\]\nand \\(n=2^{\\alpha} 3^{\\beta}=6\\).", "source_pdf": "apmo_2023.pdf", "notes": ""}
{"id": "APMO-2023-3", "contest": "APMO", "year": "2023", "problem_number": "3", "problem": "Let \\(A B C D\\) be a parallelogram. Let \\(W, X, Y\\), and \\(Z\\) be points on sides \\(A B, B C, C D\\), and \\(D A\\), respectively, such that the incenters of triangles \\(A W Z, B X W, C Y X\\) and \\(D Z Y\\) form a parallelogram. Prove that \\(W X Y Z\\) is a parallelogram.", "solution": "\\section*{Solution}\n\nLet the four incenters be \\(I_{1}, I_{2}, I_{3}\\), and \\(I_{4}\\) with inradii \\(r_{1}, r_{2}, r_{3}\\), and \\(r_{4}\\) respectively (in the order given in the question). Without loss of generality, let \\(I_{1}\\) be closer to \\(A B\\) than \\(I_{2}\\). Let the acute angle between \\(I_{1} I_{2}\\) and \\(A B\\) (and hence also the angle between \\(I_{3} I_{4}\\) and \\(C D\\) ) be \\(\\theta\\). Then\n\\[\nr_{2}-r_{1}=I_{1} I_{2} \\sin \\theta=I_{3} I_{4} \\sin \\theta=r_{4}-r_{3},\n\\]\nwhich implies \\(r_{1}+r_{4}=r_{2}+r_{3}\\). Similar arguments show that \\(r_{1}+r_{2}=r_{3}+r_{4}\\). Thus we obtain \\(r_{1}=r_{3}\\) and \\(r_{2}=r_{4}\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-05.jpg?height=492&width=784&top_left_y=848&top_left_x=596)\n\nNow let's consider the possible positions of \\(W, X, Y, Z\\). Suppose \\(A Z \\neq C X\\). Without loss of generality assume \\(A Z>C X\\). Since the incircles of \\(A W Z\\) and \\(C Y X\\) are symmetric about the centre of the parallelogram \\(A B C D\\), this implies \\(C Y>A W\\). Using similar arguments, we have\n\\[\nC Y>A W \\Longrightarrow B W>D Y \\Longrightarrow D Z>B X \\Longrightarrow C X>A Z,\n\\]\nwhich is a contradiction. Therefore \\(A Z=C X \\Longrightarrow A W=C Y\\) and \\(W X Y Z\\) is a parallelogram.\nComment: There are several ways to prove that \\(r_{1}=r_{3}\\) and \\(r_{2}=r_{4}\\). The proposer shows the following three alternative approaches:\nUsing parallel lines: Let \\(O\\) be the centre of parallelogram \\(A B C D\\) and \\(P\\) be the centre of parallelogram \\(I_{1} I_{2} I_{3} I_{4}\\). Since \\(A I_{1}\\) and \\(C I_{3}\\) are angle bisectors, we must have \\(A I_{1} \\| C I_{3}\\). Let \\(\\ell_{1}\\) be the line through \\(O\\) parallel to \\(A I_{1}\\). Since \\(A O=O C, \\ell_{1}\\) is halfway between \\(A I_{1}\\) and \\(C I_{3}\\). Hence \\(P\\) must lie on \\(\\ell_{1}\\).\nSimilarly, \\(P\\) must also lie on \\(\\ell_{2}\\), the line through \\(O\\) parallel to \\(B I_{2}\\). Thus \\(P\\) is the intersection of \\(\\ell_{1}\\) and \\(\\ell_{2}\\), which must be \\(O\\). So the four incentres and hence the four incircles must be symmetric about \\(O\\), which implies \\(r_{1}=r_{3}\\) and \\(r_{2}=r_{4}\\).\nUsing a rotation: Let the bisectors of \\(\\angle D A B\\) and \\(\\angle A B C\\) meet at \\(X\\) and the bisectors of \\(\\angle B C D\\) and \\(\\angle C D A\\) meet at \\(Y\\). Then \\(I_{1}\\) is on \\(A X, I_{2}\\) is on \\(B X, I_{3}\\) is on \\(C Y\\), and \\(I_{4}\\) is on \\(D Y\\). Let \\(O\\) be the centre of \\(A B C D\\). Then a 180 degree rotation about \\(O\\) takes \\(\\triangle A X B\\) to \\(\\triangle C Y D\\). Under the same transformation \\(I_{1} I_{2}\\) is mapped to a parallel segment \\(I_{1}^{\\prime} I_{2}^{\\prime}\\) with \\(I_{1}^{\\prime}\\) on \\(C Y\\) and \\(I_{2}^{\\prime}\\) on \\(D Y\\). Since \\(I_{1} I_{2} I_{3} I_{4}\\) is a parallelogram, \\(I_{3} I_{4}=I_{1} I_{2}\\) and \\(I_{3} I_{4} \\| I_{1} I_{2}\\). Hence \\(I_{1}^{\\prime} I_{2}^{\\prime}\\) and \\(I_{3} I_{4}\\) are parallel, equal length segments on sides \\(C Y, D Y\\) and we conclude that \\(I_{1}^{\\prime}=I_{3}, I_{2}^{\\prime}=I_{4}\\). Hence the centre of \\(I_{1} I_{2} I_{3} I_{4}\\) is also \\(O\\) and we establish that by rotational symmetry that \\(r_{1}=r_{3}\\) and \\(r_{2}=r_{4}\\).\nUsing congruent triangles: Let \\(A I_{1}\\) and \\(B I_{2}\\) intersect at \\(E\\) and let \\(C I_{3}\\) and \\(D I_{4}\\) intersect at \\(F\\). Note that \\(\\triangle A B E\\) and \\(\\triangle C D F\\) are congruent, since \\(A B=C D\\) and corresponding pairs of angles are equal (equal opposite angles parallelogram \\(A B C D\\) are each bisected).\n\nSince \\(A I_{1} \\| C I_{3}\\) and \\(I_{1} I_{2} \\| I_{4} I_{3}, \\angle I_{2} I_{1} E=\\angle I_{4} I_{3} F\\). Similarly \\(\\angle I_{1} I_{2} E=\\angle I_{3} I_{4} F\\). Furthermore \\(I_{1} I_{2}=I_{3} I_{4}\\). Hence triangles \\(I_{2} I_{1} E\\) and \\(I 4 I_{3} F\\) are also congruent.\nHence \\(A B E I_{1} I_{2}\\) and \\(D C F I_{3} I_{4}\\) are congruent. Therefore, the perpendicular distance from \\(I_{1}\\) to \\(A B\\) equals the perpendicular distance from \\(I_{3}\\) to \\(C D\\), that is, \\(r_{1}=r_{3}\\). Similarly \\(r_{2}=r_{4}\\).", "source_pdf": "apmo_2023.pdf", "notes": ""}
{"id": "APMO-2023-4", "contest": "APMO", "year": "2023", "problem_number": "4", "problem": "Let \\(c>0\\) be a given positive real and \\(\\mathbb{R}_{>0}\\) be the set of all positive reals. Find all functions \\(f: \\mathbb{R}_{>0} \\rightarrow \\mathbb{R}_{>0}\\) such that\n\\[\nf((c+1) x+f(y))=f(x+2 y)+2 c x \\quad \\text { for all } x, y \\in \\mathbb{R}_{>0} .\n\\]\n\nAnswer: \\(f(x)=2 x\\) for all \\(x>0\\).", "solution": "\\section*{Solution 1}\n\nWe first prove that \\(f(x) \\geq 2 x\\) for all \\(x>0\\). Suppose, for the sake of contradiction, that \\(f(y)<2 y\\) for some positive \\(y\\). Choose \\(x\\) such that \\(f((c+1) x+f(y))\\) and \\(f(x+2 y)\\) cancel out, that is,\n\\[\n(c+1) x+f(y)=x+2 y \\Longleftrightarrow x=\\frac{2 y-f(y)}{c} .\n\\]\n\nNotice that \\(x>0\\) because \\(2 y-f(y)>0\\). Then \\(2 c x=0\\), which is not possible. This contradiction yields \\(f(y) \\geq 2 y\\) for all \\(y>0\\).\nNow suppose, again for the sake of contradiction, that \\(f(y)>2 y\\) for some \\(y>0\\). Define the following sequence: \\(a_{0}\\) is an arbitrary real greater than \\(2 y\\), and \\(f\\left(a_{n}\\right)=f\\left(a_{n-1}\\right)+2 c x\\), so that\n\\[\n\\left\\{\\begin{array}{r}\n(c+1) x+f(y)=a_{n} \\\\\nx+2 y=a_{n-1}\n\\end{array} \\Longleftrightarrow x=a_{n-1}-2 y \\quad \\text { and } \\quad a_{n}=(c+1)\\left(a_{n-1}-2 y\\right)+f(y) .\\right.\n\\]\n\nIf \\(x=a_{n-1}-2 y>0\\) then \\(a_{n}>f(y)>2 y\\), so inductively all the substitutions make sense.\nFor the sake of simplicity, let \\(b_{n}=a_{n}-2 y\\), so \\(b_{n}=(c+1) b_{n-1}+f(y)-2 y \\quad(*)\\). Notice that \\(x=b_{n-1}\\) in the former equation, so \\(f\\left(a_{n}\\right)=f\\left(a_{n-1}\\right)+2 c b_{n-1}\\). Telescoping yields\n\\[\nf\\left(a_{n}\\right)=f\\left(a_{0}\\right)+2 c \\sum_{i=0}^{n-1} b_{i}\n\\]\n\nOne can find \\(b_{n}\\) from the recurrence equation \\((*): b_{n}=\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)(c+1)^{n}-\\frac{f(y)-2 y}{c}\\), and then\n\\[\n\\begin{aligned}\nf\\left(a_{n}\\right) & =f\\left(a_{0}\\right)+2 c \\sum_{i=0}^{n-1}\\left(\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)(c+1)^{i}-\\frac{f(y)-2 y}{c}\\right) \\\\\n& =f\\left(a_{0}\\right)+2\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)\\left((c+1)^{n}-1\\right)-2 n(f(y)-2 y) .\n\\end{aligned}\n\\]\n\nSince \\(f\\left(a_{n}\\right) \\geq 2 a_{n}=2 b_{n}+4 y\\),\n\\[\n\\begin{aligned}\n& f\\left(a_{0}\\right)+2\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)\\left((c+1)^{n}-1\\right)-2 n(f(y)-2 y) \\geq 2 b_{n}+4 y \\\\\n= & 2\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)(c+1)^{n}-2 \\frac{f(y)-2 y}{c},\n\\end{aligned}\n\\]\nwhich implies\n\\[\nf\\left(a_{0}\\right)+2 \\frac{f(y)-2 y}{c} \\geq 2\\left(b_{0}+\\frac{f(y)-2 y}{c}\\right)+2 n(f(y)-2 y),\n\\]\nwhich is not true for sufficiently large \\(n\\).\nA contradiction is reached, and thus \\(f(y)=2 y\\) for all \\(y>0\\). It is immediate that this function satisfies the functional equation.\n\n\\section*{Solution 2}\n\nAfter proving that \\(f(y) \\geq 2 y\\) for all \\(y>0\\), one can define \\(g(x)=f(x)-2 x, g: \\mathbb{R}_{>0} \\rightarrow \\mathbb{R}_{\\geq 0}\\), and our goal is proving that \\(g(x)=0\\) for all \\(x>0\\). The problem is now rewritten as\n\\[\n\\begin{aligned}\n& g((c+1) x+g(y)+2 y)+2((c+1) x+g(y)+2 y)=g(x+2 y)+2(x+2 y)+2 c x \\\\\n\\Longleftrightarrow & g((c+1) x+g(y)+2 y)+2 g(y)=g(x+2 y) .\n\\end{aligned}\n\\]\n\nThis readily implies that \\(g(x+2 y) \\geq 2 g(y)\\), which can be interpreted as \\(z>2 y \\Longrightarrow g(z) \\geq 2 g(y)\\), by plugging \\(z=x+2 y\\).\nNow we prove by induction that \\(z>2 y \\Longrightarrow g(z) \\geq 2 m \\cdot g(y)\\) for any positive integer \\(2 m\\). In fact, since \\((c+1) x+g(y)+2 y>2 y, g((c+1) x+g(y)+2 y) \\geq 2 m \\cdot g(y)\\), and by \\((? ?)\\),\n\\[\ng(x+2 y) \\geq 2 m \\cdot g(y)+2 g(y)=2(m+1) g(y),\n\\]\nand we are done by plugging \\(z=x+2 y\\) again.\nThe problem now is done: if \\(g(y)>0\\) for some \\(y>0\\), choose a fixed \\(z>2 y\\) arbitrarily and and integer \\(m\\) such that \\(m>\\frac{g(z)}{2 g(y)}\\). Then \\(g(z)<2 m \\cdot g(y)\\), contradiction.", "source_pdf": "apmo_2023.pdf", "notes": ""}
{"id": "APMO-2023-5", "contest": "APMO", "year": "2023", "problem_number": "5", "problem": "There are \\(n\\) line segments on the plane, no three intersecting at a point, and each pair intersecting once in their respective interiors. Tony and his \\(2 n-1\\) friends each stand at a distinct endpoint of a line segment. Tony wishes to send Christmas presents to each of his friends as follows:\nFirst, he chooses an endpoint of each segment as a \"sink\". Then he places the present at the endpoint of the segment he is at. The present moves as follows:\n- If it is on a line segment, it moves towards the sink.\n- When it reaches an intersection of two segments, it changes the line segment it travels on and starts moving towards the new sink.\n\nIf the present reaches an endpoint, the friend on that endpoint can receive their present. Prove Tony can send presents to exactly \\(n\\) of his \\(2 n-1\\) friends.", "solution": "\\section*{Solution 1}\n\nDraw a circle that encloses all the intersection points between line segments and extend all line segments until they meet the circle, and then move Tony and all his friends to the circle. Number the intersection points with the circle from 1 to \\(2 n\\) anticlockwise, starting from Tony (Tony has number 1). We will prove that the friends eligible to receive presents are the ones on even-numbered intersection points.\nFirst part: at most \\(n\\) friends can receive a present.\nThe solution relies on a well-known result: the \\(n\\) lines determine regions inside the circle; then it is possible to paint the regions with two colors such that no regions with a common (line) boundary have the same color. The proof is an induction on \\(n\\) : the fact immediately holds for \\(n=0\\), and the induction step consists on taking away one line \\(\\ell\\), painting the regions obtained with \\(n-1\\) lines, drawing \\(\\ell\\) again and flipping all colors on exactly one half plane determined by \\(\\ell\\).\nNow consider the line starting on point 1 . Color the regions in red and blue such that neighboring regions have different colors, and such that the two regions that have point 1 as a vertex are red on the right and blue on the left, from Tony's point of view. Finally, assign to each red region the clockwise direction and to each blue region the anticlockwise direction. Because of the coloring, every boundary will have two directions assigned, but the directions are the same since every boundary divides regions of different colors. Then the present will follow the directions assigned to the regions: it certainly does for both regions in the beginning, and when the present reaches an intersection it will keep bordering one of the two regions it was dividing. To finish this part of the problem, consider the regions that share a boundary with the circle. The directions alternate between outcoming and incoming, starting from 1 (outcoming), so all even-numbered vertices are directed as incoming and are the only ones able to receive presents.\nSecond part: all even-numbered vertices can receive a present.\nFirst notice that, since every two chords intersect, every chord separates the endpoints of each of the other \\(n-1\\) chords. Therefore, there are \\(n-1\\) vertices on each side of every chord, and each chord connects vertices \\(k\\) and \\(k+n, 1 \\leq k \\leq n\\).\nWe prove a stronger result by induction in \\(n\\) : let \\(k\\) be an integer, \\(1 \\leq k \\leq n\\). Direct each chord from \\(i\\) to \\(i+n\\) if \\(1 \\leq i \\leq k\\) and from \\(i+n\\) to \\(i\\) otherwise; in other words, the sinks are \\(k+1, k+2, \\ldots, k+n\\). Now suppose that each chord sends a present, starting from the vertex opposite to each sink, and all presents move with the same rules. Then \\(k-i\\) sends a present to \\(k+i+1, i=0,1, \\ldots, n-1\\) (indices taken modulo \\(2 n\\) ). In particular, for \\(i=k-1\\), Tony, in vertex 1 , send a present to vertex \\(2 k\\). Also, the \\(n\\) paths the presents make do not cross (but they may touch.) More formally, for all \\(i, 1 \\leq i \\leq n\\), if one path takes a present from \\(k-i\\) to \\(k+i+1\\), separating the circle into two regions, all paths taking a present from \\(k-j\\) to \\(k+j+1, j<i\\), are completely contained in one region, and all paths taking a present from\n\\(k-j\\) to \\(k+j+1, j>i\\), are completely contained in the other region. For instance, possible \\({ }^{1}\\) paths for \\(k=3\\) and \\(n=5\\) follow:\n![](https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-10.jpg?height=535&width=543&top_left_y=291&top_left_x=708)\n\nThe result is true for \\(n=1\\). Let \\(n>1\\) and assume the result is true for less chords. Consider the chord that takes \\(k\\) to \\(k+n\\) and remove it. Apply the induction hypothesis to the remaining \\(n-1\\) lines: after relabeling, presents would go from \\(k-i\\) to \\(k+i+2,1 \\leq i \\leq n-1\\) if the chord were not there.\nReintroduce the chord that takes \\(k\\) to \\(k+n\\). From the induction hypothesis, the chord intersects the paths of the presents in the following order: the \\(i\\)-th path the chord intersects is the the one that takes \\(k-i\\) to \\(k+i, i=1,2, \\ldots, n-1\\).\n\n\\begin{figure}\n\\includegraphics[width=\\textwidth]{https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-10.jpg?height=601&width=724&top_left_y=1267&top_left_x=245}\n\\captionsetup{labelformat=empty}\n\\caption{Paths without chord \\(k \\rightarrow k+n\\)}\n\\end{figure}\n\n\\begin{figure}\n\\includegraphics[width=\\textwidth]{https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-10.jpg?height=606&width=723&top_left_y=1262&top_left_x=1022}\n\\captionsetup{labelformat=empty}\n\\caption{Corrected paths with chord \\(k \\rightarrow k+n\\)}\n\\end{figure}\n\nThen the presents cover the following new paths: the present from \\(k\\) will leave its chord and take the path towards \\(k+1\\); then, for \\(i=1,2, \\ldots, n-1\\), the present from \\(k-i\\) will meet the chord from \\(k\\) to \\(k+n\\), move towards the intersection with the path towards \\(k+i+1\\) and go to \\(k+i+1\\), as desired. Notice that the paths still do not cross. The induction (and the solution) is now complete.\n\n\\section*{Solution 2}\n\nFirst part: at most \\(n\\) friends can receive a present.\nSimilarly to the first solution, consider a circle that encompasses all line segments, extend the lines, and use the endpoints of the chords instead of the line segments, and prove that each chord connects vertices \\(k\\) and \\(k+n\\). We also consider, even in the first part, \\(n\\) presents leaving from \\(n\\) outcoming vertices.\nFirst we prove that a present always goes to a sink. If it does not, then it loops; let it first enter the loop at point \\(P\\) after turning from chord \\(a\\) to chord \\(b\\). Therefore after it loops once,\n\n\\footnotetext{\n\\({ }^{1}\\) The paths do not depend uniquely on \\(k\\) and \\(n\\); different chord configurations and vertex labelings may change the paths.\n}\nit must turn to chord \\(b\\) at \\(P\\). But \\(P\\) is the intersection of \\(a\\) and \\(b\\), so the present should turn from chord \\(a\\) to chord \\(b\\), which can only be done in one way - the same way it came in first. This means that some part of chord \\(a\\) before the present enters the loop at \\(P\\) is part of the loop, which contradicts the fact that \\(P\\) is the first point in the loop. So no present enters a loop, and every present goes to a sink.\n\n\\begin{figure}\n\\includegraphics[width=\\textwidth]{https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-11.jpg?height=215&width=255&top_left_y=428&top_left_x=585}\n\\captionsetup{labelformat=empty}\n\\caption{There are no loops}\n\\end{figure}\n\n\\begin{figure}\n\\includegraphics[width=\\textwidth]{https://cdn.mathpix.com/cropped/2025_08_23_f8a083d79305c9305a0cg-11.jpg?height=215&width=255&top_left_y=428&top_left_x=1136}\n\\captionsetup{labelformat=empty}\n\\caption{No two paths cross}\n\\end{figure}\n\nThe present paths also do not cross: in fact, every time two paths share a point \\(P\\), intersection of chords \\(a\\) and \\(b\\), one path comes from \\(a\\) to \\(b\\) and the other path comes from \\(b\\) to \\(a\\), and they touch at \\(P\\). This implies the following sequence of facts:\n- Every path divides the circle into two regions with paths connecting vertices within each region.\n- All \\(n\\) presents will be delivered to \\(n\\) different persons; that is, all sinks receive a present. This implies that every vertex is an endpoint of a path.\n- The number of chord endpoints inside each region is even, because they are connected within their own region.\n\nNow consider the path starting at vertex 1, with Tony. It divides the circle into two regions with an even number of vertices in their interior. Then there is an even number of vertices between Tony and the recipient of his present, that is, their vertex is an even numbered one. Second part: all even-numbered vertices can receive a present.\nThe construction is the same as the in the previous solution: direct each chord from \\(i\\) to \\(i+n\\) if \\(1 \\leq i \\leq k\\) and from \\(i+n\\) to \\(i\\) otherwise; in other words, the sinks are \\(k+1, k+2, \\ldots, k+n\\). Then, since the paths do not cross, \\(k\\) will send a present to \\(k+1, k-1\\) will send a present to \\(k+2\\), and so on, until 1 sends a present to \\((k+1)+(k-1)=2 k\\).", "source_pdf": "apmo_2023.pdf", "notes": ""}
{"id": "APMO-2020-1", "contest": "APMO", "year": "2020", "problem_number": "1", "problem": "Let \\(\\Gamma\\) be the circumcircle of \\(\\Delta A B C\\). Let \\(D\\) be a point on the side \\(B C\\). The tangent to \\(\\Gamma\\) at \\(A\\) intersects the parallel line to \\(B A\\) through \\(D\\) at point \\(E\\). The segment \\(C E\\) intersects \\(\\Gamma\\) again at \\(F\\). Suppose \\(B, D, F, E\\) are concyclic. Prove that \\(A C, B F, D E\\) are concurrent.", "solution": "Solution 1 From the conditions, we have\n![](https://cdn.mathpix.com/cropped/2025_08_23_3dc300bd078f86f0b35eg-1.jpg?height=744&width=708&top_left_y=769&top_left_x=710)\n\\[\n\\begin{aligned}\n\\angle C B A & =180^{\\circ}-\\angle E D B=180^{\\circ}-\\angle E F B \\\\\n& =180^{\\circ}-\\angle E F A-\\angle A F B \\\\\n& =180^{\\circ}-\\angle C B A-\\angle A C B=\\angle B A C .\n\\end{aligned}\n\\]\n\nLet \\(P\\) be the intersection of \\(A C\\) and \\(B F\\). Then we have\n\\[\n\\angle P A E=\\angle C B A=\\angle B A C=\\angle B F C\n\\]\n\nThis implies \\(A, P, F, E\\) are concyclic. It follows that\n\\[\n\\angle F P E=\\angle F A E=\\angle F B A\n\\]\nand hence \\(A B\\) and \\(E P\\) are parallel. So \\(E, P, D\\) are collinear, and the result follows.\n\n\\section*{Solution 2}\n\nLet \\(E^{\\prime}\\) be any point on the extension of \\(E A\\). From \\(\\angle A E D=\\angle E^{\\prime} A B=\\angle A C D\\), points \\(A, D, C, E\\) are concyclic.\n![](https://cdn.mathpix.com/cropped/2025_08_23_3dc300bd078f86f0b35eg-2.jpg?height=700&width=662&top_left_y=227&top_left_x=761)\n\nLet \\(P\\) be the intersection of \\(B F\\) and \\(D E\\). From \\(\\angle A F P=\\angle A C B=\\angle A E P\\), the points \\(A, P, F, E\\) are concyclic. In addition, from \\(\\angle E P A=\\angle E F A=\\angle D B A\\), points \\(A, B, D, P\\) are concyclic.\nBy considering the radical centre of ( \\(B D F E\\) ), ( \\(A P F E\\) ) and ( \\(B D P A\\) ), we find that the lines \\(B D, A P, E F\\) are concurrent at \\(C\\). The result follows.", "source_pdf": "apmo_2020.pdf", "notes": ""}
{"id": "APMO-2020-2", "contest": "APMO", "year": "2020", "problem_number": "2", "problem": "Show that \\(r=2\\) is the largest real number \\(r\\) which satisfies the following condition: If a sequence \\(a_{1}, a_{2}, \\ldots\\) of positive integers fulfills the inequalities\n\\[\na_{n} \\leq a_{n+2} \\leq \\sqrt{a_{n}^{2}+r a_{n+1}}\n\\]\nfor every positive integer \\(n\\), then there exists a positive integer \\(M\\) such that \\(a_{n+2}=a_{n}\\) for every \\(n \\geq M\\).", "solution": "Solution 1. First, let us assume that \\(r>2\\), and take a positive integer \\(a \\geq 1 /(r-2)\\). Then, if we let \\(a_{n}=a+\\lfloor n / 2\\rfloor\\) for \\(n=1,2, \\ldots\\), the sequence \\(a_{n}\\) satisfies the inequalities\n\\[\n\\sqrt{a_{n}^{2}+r a_{n+1}} \\geq \\sqrt{a_{n}^{2}+r a_{n}} \\geq \\sqrt{a_{n}^{2}+\\left(2+\\frac{1}{a}\\right) a_{n}} \\geq a_{n}+1=a_{n+2}\n\\]\nbut since \\(a_{n+2}>a_{n}\\) for any \\(n\\), we see that \\(r\\) does not satisfy the condition given in the problem.\nNow we show that \\(r=2\\) does satisfy the condition of the problem. Suppose \\(a_{1}, a_{2}, \\ldots\\) is a sequence of positive integers satisfying the inequalities given in the problem, and there exists a positive integer \\(m\\) for which \\(a_{m+2}>a_{m}\\) is satisfied.\nBy induction we prove the following assertion:\n( \\(\\dagger\\) ) \\(\\quad a_{m+2 k} \\leq a_{m+2 k-1}=a_{m+1}\\) holds for every positive integer \\(k\\).\nThe truth of ( \\(\\dagger\\) ) for \\(k=1\\) follows from the inequalities below\n\\[\n2 a_{m+2}-1=a_{m+2}^{2}-\\left(a_{m+2}-1\\right)^{2} \\leq a_{m}^{2}+2 a_{m+1}-\\left(a_{m+2}-1\\right)^{2} \\leq 2 a_{m+1}\n\\]\n\nLet us assume that \\((\\dagger)\\) holds for some positive integer \\(k\\). From\n\\[\na_{m+1}^{2} \\leq a_{m+2 k+1}^{2} \\leq a_{m+2 k-1}^{2}+2 a_{m+2 k} \\leq a_{m+1}^{2}+2 a_{m+1}<\\left(a_{m+1}+1\\right)^{2}\n\\]\nit follows that \\(a_{m+2 k+1}=a_{m+1}\\) must hold. Furthermore, since \\(a_{m+2 k} \\leq a_{m+1}\\), we have\n\\[\na_{m+2 k+2}^{2} \\leq a_{m+2 k}^{2}+2 a_{m+2 k+1} \\leq a_{m+1}^{2}+2 a_{m+1}<\\left(a_{m+1}+1\\right)^{2}\n\\]\nfrom which it follows that \\(a_{m+2 k+2} \\leq a_{m+1}\\), which proves the assertion ( \\(\\dagger\\) ).\nWe can conclude that for the value of \\(m\\) with which we started our argument above, \\(a_{m+2 k+1}=a_{m+1}\\) holds for every positive integer \\(k\\). Therefore, in order to finish the proof, it is enough to show that \\(a_{m+2 k}\\) becomes constant after some value of \\(k\\). Since every \\(a_{m+2 k}\\) is a positive integer less than or equal to \\(a_{m+1}\\), there exists \\(k=K\\) for which \\(a_{m+2 K}\\) takes the maximum value. By the monotonicity of \\(a_{m+2 k}\\), it then follows that \\(a_{m+2 k}=a_{m+2 K}\\) for all \\(k \\geq K\\).\n\n\\section*{Solution 2}\n\nWe only give an alternative proof of the assertion ( \\(\\dagger\\) ) in solution 1 . Let \\(\\left\\{a_{n}\\right\\}\\) be a sequence satisfying the inequalities given in the problem. We will use the following key observations:\n(a) If \\(a_{n+1} \\leq a_{n}\\) for some \\(n \\geq 1\\), then\n\\[\na_{n} \\leq a_{n+2} \\leq \\sqrt{a_{n}^{2}+2 a_{n+1}}<\\sqrt{a_{n}^{2}+2 a_{n}+1}=a_{n}+1,\n\\]\nhence \\(a_{n}=a_{n+2}\\).\n(b) If \\(a_{n} \\leq a_{n+1}\\) for some \\(n \\geq 1\\), then\n\\[\na_{n} \\leq a_{n+2} \\leq \\sqrt{a_{n}^{2}+2 a_{n+1}}<\\sqrt{a_{n+1}^{2}+2 a_{n+1}+1}=a_{n+1}+1,\n\\]\nhence \\(a_{n} \\leq a_{n+2} \\leq a_{n+1}\\).\nNow let \\(m\\) be a positive integer such that \\(a_{m+2}>a_{m}\\). By the observations above, we must have \\(a_{m}<a_{m+2} \\leq a_{m+1}\\). Thus the assertion ( \\(\\dagger\\) ) is true for \\(k=1\\). Assume that the assertion holds for some positive integer \\(k\\). Using observation (a), we get \\(a_{m+2 k+1}=a_{m+2 k-1}=a_{m+1}\\). Thus \\(a_{m+2 k} \\leq a_{m+2 k+1}\\), and then using observation (b), we get \\(a_{m+2 k+2} \\leq a_{m+2 k+1}=a_{m+1}\\), which proves the assertion ( \\(\\dagger\\) ).", "source_pdf": "apmo_2020.pdf", "notes": ""}
{"id": "APMO-2020-3", "contest": "APMO", "year": "2020", "problem_number": "3", "problem": "Determine all positive integers \\(k\\) for which there exist a positive integer \\(m\\) and a set \\(S\\) of positive integers such that any integer \\(n>m\\) can be written as a sum of distinct elements of \\(S\\) in exactly \\(k\\) ways.", "solution": "\\section*{Solution:}\n\nWe claim that \\(k=2^{a}\\) for all \\(a \\geq 0\\).\nLet \\(A=\\{1,2,4,8, \\ldots\\}\\) and \\(B=\\mathbb{N} \\backslash A\\). For any set \\(T\\), let \\(s(T)\\) denote the sum of the elements of \\(T\\). (If \\(T\\) is empty, we let \\(s(T)=0\\).)\nWe first show that any positive integer \\(k=2^{a}\\) satisfies the desired property. Let \\(B^{\\prime}\\) be a subset of \\(B\\) with \\(a\\) elements, and let \\(S=A \\cup B^{\\prime}\\). Recall that any nonnegative integer has a unique binary representation. Hence, for any integer \\(t>s\\left(B^{\\prime}\\right)\\) and any subset \\(B^{\\prime \\prime} \\subseteq B^{\\prime}\\), the number \\(t-s\\left(B^{\\prime \\prime}\\right)\\) can be written as a sum of distinct elements of \\(A\\) in a unique way. This means that \\(t\\) can be written as a sum of distinct elements of \\(B^{\\prime}\\) in exactly \\(2^{a}\\) ways.\nNext, assume that some positive integer \\(k\\) satisfies the desired property for a positive integer \\(m \\geq 2\\) and a set \\(S\\). Clearly, \\(S\\) is infinite.\nLemma: For all sufficiently large \\(x \\in S\\), the smallest element of \\(S\\) larger than \\(x\\) is \\(2 x\\).\nProof of Lemma: Let \\(x \\in S\\) with \\(x>3 m\\), and let \\(x<y<2 x\\). We will show that \\(y \\notin S\\). Suppose first that \\(y>x+m\\). Then \\(y-x\\) can be written as a sum of distinct elements of \\(S\\) not including \\(x\\) in \\(k\\) ways. If \\(y \\in S\\), then \\(y\\) can be written as a sum of distinct elements of \\(S\\) in at least \\(k+1\\) ways, a contradiction. Suppose now that \\(y \\leq x+m\\). We consider \\(z \\in(2 x-m, 2 x)\\). Similarly as before, \\(z-x\\) can be written as a sum of distinct elements of \\(S\\) not including \\(x\\) or \\(y\\) in \\(k\\) ways. If \\(y \\in S\\), then since \\(m<z-y<x, z-y\\) can be written as a sum of distinct elements of \\(S\\) not including \\(x\\) or \\(y\\). This means that \\(z\\) can be written as a sum of distinct elements of \\(S\\) in at least \\(k+1\\) ways, a contradiction.\nWe now show that \\(2 x \\in S\\); assume for contradiction that this is not the case. Observe that \\(2 x\\) can be written as a sum of distinct elements of \\(S\\) including \\(x\\) in exactly \\(k-1\\) ways. This means that \\(2 x\\) can also be written as a sum of distinct elements of \\(S\\) not including \\(x\\). If this sum includes any number less than \\(x-m\\), then removing this number, we can write some number \\(y \\in(x+m, 2 x)\\) as a sum of distinct elements of \\(S\\) not including \\(x\\). Now if \\(y=y^{\\prime}+x\\) where \\(y^{\\prime} \\in(m, x)\\) then \\(y^{\\prime}\\) can be written as\na sum of distinct elements of \\(S\\) including \\(x\\) in exactly \\(k\\) ways. Therefore \\(y\\) can be written as a sum of distinct elements of \\(S\\) in at least \\(k+1\\) ways, a contradiction. Hence the sum only includes numbers in the range \\([x-m, x)\\). Clearly two numbers do not suffice. On the other hand, three such numbers sum to at least \\(3(x-m)>2 x\\), a contradiction.\nFrom the Lemma, we have that \\(S=T \\cup U\\), where \\(T\\) is finite and \\(U=\\{x, 2 x, 4 x, 8 x, \\ldots\\}\\) for some positive integer \\(x\\). Let \\(y\\) be any positive integer greater than \\(s(T)\\). For any subset \\(T^{\\prime} \\subseteq T\\), if \\(y-s\\left(T^{\\prime}\\right) \\equiv 0(\\bmod x)\\), then \\(y-s\\left(T^{\\prime}\\right)\\) can be written as a sum of distinct elements of \\(U\\) in a unique way; otherwise \\(y-s\\left(T^{\\prime}\\right)\\) cannot be written as a sum of distinct elements of \\(U\\). Hence the number of ways to write \\(y\\) as a sum of distinct elements of \\(S\\) is equal to the number of subsets \\(T^{\\prime} \\subseteq T\\) such that \\(s\\left(T^{\\prime}\\right) \\equiv y(\\bmod x)\\). Since this holds for all \\(y\\), for any \\(0 \\leq a \\leq x-1\\) there are exactly \\(k\\) subsets \\(T^{\\prime} \\subseteq T\\) such that \\(s\\left(T^{\\prime}\\right) \\equiv a(\\bmod x)\\). This means that there are \\(k x\\) subsets of \\(T\\) in total. But the number of subsets of \\(T\\) is a power of 2 , and therefore \\(k\\) is a power of 2 , as claimed.\n\nSolution 2. We give an alternative proof of the first half of the lemma in the Solution 1 above.\nLet \\(s_{1}<s_{2}<\\cdots\\) be the elements of \\(S\\). For any positive integer \\(r\\), define \\(A_{r}(x)=\\prod_{n=1}^{r}\\left(1+x^{s_{n}}\\right)\\). For each \\(n\\) such that \\(m \\leq n<s_{r+1}\\), all \\(k\\) ways of writing \\(n\\) as a sum of elements of \\(S\\) must only use \\(s_{1}, \\ldots, s_{r}\\), so the coefficient of \\(x^{n}\\) in \\(A_{r}(x)\\) is \\(k\\). Similarly the number of ways of writing \\(s_{r+1}\\) as a sum of elements of \\(S\\) without using \\(s_{r+1}\\) is exactly \\(k-1\\). Hence the coefficient of \\(x^{s_{r+1}}\\) in \\(A_{r}(x)\\) is \\(k-1\\).\nFix a \\(t\\) such that \\(s_{t}>2(m+1)\\). Write\n\\[\nA_{t-1}(x)=u(x)+k\\left(x^{m+1}+\\cdots+x^{s_{t}-1}\\right)+x^{s_{t}} v(x)\n\\]\nfor some \\(u(x), v(x)\\) where \\(u(x)\\) is of degree at most \\(m\\).\nNote that\n\\[\nA_{t+1}(x)=A_{t-1}(x)+x^{s_{t}} A_{t-1}(x)+x^{s_{t+1}} A_{t-1}(x)+x^{s_{t}+s_{t+1}} A_{t-1}(x) .\n\\]\n\nIf \\(s_{t+1}+m+1<2 s_{t}\\), we can find the term \\(x^{s_{t+1}+m+1}\\) in \\(x^{s_{t}} A_{t-1}(x)\\) and in \\(x^{s_{t+1}} A_{t-1}(x)\\). Hence the coefficient of \\(x^{s_{t+1}+m+1}\\) in \\(A_{t+1}(x)\\) is at least \\(2 k\\), which is impossible. So \\(s_{t+1} \\geq 2 s_{t}-(m+1)> s_{t}+m+1\\).\n\nNow\n\\[\nA_{t}(x)=A_{t-1}(x)+x^{s_{t}} u(x)+k\\left(x^{s_{t}+m+1}+\\cdots x^{2 s_{t}-1}\\right)+x^{2 s_{t}} v(x) .\n\\]\n\nRecall that the coefficent of \\(x^{s_{t+1}}\\) in \\(A_{t}(x)\\) is \\(k-1\\). But if \\(s_{t}+m+1<s_{t+1}<s_{2 t}\\), then the coefficient of \\(x^{s_{t+1}}\\) in \\(A_{t}(x)\\) is at least \\(k\\), which is a contradiction. Therefore \\(s_{t+1} \\geq 2 s_{t}\\).", "source_pdf": "apmo_2020.pdf", "notes": ""}
{"id": "APMO-2020-4", "contest": "APMO", "year": "2020", "problem_number": "4", "problem": "Let \\(\\mathbb{Z}\\) denote the set of all integers. Find all polynomials \\(P(x)\\) with integer coefficients that satisfy the following property:\nFor any infinite sequence \\(a_{1}, a_{2}, \\ldots\\) of integers in which each integer in \\(\\mathbb{Z}\\) appears exactly once, there exist indices \\(i<j\\) and an integer \\(k\\) such that \\(a_{i}+a_{i+1}+\\cdots+a_{j}=P(k)\\).", "solution": "\\section*{Solution:}\n\nPart 1: All polynomials with \\(\\operatorname{deg} P=1\\) satisfy the given property.\nSuppose \\(P(x)=c x+d\\), and assume without loss of generality that \\(c>d \\geq 0\\). Denote \\(s_{i}=a_{1}+a_{2}+ \\cdots+a_{i}(\\bmod c)\\). It suffices to show that there exist indices \\(i\\) and \\(j\\) such that \\(j-i \\geq 2\\) and \\(s_{j}-s_{i} \\equiv d (\\bmod c)\\).\nConsider \\(c+1\\) indices \\(e_{1}, e_{2}, \\ldots, e_{c+1}>1\\) such that \\(a_{e_{l}} \\equiv d(\\bmod c)\\). By the pigeonhole principle, among the \\(n+1\\) pairs \\(\\left(s_{e_{1}-1}, s_{e_{1}}\\right),\\left(s_{e_{2}-1}, s_{e_{2}}\\right), \\ldots,\\left(s_{e_{n+1}-1}, s_{e_{n+1}}\\right)\\), some two are equal, say \\(\\left(s_{m-1}, s_{m}\\right)\\) and \\(\\left(s_{n-1}, s_{n}\\right)\\). We can then take \\(i=m-1\\) and \\(j=n\\).\n\\(\\underline{\\text { Part 2: All polynomials with } \\operatorname{deg} P \\neq 1 \\text { do not satisfy the given property. }}\\)\nLemma: If \\(\\operatorname{deg} P \\neq 1\\), then for any positive integers \\(A, B\\), and \\(C\\), there exists an integer \\(y\\) with \\(|y|>C\\) such that no value in the range of \\(P\\) falls within the interval \\([y-A, y+B]\\).\nProof of Lemma: The claim is immediate when \\(P\\) is constant or when \\(\\operatorname{deg} P\\) is even since \\(P\\) is bounded from below. Let \\(P(x)=a_{n} x^{n}+\\cdots+a_{1} x+a_{0}\\) be of odd degree greater than 1 , and assume without\nloss of generality that \\(a_{n}>0\\). Since \\(P(x+1)-P(x)=a_{n} n x^{n-1}+\\ldots\\), and \\(n-1>0\\), the gap between \\(P(x)\\) and \\(P(x+1)\\) grows arbitrarily for large \\(x\\). The claim follows.\nSuppose \\(\\operatorname{deg} P \\neq 1\\). We will inductively construct a sequence \\(\\left\\{a_{i}\\right\\}\\) such that for any indices \\(i<j\\) and any integer \\(k\\) it holds that \\(a_{i}+a_{i+1}+\\cdots+a_{j} \\neq P(k)\\). Suppose that we have constructed the sequence up to \\(a_{i}\\), and \\(m\\) is an integer with smallest magnitude yet to appear in the sequence. We will add two more terms to the sequence. Take \\(a_{i+2}=m\\). Consider all the new sums of at least two consecutive terms; each of them contains \\(a_{i+1}\\). Hence all such sums are in the interval \\(\\left[a_{i+1}-A, a_{i+1}+B\\right]\\) for fixed constants \\(A, B\\). The lemma allows us to choose \\(a_{i+1}\\) so that all such sums avoid the range of \\(P\\).\nAlternate Solution for Part 1: Again, suppose \\(P(x)=c x+d\\), and assume without loss of generality that \\(c>d \\geq 0\\). Let \\(S_{i}=\\left\\{a_{j}+a_{j+1}+\\cdots+a_{i}(\\bmod c) \\mid j=1,2, \\ldots, i\\right\\}\\). Then \\(S_{i+1}=\\left\\{s_{i}+a_{i+1}\\right. \\left.(\\bmod c) \\mid s_{i} \\in S_{i}\\right\\} \\cup\\left\\{a_{i+1}(\\bmod c)\\right\\}\\). Hence \\(\\left|S_{i+1}\\right|=\\left|S_{i}\\right|\\) or \\(S_{i+1}=\\left|S_{i}\\right|+1\\), with the former occuring exactly when \\(0 \\in S_{i}\\). Since \\(\\left|S_{i}\\right| \\leq c\\), the latter can only occur finitely many times, so there exists \\(I\\) such that \\(0 \\in S_{i}\\) for all \\(i \\geq I\\). Let \\(t>I\\) be an index with \\(a_{t} \\equiv d(\\bmod c)\\). Then we can find a sum of at least two consecutive terms ending at \\(a_{t}\\) and congruent to \\(d(\\bmod c)\\).\nAlternate Construction when \\(P(x)\\) is constant or of even degree\nIf \\(P(x)\\) is of even degree, then \\(P\\) is bounded from below or from above. In case of \\(P\\) is constant or bounded from above, then there exists a positive integer \\(c\\) such that \\(P(x)<c\\). Let \\(\\left\\{a_{i}\\right\\}\\) be the sequence\n\\[\n0,1,-1,2,3,-2,4,5,-3, \\cdots\n\\]\nwhich is given by \\(a_{3 n+1}=2 n, a_{3 n+2}=2 n+1, a_{3 n+3}=-(n+1)\\) for all \\(n \\geq 0\\). Notice that for any \\(i<j\\) we have \\(a_{i}+\\cdots+a_{j} \\geq 0\\). Then for the sequence \\(\\left\\{b_{n}\\right\\}\\) defined by \\(b_{n}=a_{n}+c\\), clearly \\(b_{i}+\\cdots+b_{j} \\geq\\left(a_{i}+\\cdots+a_{j}\\right)+2 c>c\\) which is out side the range of \\(P(x)\\).\nNow if \\(P\\) is bounded from below, there exist a positive integer \\(c\\) such that \\(P(x)>-c\\). In this case, take \\(b_{n}\\) to be \\(b_{n}=-a_{n}-c\\). Then for all \\(i<j\\) we have \\(b_{i}+\\cdots+b_{j} \\leq-\\left(a_{1}+\\cdots a_{n}\\right)-2 c<-c\\) which is again out side the range of \\(P(x)\\).", "source_pdf": "apmo_2020.pdf", "notes": ""}
{"id": "APMO-2020-5", "contest": "APMO", "year": "2020", "problem_number": "5", "problem": "Let \\(n \\geq 3\\) be a fixed integer. The number 1 is written \\(n\\) times on a blackboard. Below the blackboard, there are two buckets that are initially empty. A move consists of erasing two of the numbers \\(a\\) and \\(b\\), replacing them with the numbers 1 and \\(a+b\\), then adding one stone to the first bucket and \\(\\operatorname{gcd}(a, b)\\) stones to the second bucket. After some finite number of moves, there are \\(s\\) stones in the first bucket and \\(t\\) stones in the second bucket, where \\(s\\) and \\(t\\) are positive integers. Find all possible values of the ratio \\(\\frac{t}{s}\\).", "solution": "\\section*{Solution:}\n\nThe answer is the set of all rational numbers in the interval \\([1, n-1)\\). First, we show that no other numbers are possible. Clearly the ratio is at least 1, since for every move, at least one stone is added to the second bucket. Note that the number \\(s\\) of stones in the first bucket is always equal to \\(p-n\\), where \\(p\\) is the sum of the numbers on the blackboard. We will assume that the numbers are written in a row, and whenever two numbers \\(a\\) and \\(b\\) are erased, \\(a+b\\) is written in the place of the number on the right. Let \\(a_{1}, a_{2}, \\ldots, a_{n}\\) be the numbers on the blackboard from left to right, and let\n\\[\nq=0 \\cdot a_{1}+1 \\cdot a_{2}+\\cdots+(n-1) a_{n} .\n\\]\n\nSince each number \\(a_{i}\\) is at least 1 , we always have\n\\[\nq \\leq(n-1) p-(1+\\cdots+(n-1))=(n-1) p-\\frac{n(n-1)}{2}=(n-1) s+\\frac{n(n-1)}{2} .\n\\]\n\nAlso, if a move changes \\(a_{i}\\) and \\(a_{j}\\) with \\(i<j\\), then \\(t\\) changes by \\(\\operatorname{gcd}\\left(a_{i}, a_{j}\\right) \\leq a_{i}\\) and \\(q\\) increases by\n\\[\n(j-1) a_{i}-(i-1)\\left(a_{i}-1\\right) \\geq i a_{i}-(i-1)\\left(a_{i}-1\\right) \\geq a_{i} .\n\\]\n\nHence \\(q-t\\) never decreases. We may assume without loss of generality that the first move involves the rightmost 1 . Then immediately after this move, \\(q=0+1+\\cdots+(n-2)+(n-1) \\cdot 2=\\frac{(n+2)(n-1)}{2}\\) and\n\\(t=1\\). So after that move, we always have\n\\[\n\\begin{aligned}\nt & \\leq q+1-\\frac{(n+2)(n-1)}{2} \\\\\n& \\leq(n-1) s+\\frac{n(n-1)}{2}-\\frac{(n+2)(n-1)}{2}+1 \\\\\n& =(n-1) s-(n-2)<(n-1) s\n\\end{aligned}\n\\]\n\nHence, \\(\\frac{t}{s}<n-1\\). So \\(\\frac{t}{s}\\) must be a rational number in \\([1, n-1)\\).\nAfter a single move, we have \\(\\frac{t}{s}=1\\), so it remains to prove that \\(\\frac{t}{s}\\) can be any rational number in \\((1, n-1)\\). We will now show by induction on \\(n\\) that for any positive integer \\(a\\), it is possible to reach a situation where there are \\(n-1\\) occurrences of 1 on the board and the number \\(a^{n-1}\\), with \\(t\\) and \\(s\\) equal to \\(a^{n-2}(a-1)(n-1)\\) and \\(a^{n-1}-1\\), respectively. For \\(n=2\\), this is clear as there is only one possible move at each step, so after \\(a-1\\) moves \\(s\\) and \\(t\\) will both be equal to \\(a-1\\). Now assume that the claim is true for \\(n-1\\), where \\(n>2\\). Call the algorithm which creates this situation using \\(n-1\\) numbers algorithm \\(A\\). Then to reach the situation for size \\(n\\), we apply algorithm \\(A\\), to create the number \\(a^{n-2}\\). Next, apply algorithm \\(A\\) again and then add the two large numbers, repeat until we get the number \\(a^{n-1}\\). Then algorithm \\(A\\) was applied \\(a\\) times and the two larger numbers were added \\(a-1\\) times. Each time the two larger numbers are added, \\(t\\) increases by \\(a^{n-2}\\) and each time algorithm \\(A\\) is applied, \\(t\\) increases by \\(a^{n-3}(a-1)(n-2)\\). Hence, the final value of \\(t\\) is\n\\[\nt=(a-1) a^{n-2}+a \\cdot a^{n-3}(a-1)(n-2)=a^{n-2}(a-1)(n-1) .\n\\]\n\nThis completes the induction.\nNow we can choose 1 and the large number \\(b\\) times for any positive integer \\(b\\), and this will add \\(b\\) stones to each bucket. At this point we have\n\\[\n\\frac{t}{s}=\\frac{a^{n-2}(a-1)(n-1)+b}{a^{n-1}-1+b} .\n\\]\n\nSo we just need to show that for any rational number \\(\\frac{p}{q} \\in(1, n-1)\\), there exist positive integers \\(a\\) and \\(b\\) such that\n\\[\n\\frac{p}{q}=\\frac{a^{n-2}(a-1)(n-1)+b}{a^{n-1}-1+b}\n\\]\n\nRearranging, we see that this happens if and only if\n\\[\nb=\\frac{q a^{n-2}(a-1)(n-1)-p\\left(a^{n-1}-1\\right)}{p-q} .\n\\]\n\nIf we choose \\(a \\equiv 1(\\bmod p-q)\\), then this will be an integer, so we just need to check that the numerator is positive for sufficiently large \\(a\\).\n\\[\n\\begin{aligned}\nq a^{n-2}(a-1)(n-1)-p\\left(a^{n-1}-1\\right) & >q a^{n-2}(a-1)(n-1)-p a^{n-1} \\\\\n& =a^{n-2}(a(q(n-1)-p)-(n-1))\n\\end{aligned}\n\\]\nwhich is positive for sufficiently large \\(a\\) since \\(q(n-1)-p>0\\).\n\nAlternative solution for the upper bound. Rather than starting with \\(n\\) occurrences of 1 , we may start with infinitely many 1 s , but we are restricted to having at most \\(n-1\\) numbers which are not equal to 1 on the board at any time. It is easy to see that this does not change the problem. Note also that we can ignore the 1 we write on the board each move, so the allowed move is to rub off two numbers and write their sum. We define the width and score of a number on the board as follows. Colour that number red, then reverse every move up to that point all the way back to the situation when the numbers are all 1 s . Whenever a red number is split, colour the two replacement numbers\nred. The width of the original number is equal to the maximum number of red integers greater than 1 which appear on the board at the same time. The score of the number is the number of stones which were removed from the second bucket during these splits. Then clearly the width of any number is at most \\(n-1\\). Also, \\(t\\) is equal to the sum of the scores of the final numbers. We claim that if a number \\(p>1\\) has a width of at most \\(w\\), then its score is at most \\((p-1) w\\). We will prove this by strong induction on \\(p\\). If \\(p=1\\), then clearly \\(p\\) has a score of 0 , so the claim is true. If \\(p>1\\), then \\(p\\) was formed by adding two smaller numbers \\(a\\) and \\(b\\). Clearly \\(a\\) and \\(b\\) both have widths of at most \\(w\\). Moreover, if \\(a\\) has a width of \\(w\\), then at some point in the reversed process there will be \\(w\\) numbers in the set \\(\\{2,3,4, \\ldots\\}\\) that have split from \\(a\\), and hence there can be no such numbers at this point which have split from \\(b\\). Between this point and the final situation, there must always be at least one number in the set \\(\\{2,3,4, \\ldots\\}\\) that split from \\(a\\), so the width of \\(b\\) is at most \\(w-1\\). Therefore, \\(a\\) and \\(b\\) cannot both have widths of \\(w\\), so without loss of generality, \\(a\\) has width at most \\(w\\) and \\(b\\) has width at most \\(w-1\\). Then by the inductive hypothesis, \\(a\\) has score at most \\((a-1) w\\) and \\(b\\) has score at most \\((b-1)(w-1)\\). Hence, the score of \\(p\\) is at most\n\\[\n\\begin{aligned}\n(a-1) w+(b-1)(w-1)+\\operatorname{gcd}(a, b) & \\leq(a-1) w+(b-1)(w-1)+b \\\\\n& =(p-1) w+1-w \\\\\n& \\leq(p-1) w\n\\end{aligned}\n\\]\n\nThis completes the induction.\nNow, since each number \\(p\\) in the final configuration has width at most ( \\(n-1\\) ), it has score less than \\((n-1)(p-1)\\). Hence the number \\(t\\) of stones in the second bucket is less than the sum over the values of \\((n-1)(p-1)\\), and \\(s\\) is equal to the sum of the the values of \\((p-1)\\). Therefore, \\(\\frac{t}{s}<n-1\\).", "source_pdf": "apmo_2020.pdf", "notes": ""}
{"id": "APMO-2019-1", "contest": "APMO", "year": "2019", "problem_number": "1", "problem": "Let \\(\\mathbb{Z}^{+}\\)be the set of positive integers. Determine all functions \\(f: \\mathbb{Z}^{+} \\rightarrow \\mathbb{Z}^{+}\\) such that \\(a^{2}+f(a) f(b)\\) is divisible by \\(f(a)+b\\) for all positive integers \\(a\\) and \\(b\\).\n\nAnswer: The answer is \\(f(n)=n\\) for all positive integers \\(n\\).\nClearly, \\(f(n)=n\\) for all \\(n \\in \\mathbb{Z}^{+}\\)satisfies the original relation. We show some possible approaches to prove that this is the only possible function.", "solution": "Solution. First we perform the following substitutions on the original relation:", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-1", "contest": "APMO", "year": "2019", "problem_number": "1", "problem": "With \\(a=b=1\\), we find that \\(f(1)+1 \\mid f(1)^{2}+1\\), which implies \\(f(1)=1\\).", "solution": "", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-2", "contest": "APMO", "year": "2019", "problem_number": "2", "problem": "With \\(a=1\\), we find that \\(b+1 \\mid f(b)+1\\). In particular, \\(b \\leq f(b)\\) for all \\(b \\in \\mathbb{Z}^{+}\\).", "solution": "", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-3", "contest": "APMO", "year": "2019", "problem_number": "3", "problem": "With \\(b=1\\), we find that \\(f(a)+1 \\mid a^{2}+f(a)\\), and thus \\(f(a)+1 \\mid a^{2}-1\\). In particular, \\(f(a) \\leq a^{2}-2\\) for all \\(a \\geq 2\\).\n\nNow, let \\(p\\) be any odd prime. Substituting \\(a=p\\) and \\(b=f(p)\\) in the original relation, we find that \\(2 f(p) \\mid p^{2}+f(p) f(f(p))\\). Therefore, \\(f(p) \\mid p^{2}\\). Hence the possible values of \\(f(p)\\) are \\(1, p\\) and \\(p^{2}\\). By (2) above, \\(f(p) \\geq p\\) and by (3) above \\(f(p) \\leq p^{2}-2\\). So \\(f(p)=p\\) for all primes \\(p\\).\n\nSubstituting \\(a=p\\) into the original relation, we find that \\(b+p \\mid p^{2}+p f(b)\\). However, since \\((b+p)(f(b)+p-b)=p^{2}-b^{2}+b f(b)+p f(b)\\), we have \\(b+p \\mid b f(b)-b^{2}\\). Thus, for any fixed \\(b\\) this holds for arbitrarily large primes \\(p\\) and therefore we must have \\(b f(b)-b^{2}=0\\), or \\(f(b)=b\\), as desired.", "solution": "Solution 2: As above, we have relations (1)-(3). In (2) and (3), for \\(b=2\\) we have \\(3 \\mid f(2)+1\\) and \\(f(2)+1 \\mid 3\\). These imply \\(f(2)=2\\).\n\nNow, using \\(a=2\\) we get \\(2+b \\mid 4+2 f(b)\\). Let \\(f(b)=x\\). We have\n\\[\n\\begin{aligned}\n1+x \\equiv 0 & (\\bmod b+1) \\\\\n4+2 x \\equiv 0 & (\\bmod b+2)\n\\end{aligned}\n\\]\n\nFrom the first equation \\(x \\equiv b(\\bmod b+1)\\) so \\(x=b+(b+1) t\\) for some integer \\(t \\geq 0\\). Then\n\\[\n0 \\equiv 4+2 x \\equiv 4+2(b+(b+1) t) \\equiv 4+2(-2-t) \\equiv-2 t \\quad(\\bmod b+2)\n\\]\n\nAlso \\(t \\leq b-2\\) because \\(1+x \\mid b^{2}-1\\) by (3).\nIf \\(b+2\\) is odd, then \\(t \\equiv 0(\\bmod b+2)\\). Then \\(t=0\\), which implies \\(f(b)=b\\).\nIf \\(b+2\\) is even, then \\(t \\equiv 0(\\bmod (b+2) / 2)\\). Then \\(t=0\\) or \\(t=(b+2) / 2\\). But if \\(t \\neq 0\\), then by definition \\((b+4) / 2=(1+t)=(x+1) /(b+1)\\) and since \\(x+1 \\mid b^{2}-1\\), then \\((b+4) / 2\\) divides \\(b-1\\). Therefore \\(b+4 \\mid 10\\) and the only possibility is \\(b=6\\). So for even \\(b, b \\neq 6\\) we have \\(f(b)=b\\).\n\nFinally, by (2) and (3), for \\(b=6\\) we have \\(7 \\mid f(6)+1\\) and \\(f(6)+1 \\mid 35\\). This means \\(f(6)=6\\) or \\(f(6)=34\\). The later is discarded as, for \\(a=5, b=6\\), we have by the original equation that \\(11 \\mid 5(5+f(6))\\). Therefore \\(f(n)=n\\) for every positive integer \\(n\\).\n\nSolution 3: We proceed by induction. As in Solution 1, we have \\(f(1)=1\\). Suppose that \\(f(n-1)=n-1\\) for some integer \\(n \\geq 2\\).\n\nWith the substitution \\(a=n\\) and \\(b=n-1\\) in the original relation we obtain that \\(f(n)+ n-1 \\mid n^{2}+f(n)(n-1)\\). Since \\(f(n)+n-1 \\mid(n-1)(f(n)+n-1)\\), then \\(f(n)+n-1 \\mid 2 n-1\\).\n\nWith the substitution \\(a=n-1\\) and \\(b=n\\) in the original relation we obtain that \\(2 n- 1 \\mid(n-1)^{2}+(n-1) f(n)=(n-1)(n-1+f(n))\\). Since \\((2 n-1, n-1)=1\\), we deduce that \\(2 n-1 \\mid f(n)+n-1\\).\n\nTherefore, \\(f(n)+n-1=2 n-1\\), which implies the desired \\(f(n)=n\\).", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-2", "contest": "APMO", "year": "2019", "problem_number": "2", "problem": "Let \\(m\\) be a fixed positive integer. The infinite sequence \\(\\left\\{a_{n}\\right\\}_{n \\geq 1}\\) is defined in the following way: \\(a_{1}\\) is a positive integer, and for every integer \\(n \\geq 1\\) we have\n\\[\na_{n+1}= \\begin{cases}a_{n}^{2}+2^{m} & \\text { if } a_{n}<2^{m} \\\\ a_{n} / 2 & \\text { if } a_{n} \\geq 2^{m}\\end{cases}\n\\]\n\nFor each \\(m\\), determine all possible values of \\(a_{1}\\) such that every term in the sequence is an integer.\n\nAnswer: The only value of \\(m\\) for which valid values of \\(a_{1}\\) exist is \\(m=2\\). In that case, the only solutions are \\(a_{1}=2^{\\ell}\\) for \\(\\ell \\geq 1\\).", "solution": "Solution. Suppose that for integers \\(m\\) and \\(a_{1}\\) all the terms of the sequence are integers. For each \\(i \\geq 1\\), write the \\(i\\) th term of the sequence as \\(a_{i}=b_{i} 2^{c_{i}}\\) where \\(b_{i}\\) is the largest odd divisor of \\(a_{i}\\) (the \"odd part\" of \\(a_{i}\\) ) and \\(c_{i}\\) is a nonnegative integer.\n\nLemma 1. The sequence \\(b_{1}, b_{2}, \\ldots\\) is bounded above by \\(2^{m}\\).\nProof. Suppose this is not the case and take an index \\(i\\) for which \\(b_{i}>2^{m}\\) and for which \\(c_{i}\\) is minimal. Since \\(a_{i} \\geq b_{i}>2^{m}\\), we are in the second case of the recursion. Therefore, \\(a_{i+1}=a_{i} / 2\\) and thus \\(b_{i+1}=b_{i}>2^{m}\\) and \\(c_{i+1}=c_{i}-1<c_{i}\\). This contradicts the minimality of \\(c_{i}\\).\n\nLemma 2. The sequence \\(b_{1}, b_{2}, \\ldots\\) is nondecreasing.\nProof. If \\(a_{i} \\geq 2^{m}\\), then \\(a_{i+1}=a_{i} / 2\\) and thus \\(b_{i+1}=b_{i}\\). On the other hand, if \\(a_{i}<2^{m}\\), then\n\\[\na_{i+1}=a_{i}^{2}+2^{m}=b_{i}^{2} 2^{2 c_{i}}+2^{m}\n\\]\nand we have the following cases:\n- If \\(2 c_{i}>m\\), then \\(a_{i+1}=2^{m}\\left(b_{i}^{2} 2^{2 c_{i}-m}+1\\right)\\), so \\(b_{i+1}=b_{i}^{2} 2^{2 c_{i}-m}+1>b_{i}\\).\n- If \\(2 c_{i}<m\\), then \\(a_{i+1}=2^{2 c_{i}}\\left(b_{i}^{2}+2^{m-2 c_{i}}\\right)\\), so \\(b_{i+1}=b_{i}^{2}+2^{m-2 c_{i}}>b_{i}\\).\n- If \\(2 c_{i}=m\\), then \\(a_{i+1}=2^{m+1} \\cdot \\frac{b_{i}^{2}+1}{2}\\), so \\(b_{i+1}=\\left(b_{i}^{2}+1\\right) / 2 \\geq b_{i}\\) since \\(b_{i}^{2}+1 \\equiv 2(\\bmod 4)\\).\n\nBy combining these two lemmas we obtain that the sequence \\(b_{1}, b_{2}, \\ldots\\) is eventually constant. Fix an index \\(j\\) such that \\(b_{k}=b_{j}\\) for all \\(k \\geq j\\). Since \\(a_{n}\\) descends to \\(a_{n} / 2\\) whenever \\(a_{n} \\geq 2^{m}\\), there are infinitely many terms which are smaller than \\(2^{m}\\). Thus, we can choose an \\(i>j\\) such that \\(a_{i}<2^{m}\\). From the proof of Lemma \\(2, a_{i}<2^{m}\\) and \\(b_{i+1}=b_{i}\\) can happen simultaneously only when \\(2 c_{i}=m\\) and \\(b_{i+1}=b_{i}=1\\). By Lemma 2 , the sequence \\(b_{1}, b_{2}, \\ldots\\) is constantly 1 and thus \\(a_{1}, a_{2}, \\ldots\\) are all powers of two. Tracing the sequence starting from \\(a_{i}=2^{c_{i}}=2^{m / 2}<2^{m}\\),\n\\[\n2^{m / 2} \\rightarrow 2^{m+1} \\rightarrow 2^{m} \\rightarrow 2^{m-1} \\rightarrow 2^{2 m-2}+2^{m}\n\\]\n\nNote that this last term is a power of two if and only if \\(2 m-2=m\\). This implies that \\(m\\) must be equal to 2 . When \\(m=2\\) and \\(a_{1}=2^{\\ell}\\) for \\(\\ell \\geq 1\\) the sequence eventually cycles through \\(2,8,4,2, \\ldots\\) When \\(m=2\\) and \\(a_{1}=1\\) the sequence fails as the first terms are \\(1,5,5 / 2\\).\n\nSolution 2: Let \\(m\\) be a positive integer and suppose that \\(\\left\\{a_{n}\\right\\}\\) consists only of positive integers. Call a number small if it is smaller than \\(2^{m}\\) and large otherwise. By the recursion,\nafter a small number we have a large one and after a large one we successively divide by 2 until we get a small one.\n\nFirst, we note that \\(\\left\\{a_{n}\\right\\}\\) is bounded. Indeed, \\(a_{1}\\) turns into a small number after a finite number of steps. After this point, each small number is smaller than \\(2^{m}\\), so each large number is smaller than \\(2^{2 m}+2^{m}\\). Now, since \\(\\left\\{a_{n}\\right\\}\\) is bounded and consists only of positive integers, it is eventually periodic. We focus only on the cycle.\n\nAny small number \\(a_{n}\\) in the cycle can be writen as \\(a / 2\\) for \\(a\\) large, so \\(a_{n} \\geq 2^{m-1}\\), then \\(a_{n+1} \\geq 2^{2 m-2}+2^{m}=2^{m-2}\\left(4+2^{m}\\right)\\), so we have to divide \\(a_{n+1}\\) at least \\(m-1\\) times by 2 until we get a small number. This means that \\(a_{n+m}=\\left(a_{n}^{2}+2^{m}\\right) / 2^{m-1}\\), so \\(2^{m-1} \\mid a_{n}^{2}\\), and therefore \\(2^{\\lceil(m-1) / 2\\rceil} \\mid a_{n}\\) for any small number \\(a_{n}\\) in the cycle. On the other hand, \\(a_{n} \\leq 2^{m}-1\\), so \\(a_{n+1} \\leq 2^{2 m}-2^{m+1}+1+2^{m} \\leq 2^{m}\\left(2^{m}-1\\right)\\), so we have to divide \\(a_{n+1}\\) at most \\(m\\) times by two until we get a small number. This means that after \\(a_{n}\\), the next small number is either \\(N=a_{m+n}=\\left(a_{n}^{2} / 2^{m-1}\\right)+2\\) or \\(a_{m+n+1}=N / 2\\). In any case, \\(2^{\\lceil(m-1) / 2\\rceil}\\) divides \\(N\\).\n\nIf \\(m\\) is odd, then \\(x^{2} \\equiv-2\\left(\\bmod 2^{\\lceil(m-1) / 2\\rceil}\\right)\\) has a solution \\(x=a_{n} / 2^{(m-1) / 2}\\). If \\((m-1) / 2 \\geq 2 \\Longleftrightarrow m \\geq 5\\) then \\(x^{2} \\equiv-2(\\bmod 4)\\), which has no solution. So if \\(m\\) is odd, then \\(m \\leq 3\\).\n\nIf \\(m\\) is even, then \\(2^{m-1}\\left|a_{n}^{2} \\Longrightarrow 2^{\\lceil(m-1) / 2\\rceil}\\right| a_{n} \\Longleftrightarrow 2^{m / 2} \\mid a_{n}\\). Then if \\(a_{n}=2^{m / 2} x\\), \\(2 x^{2} \\equiv-2\\left(\\bmod 2^{m / 2}\\right) \\Longleftrightarrow x^{2} \\equiv-1\\left(\\bmod 2^{(m / 2)-1}\\right)\\), which is not possible for \\(m \\geq 6\\). So if \\(m\\) is even, then \\(m \\leq 4\\).\n\nThe cases \\(m=1,2,3,4\\) are handed manually, checking the possible small numbers in the cycle, which have to be in the interval \\(\\left[2^{m-1}, 2^{m}\\right)\\) and be divisible by \\(2^{\\lceil(m-1) / 2\\rceil}\\) :\n- For \\(m=1\\), the only small number is 1 , which leads to 5 , then \\(5 / 2\\).\n- For \\(m=2\\), the only eligible small number is 2 , which gives the cycle \\((2,8,4)\\). The only way to get to 2 is by dividing 4 by 2 , so the starting numbers greater than 2 are all numbers that lead to 4 , which are the powers of 2 .\n- For \\(m=3\\), the eligible small numbers are 4 and 6 ; we then obtain \\(4,24,12,6,44,22,11,11 / 2\\).\n- For \\(m=4\\), the eligible small numbers are 8 and 12 ; we then obtain \\(8,80,40,20,10, \\ldots\\) or \\(12,160,80,40,20,10, \\ldots\\), but in either case 10 is not an elegible small number.\n\n\\section*{Problem 3. Let \\(A B C\\)}\nbe a scalene triangle with circumcircle \\(\\Gamma\\). Let \\(M\\) be the midpoint of \\(B C\\). A variable point \\(P\\) is selected in the line segment \\(A M\\). The circumcircles of triangles \\(B P M\\) and \\(C P M\\) intersect \\(\\Gamma\\) again at points \\(D\\) and \\(E\\), respectively. The lines \\(D P\\) and \\(E P\\) intersect (a second time) the circumcircles to triangles \\(C P M\\) and \\(B P M\\) at \\(X\\) and \\(Y\\), respectively. Prove that as \\(P\\) varies, the circumcircle of \\(\\triangle A X Y\\) passes through a fixed point \\(T\\) distinct from \\(A\\).\n\nSolution. Let \\(N\\) be the radical center of the circumcircles of triangles \\(A B C, B M P\\) and \\(C M P\\). The pairwise radical axes of these circles are \\(B D, C E\\) and \\(P M\\), and hence they concur at \\(N\\). Now, note that in directed angles:\n\\[\n\\angle M C E=\\angle M P E=\\angle M P Y=\\angle M B Y .\n\\]\n![](https://cdn.mathpix.com/cropped/2025_08_23_38d1d30bc7219c0da581g-4.jpg?height=1323&width=1326&top_left_y=174&top_left_x=371)\n\nIt follows that \\(B Y\\) is parallel to \\(C E\\), and analogously that \\(C X\\) is parallel to \\(B D\\). Then, if \\(L\\) is the intersection of \\(B Y\\) and \\(C X\\), it follows that \\(B N C L\\) is a parallelogram. Since \\(B M=M C\\) we deduce that \\(L\\) is the reflection of \\(N\\) with respect to \\(M\\), and therefore \\(L \\in A M\\). Using power of a point from \\(L\\) to the circumcircles of triangles \\(B P M\\) and \\(C P M\\), we have\n\\[\nL Y \\cdot L B=L P \\cdot L M=L X \\cdot L C\n\\]\n\nHence, \\(B Y X C\\) is cyclic. Using the cyclic quadrilateral we find in directed angles:\n\\[\n\\angle L X Y=\\angle L B C=\\angle B C N=\\angle N D E .\n\\]\n\nSince \\(C X \\| B N\\), it follows that \\(X Y \\| D E\\).\nLet \\(Q\\) and \\(R\\) be two points in \\(\\Gamma\\) such that \\(C Q, B R\\), and \\(A M\\) are all parallel. Then in directed angles:\n\\[\n\\angle Q D B=\\angle Q C B=\\angle A M B=\\angle P M B=\\angle P D B .\n\\]\n\nThen \\(D, P, Q\\) are collinear. Analogously \\(E, P, R\\) are collinear. From here we get \\(\\angle P R Q= \\angle P D E=\\angle P X Y\\), since \\(X Y\\) and \\(D E\\) are parallel. Therefore \\(Q R Y X\\) is cyclic. Let \\(S\\) be the radical center of the circumcircle of triangle \\(A B C\\) and the circles \\(B C Y X\\) and \\(Q R Y X\\). This point lies in the lines \\(B C, Q R\\) and \\(X Y\\) because these are the radical axes of the circles. Let \\(T\\) be the second intersection of \\(A S\\) with \\(\\Gamma\\). By power of a point from \\(S\\) to the circumcircle of \\(A B C\\) and the circle \\(B C X Y\\) we have\n\\[\nS X \\cdot S Y=S B \\cdot S C=S T \\cdot S A\n\\]\n\nTherefore \\(T\\) is in the circumcircle of triangle \\(A X Y\\). Since \\(Q\\) and \\(R\\) are fixed regardless of the choice of \\(P\\), then \\(S\\) is also fixed, since it is the intersection of \\(Q R\\) and \\(B C\\). This implies \\(T\\) is also fixed, and therefore, the circumcircle of triangle \\(A X Y\\) goes through \\(T \\neq A\\) for any choice of \\(P\\).\n\nNow we show an alternative way to prove that \\(B C X Y\\) and \\(Q R X T\\) are cyclic.\nSolution 2. Let the lines \\(D P\\) and \\(E P\\) meet the circumcircle of \\(A B C\\) again at \\(Q\\) and \\(R\\), respectively. Then \\(\\angle D Q C \\angle D B C=\\angle D P M\\), so \\(Q C \\| P M\\). Similarly, \\(R B \\| P M\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_38d1d30bc7219c0da581g-5.jpg?height=635&width=986&top_left_y=642&top_left_x=539)\n\nNow, \\(\\angle Q C B=\\angle P M B=\\angle P X C=\\angle(Q X, C X)\\), which is half of the arc \\(Q C\\) in the circumcircle \\(\\omega_{C}\\) of \\(Q X C\\). So \\(\\omega_{C}\\) is tangent to \\(B S\\); analogously, \\(\\omega_{B}\\), the circumcicle of \\(R Y B\\), is also tangent to \\(B C\\). Since \\(B R \\| C Q\\), the inscribed trapezoid \\(B R Q C\\) is isosceles, and by symmetry \\(Q R\\) is also tangent to both circles, and the common perpendicular bisector of \\(B R\\) and \\(C Q\\) passes through the centers of \\(\\omega_{B}\\) and \\(\\omega_{C}\\). Since \\(M B=M C\\) and \\(P M\\|B R\\| C Q\\), the line \\(P M\\) is the radical axis of \\(\\omega_{B}\\) and \\(\\omega_{C}\\).\n\nHowever, \\(P M\\) is also the radical axis of the circumcircles \\(\\gamma_{B}\\) of \\(P M B\\) and \\(\\gamma_{C}\\) of \\(P M C\\). Let \\(C X\\) and \\(P M\\) meet at \\(Z\\). Let \\(p(K, \\omega)\\) denote the power of a point \\(K\\) with respect to a circumference \\(\\omega\\). We have\n\\[\np\\left(Z, \\gamma_{B}\\right)=p\\left(Z, \\gamma_{C}\\right)=Z X \\cdot Z C=p\\left(Z, \\omega_{B}\\right)=p\\left(Z, \\omega_{C}\\right) .\n\\]\n\nPoint \\(Z\\) is thus the radical center of \\(\\gamma_{B}, \\gamma_{C}, \\omega_{B}, \\omega_{C}\\). Thus, the radical axes \\(B Y, C X, P M\\) meet at \\(Z\\). From here,\n\\[\n\\begin{aligned}\n& Z Y \\cdot Z B=Z C \\cdot Z X \\Rightarrow B C X Y \\text { cyclic } \\\\\n& P Y \\cdot P R=P X \\cdot P Q \\Rightarrow Q R X T \\text { cyclic. }\n\\end{aligned}\n\\]\n\nWe may now finish as in Solution 1.", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-4", "contest": "APMO", "year": "2019", "problem_number": "4", "problem": "Consider a \\(2018 \\times 2019\\) board with integers in each unit square. Two unit squares are said to be neighbours if they share a common edge. In each turn, you choose some unit squares. Then for each chosen unit square the average of all its neighbours is calculated. Finally, after these calculations are done, the number in each chosen unit square is replaced by the corresponding average. Is it always possible to make the numbers in all squares become the same after finitely many turns?\n\nAnswer: No", "solution": "Solution. Let \\(n\\) be a positive integer relatively prime to 2 and 3 . We may study the whole process modulo \\(n\\) by replacing divisions by \\(2,3,4\\) with multiplications by the corresponding inverses modulo \\(n\\). If at some point the original process makes all the numbers equal, then the process modulo \\(n\\) will also have all the numbers equal. Our aim is to choose \\(n\\) and an initial configuration modulo \\(n\\) for which no process modulo \\(n\\) reaches a board with all numbers equal modulo \\(n\\). We split this goal into two lemmas.\n\nLemma 1. There is a \\(2 \\times 3\\) board that stays constant modulo 5 and whose entries are not all equal.\n\nProof. Here is one such a board:\n![](https://cdn.mathpix.com/cropped/2025_08_23_38d1d30bc7219c0da581g-6.jpg?height=207&width=307&top_left_y=702&top_left_x=879)\n\nThe fact that the board remains constant regardless of the choice of squares can be checked square by square.\n\nLemma 2. If there is an \\(r \\times s\\) board with \\(r \\geq 2, s \\geq 2\\), that stays constant modulo 5 , then there is also a \\(k r \\times l s\\) board with the same property.\n\nProof. We prove by a case by case analysis that repeateadly reflecting the \\(r \\times s\\) with respect to an edge preserves the property:\n- If a cell had 4 neighbors, after reflections it still has the same neighbors.\n- If a cell with \\(a\\) had 3 neighbors \\(b, c, d\\), we have by hypothesis that \\(a \\equiv 3^{-1}(b+c+d) \\equiv 2(b+c+d)(\\bmod 5)\\). A reflection may add \\(a\\) as a neighbor of the cell and now\n\\[\n4^{-1}(a+b+c+d) \\equiv 4(a+b+c+d) \\equiv 4 a+2 a \\equiv a \\quad(\\bmod 5)\n\\]\n- If a cell with \\(a\\) had 2 neighbors \\(b, c\\), we have by hypothesis that \\(a \\equiv 2^{-1}(b+c) \\equiv 3(b+c) (\\bmod 5)\\). If the reflections add one \\(a\\) as neighbor, now\n\\[\n3^{-1}(a+b+c) \\equiv 2(3(b+c)+b+c) \\equiv 8(b+c) \\equiv 3(b+c) \\equiv a(\\bmod 5)\n\\]\n- If a cell with \\(a\\) had 2 neighbors \\(b, c\\), we have by hypothesis that \\(a \\equiv 2^{-1}(b+c)(\\bmod 5)\\).\n\nIf the reflections add two \\(a\\) 's as neighbors, now\n\\[\n4^{-1}(2 a+b+c) \\equiv\\left(2^{-1} a+2^{-1} a\\right) \\equiv a \\quad(\\bmod 5)\n\\]\n\nIn the three cases, any cell is still preserved modulo 5 after an operation. Hence we can fill in the \\(k r \\times l s\\) board by \\(k \\times l\\) copies by reflection.\n\nSince \\(2 \\mid 2018\\) and \\(3 \\mid 2019\\), we can get through reflections the following board:\n![](https://cdn.mathpix.com/cropped/2025_08_23_38d1d30bc7219c0da581g-6.jpg?height=412&width=620&top_left_y=2324&top_left_x=725)\n\nBy the lemmas above, the board is invariant modulo 5, so the answer is no.", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2019-5", "contest": "APMO", "year": "2019", "problem_number": "5", "problem": "Determine all the functions \\(f: \\mathbb{R} \\rightarrow \\mathbb{R}\\) such that\n\\[\nf\\left(x^{2}+f(y)\\right)=f(f(x))+f\\left(y^{2}\\right)+2 f(x y)\n\\]\nfor all real number \\(x\\) and \\(y\\).\nAnswer: The possible functions are \\(f(x)=0\\) for all \\(x\\) and \\(f(x)=x^{2}\\) for all \\(x\\).", "solution": "Solution. By substituting \\(x=y=0\\) in the given equation of the problem, we obtain that \\(f(0)=0\\). Also, by substituting \\(y=0\\), we get \\(f\\left(x^{2}\\right)=f(f(x))\\) for any \\(x\\).\n\nFurthermore, by letting \\(y=1\\) and simplifying, we get\n\\[\n2 f(x)=f\\left(x^{2}+f(1)\\right)-f\\left(x^{2}\\right)-f(1),\n\\]\nfrom which it follows that \\(f(-x)=f(x)\\) must hold for every \\(x\\).\nSuppose now that \\(f(a)=f(b)\\) holds for some pair of numbers \\(a, b\\). Then, by letting \\(y=a\\) and \\(y=b\\) in the given equation, comparing the two resulting identities and using the fact that \\(f\\left(a^{2}\\right)=f(f(a))=f(f(b))=f\\left(b^{2}\\right)\\) also holds under the assumption, we get the fact that\n\\[\nf(a)=f(b) \\Rightarrow f(a x)=f(b x) \\quad \\text { for any real number } x\n\\]\n\nConsequently, if for some \\(a \\neq 0, f(a)=0\\), then we see that, for any \\(x, f(x)=f\\left(a \\cdot \\frac{x}{a}\\right)= f\\left(0 \\cdot \\frac{x}{a}\\right)=f(0)=0\\), which gives a trivial solution to the problem.\n\nIn the sequel, we shall try to find a non-trivial solution for the problem. So, let us assume from now on that if \\(a \\neq 0\\) then \\(f(a) \\neq 0\\) must hold. We first note that since \\(f(f(x))=f\\left(x^{2}\\right)\\) for all \\(x\\), the right-hand side of the given equation equals \\(f\\left(x^{2}\\right)+f\\left(y^{2}\\right)+2 f(x y)\\), which is invariant if we interchange \\(x\\) and \\(y\\). Therefore, we have\n\\[\nf\\left(x^{2}\\right)+f\\left(y^{2}\\right)+2 f(x y)=f\\left(x^{2}+f(y)\\right)=f\\left(y^{2}+f(x)\\right) \\quad \\text { for every pair } x, y .\n\\]\n\nNext, let us show that for any \\(x, f(x) \\geq 0\\) must hold. Suppose, on the contrary, \\(f(s)=-t^{2}\\) holds for some pair \\(s, t\\) of non-zero real numbers. By setting \\(x=s, y=t\\) in the right hand side of (2), we get \\(f\\left(s^{2}+f(t)\\right)=f\\left(t^{2}+f(s)\\right)=f(0)=0\\), so \\(f(t)=-s^{2}\\). We also have \\(f\\left(t^{2}\\right)=f\\left(-t^{2}\\right)=f(f(s))=f\\left(s^{2}\\right)\\). By applying (2) with \\(x=\\sqrt{s^{2}+t^{2}}\\) and \\(y=s\\), we obtain\n\\[\nf\\left(s^{2}+t^{2}\\right)+2 f\\left(s \\cdot \\sqrt{s^{2}+t^{2}}\\right)=0\n\\]\nand similarly, by applying (2) with \\(x=\\sqrt{s^{2}+t^{2}}\\) and \\(y=t\\), we obtain\n\\[\nf\\left(s^{2}+t^{2}\\right)+2 f\\left(t \\cdot \\sqrt{s^{2}+t^{2}}\\right)=0\n\\]\n\nConsequently, we obtain\n\\[\nf\\left(s \\cdot \\sqrt{s^{2}+t^{2}}\\right)=f\\left(t \\cdot \\sqrt{s^{2}+t^{2}}\\right)\n\\]\n\nBy applying (1) with \\(a=s \\sqrt{s^{2}+t^{2}}, b=t \\sqrt{s^{2}+t^{2}}\\) and \\(x=1 / \\sqrt{s^{2}+t^{2}}\\), we obtain \\(f(s)= f(t)=-s^{2}\\), from which it follows that\n\\[\n0=f\\left(s^{2}+f(s)\\right)=f\\left(s^{2}\\right)+f\\left(s^{2}\\right)+2 f\\left(s^{2}\\right)=4 f\\left(s^{2}\\right)\n\\]\na contradiction to the fact \\(s^{2}>0\\). Thus we conclude that for all \\(x \\neq 0, f(x)>0\\) must be satisfied.\n\nNow, we show the following fact\n\\[\nk>0, f(k)=1 \\Leftrightarrow k=1 .\n\\]\n\nLet \\(k>0\\) for which \\(f(k)=1\\). We have \\(f\\left(k^{2}\\right)=f(f(k))=f(1)\\), so by \\((1), f(1 / k)=f(k)=\\) 1 , so we may assume \\(k \\geq 1\\). By applying (2) with \\(x=\\sqrt{k^{2}-1}\\) and \\(y=k\\), and using \\(f(x) \\geq 0\\), we get\n\\[\nf\\left(k^{2}-1+f(k)\\right)=f\\left(k^{2}-1\\right)+f\\left(k^{2}\\right)+2 f\\left(k \\sqrt{k^{2}-1}\\right) \\geq f\\left(k^{2}-1\\right)+f\\left(k^{2}\\right) .\n\\]\n\nThis simplifies to \\(0 \\geq f\\left(k^{2}-1\\right) \\geq 0\\), so \\(k^{2}-1=0\\) and thus \\(k=1\\).\nNext we focus on showing \\(f(1)=1\\). If \\(f(1)=m \\leq 1\\), then we may proceed as above by setting \\(x=\\sqrt{1-m}\\) and \\(y=1\\) to get \\(m=1\\). If \\(f(1)=m \\geq 1\\), now we note that \\(f(m)=f(f(1))=f\\left(1^{2}\\right)=f(1)=m \\leq m^{2}\\). We may then proceed as above with \\(x=\\sqrt{m^{2}-m}\\) and \\(y=1\\) to show \\(m^{2}=m\\) and thus \\(m=1\\).\n\nWe are now ready to finish. Let \\(x>0\\) and \\(m=f(x)\\). Since \\(f(f(x))=f\\left(x^{2}\\right)\\), then \\(f\\left(x^{2}\\right)= f(m)\\). But by (1), \\(f\\left(m / x^{2}\\right)=1\\). Therefore \\(m=x^{2}\\). For \\(x<0\\), we have \\(f(x)=f(-x)=f\\left(x^{2}\\right)\\) as well. Therefore, for all \\(x, f(x)=x^{2}\\).\n\nSolution 2 After proving that \\(f(x)>0\\) for \\(x \\neq 0\\) as in the previous solution, we may also proceed as follows. We claim that \\(f\\) is injective on the positive real numbers. Suppose that \\(a>b>0\\) satisfy \\(f(a)=f(b)\\). Then by setting \\(x=1 / b\\) in (1) we have \\(f(a / b)=f(1)\\). Now, by induction on \\(n\\) and iteratively setting \\(x=a / b\\) in (1) we get \\(f\\left((a / b)^{n}\\right)=1\\) for any positive integer \\(n\\).\n\nNow, let \\(m=f(1)\\) and \\(n\\) be a positive integer such that \\((a / b)^{n}>m\\). By setting \\(x= \\sqrt{(a / b)^{n}-m}\\) and \\(y=1\\) in (2) we obtain that\n\\[\nf\\left((a / b)^{n}-m+f(1)\\right)=f\\left((a / b)^{n}-m\\right)+f\\left(1^{2}\\right)+2 f\\left(\\sqrt{\\left.(a / b)^{n}-m\\right)}\\right) \\geq f\\left((a / b)^{n}-m\\right)+f(1) .\n\\]\n\nSince \\(f\\left((a / b)^{n}\\right)=f(1)\\), this last equation simplifies to \\(f\\left((a / b)^{n}-m\\right) \\leq 0\\) and thus \\(m= (a / b)^{n}\\). But this is impossible since \\(m\\) is constant and \\(a / b>1\\). Thus, \\(f\\) is injective on the positive real numbers. Since \\(f(f(x))=f\\left(x^{2}\\right)\\), we obtain that \\(f(x)=x^{2}\\) for any real value \\(x\\).", "source_pdf": "apmo_2019.pdf", "notes": ""}
{"id": "APMO-2024-1", "contest": "APMO", "year": "2024", "problem_number": "1", "problem": "Let \\(A B C\\) be an acute triangle. Let \\(D\\) be a point on side \\(A B\\) and \\(E\\) be a point on side \\(A C\\) such that lines \\(B C\\) and \\(D E\\) are parallel. Let \\(X\\) be an interior point of \\(B C E D\\). Suppose rays \\(D X\\) and \\(E X\\) meet side \\(B C\\) at points \\(P\\) and \\(Q\\), respectively such that both \\(P\\) and \\(Q\\) lie between \\(B\\) and \\(C\\). Suppose that the circumcircles of triangles \\(B Q X\\) and \\(C P X\\) intersect at a point \\(Y \\neq X\\). Prove that points \\(A, X\\), and \\(Y\\) are collinear.", "solution": "\\section*{Solution 1}\n![](https://cdn.mathpix.com/cropped/2025_08_23_cf9a878261b0acb030afg-01.jpg?height=700&width=989&top_left_y=691&top_left_x=502)\n\nLet \\(\\ell\\) be the radical axis of circles \\(B Q X\\) and \\(C P X\\). Since \\(X\\) and \\(Y\\) are on \\(\\ell\\), it is sufficient to show that \\(A\\) is on \\(\\ell\\). Let line \\(A X\\) intersect segments \\(B C\\) and \\(D E\\) at \\(Z\\) and \\(Z^{\\prime}\\), respectively. Then it is sufficient to show that \\(Z\\) is on \\(\\ell\\). By \\(B C \\| D E\\), we obtain\n\\[\n\\frac{B Z}{Z C}=\\frac{D Z^{\\prime}}{Z^{\\prime} E}=\\frac{P Z}{Z Q},\n\\]\nthus \\(B Z \\cdot Q Z=C Z \\cdot P Z\\), which implies that \\(Z\\) is on \\(\\ell\\).\n\n\\section*{Solution 2}\n![](https://cdn.mathpix.com/cropped/2025_08_23_cf9a878261b0acb030afg-01.jpg?height=701&width=992&top_left_y=2004&top_left_x=502)\n\nLet circle \\(B Q X\\) intersect line \\(A B\\) at a point \\(S\\) which is different from \\(B\\). Then \\(\\angle D E X= \\angle X Q C=\\angle B S X\\), thus \\(S\\) is on circle \\(D E X\\). Similarly, let circle \\(C P X\\) intersect line \\(A C\\) at a point \\(T\\) which is different from \\(C\\). Then \\(T\\) is on circle \\(D E X\\). The power of \\(A\\) with respect to the circle \\(D E X\\) is \\(A S \\cdot A D=A T \\cdot A E\\). Since \\(\\frac{A D}{A B}=\\frac{A E}{A C}, A S \\cdot A B=A T \\cdot A C\\). Then \\(A\\) is in the radical axis of circles \\(B Q X\\) and \\(C P X\\), which implies that three points \\(A, X\\) and \\(Y\\) are collinear.\n\n\\section*{Solution 3}\n\nConsider the (direct) homothety that takes triangle \\(A D E\\) to triangle \\(A B C\\), and let \\(Y^{\\prime}\\) be the image of \\(Y\\) under this homothety; in other words, let \\(Y^{\\prime}\\) be the intersection of the line parallel to \\(B Y\\) through \\(D\\) and the line parallel to \\(C Y\\) through \\(E\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_cf9a878261b0acb030afg-02.jpg?height=704&width=992&top_left_y=693&top_left_x=502)\n\nThe homothety implies that \\(A, Y\\), and \\(Y^{\\prime}\\) are collinear, and that \\(\\angle D Y^{\\prime} E=\\angle B Y C\\). Since \\(B Q X Y\\) and \\(C P X Y\\) are cyclic,\n\\(\\angle D Y^{\\prime} E=\\angle B Y C=\\angle B Y X+\\angle X Y C=\\angle X Q P+\\angle X P Q=180^{\\circ}-\\angle P X Q=180^{\\circ}-\\angle D X E\\),\nwhich implies that \\(D Y^{\\prime} E X\\) is cyclic. Therefore\n\\[\n\\angle D Y^{\\prime} X=\\angle D E X=\\angle P Q X=\\angle B Y X,\n\\]\nwhich, combined with \\(D Y^{\\prime} \\| B Y\\), implies \\(Y^{\\prime} X \\| Y X\\). This proves that \\(X, Y\\), and \\(Y^{\\prime}\\) are collinear, which in turn shows that \\(A, X\\), and \\(Y\\) are collinear.", "source_pdf": "apmo_2024.pdf", "notes": ""}
{"id": "APMO-2024-2", "contest": "APMO", "year": "2024", "problem_number": "2", "problem": "Consider a \\(100 \\times 100\\) table, and identify the cell in row \\(a\\) and column \\(b, 1 \\leq a, b \\leq 100\\), with the ordered pair \\((a, b)\\). Let \\(k\\) be an integer such that \\(51 \\leq k \\leq 99\\). A \\(k\\)-knight is a piece that moves one cell vertically or horizontally and \\(k\\) cells to the other direction; that is, it moves from \\((a, b)\\) to ( \\(c, d\\) ) such that ( \\(|a-c|,|b-d|\\) ) is either ( \\(1, k\\) ) or ( \\(k, 1\\) ). The \\(k\\)-knight starts at cell \\((1,1)\\), and performs several moves. A sequence of moves is a sequence of cells \\(\\left(x_{0}, y_{0}\\right)=(1,1)\\), \\(\\left(x_{1}, y_{1}\\right),\\left(x_{2}, y_{2}\\right), \\ldots,\\left(x_{n}, y_{n}\\right)\\) such that, for all \\(i=1,2, \\ldots, n, 1 \\leq x_{i}, y_{i} \\leq 100\\) and the \\(k\\)-knight can move from \\(\\left(x_{i-1}, y_{i-1}\\right)\\) to \\(\\left(x_{i}, y_{i}\\right)\\). In this case, each cell \\(\\left(x_{i}, y_{i}\\right)\\) is said to be reachable. For each \\(k\\), find \\(L(k)\\), the number of reachable cells.\n\nAnswer: \\(L(k)=\\left\\{\\begin{array}{ll}100^{2}-(2 k-100)^{2} & \\text { if } k \\text { is even } \\\\ \\frac{100^{2}-(2 k-100)^{2}}{2} & \\text { if } k \\text { is odd }\\end{array}\\right.\\).", "solution": "\\section*{Solution}\n\nCell ( \\(x, y\\) ) is directly reachable from another cell if and only if \\(x-k \\geq 1\\) or \\(x+k \\leq 100\\) or \\(y-k \\geq 1\\) or \\(y+k \\leq 100\\), that is, \\(x \\geq k+1\\) or \\(x \\leq 100-k\\) or \\(y \\geq k+1\\) or \\(y \\leq 100-k(*)\\). Therefore the cells ( \\(x, y\\) ) for which \\(101-k \\leq x \\leq k\\) and \\(101-k \\leq y \\leq k\\) are unreachable. Let \\(S\\) be this set of unreachable cells in this square, namely the square of cells \\((x, y), 101-k \\leq x, y \\leq k\\).\nIf condition (*) is valid for both ( \\(x, y\\) ) and ( \\(x \\pm 2, y \\pm 2\\) ) then one can move from ( \\(x, y\\) ) to \\((x \\pm 2, y \\pm 2)\\), if they are both in the table, with two moves: either \\(x \\leq 50\\) or \\(x \\geq 51\\); the same is true for \\(y\\). In the first case, move \\((x, y) \\rightarrow(x+k, y \\pm 1) \\rightarrow(x, y \\pm 2)\\) or \\((x, y) \\rightarrow (x \\pm 1, y+k) \\rightarrow(x \\pm 2, y)\\). In the second case, move \\((x, y) \\rightarrow(x-k, y \\pm 1) \\rightarrow(x, y \\pm 2)\\) or \\((x, y) \\rightarrow(x \\pm 1, y-k) \\rightarrow(x \\pm 2, y)\\).\nHence if the table is colored in two colors like a chessboard, if \\(k \\leq 50\\), cells with the same color as \\((1,1)\\) are reachable. Moreover, if \\(k\\) is even, every other move changes the color of the occupied cell, and all cells are potentially reachable; otherwise, only cells with the same color as \\((1,1)\\) can be visited. Therefore, if \\(k\\) is even then the reachable cells consists of all cells except the center square defined by \\(101-k \\leq x \\leq k\\) and \\(101-k \\leq y \\leq k\\), that is, \\(L(k)=100^{2}-(2 k-100)^{2}\\); if \\(k\\) is odd, then only half of the cells are reachable: the ones with the same color as \\((1,1)\\), and \\(L(k)=\\frac{1}{2}\\left(100^{2}-(2 k-100)^{2}\\right)\\).", "source_pdf": "apmo_2024.pdf", "notes": ""}
{"id": "APMO-2024-3", "contest": "APMO", "year": "2024", "problem_number": "3", "problem": "Let \\(n\\) be a positive integer and \\(a_{1}, a_{2}, \\ldots, a_{n}\\) be positive real numbers. Prove that\n\\[\n\\sum_{i=1}^{n} \\frac{1}{2^{i}}\\left(\\frac{2}{1+a_{i}}\\right)^{2^{i}} \\geq \\frac{2}{1+a_{1} a_{2} \\ldots a_{n}}-\\frac{1}{2^{n}}\n\\]", "solution": "\\section*{Solution}\n\nWe first prove the following lemma:\nLemma 1. For \\(k\\) positive integer and \\(x, y>0\\),\n\\[\n\\left(\\frac{2}{1+x}\\right)^{2^{k}}+\\left(\\frac{2}{1+y}\\right)^{2^{k}} \\geq 2\\left(\\frac{2}{1+x y}\\right)^{2^{k-1}} .\n\\]\n\nThe proof goes by induction. For \\(k=1\\), we have\n\\[\n\\left(\\frac{2}{1+x}\\right)^{2}+\\left(\\frac{2}{1+y}\\right)^{2} \\geq 2\\left(\\frac{2}{1+x y}\\right)\n\\]\nwhich reduces to\n\\[\nx y(x-y)^{2}+(x y-1)^{2} \\geq 0 .\n\\]\n\nFor \\(k>1\\), by the inequality \\(2\\left(A^{2}+B^{2}\\right) \\geq(A+B)^{2}\\) applied at \\(A=\\left(\\frac{2}{1+x}\\right)^{2^{k-1}}\\) and \\(B=\\left(\\frac{2}{1+y}\\right)^{2^{k-1}}\\) followed by the induction hypothesis\n\\[\n\\begin{aligned}\n2\\left(\\left(\\frac{2}{1+x}\\right)^{2^{k}}+\\left(\\frac{2}{1+y}\\right)^{2^{k}}\\right) & \\geq\\left(\\left(\\frac{2}{1+x}\\right)^{2^{k-1}}+\\left(\\frac{2}{1+y}\\right)^{2^{k-1}}\\right)^{2} \\\\\n& \\geq\\left(2\\left(\\frac{2}{1+x y}\\right)^{2^{k-2}}\\right)^{2}=4\\left(\\frac{2}{1+x y}\\right)^{2^{k-1}}\n\\end{aligned}\n\\]\nfrom which the lemma follows.\nThe problem now can be deduced from summing the following applications of the lemma, multiplied by the appropriate factor:\n\\[\n\\begin{aligned}\n\\frac{1}{2^{n}}\\left(\\frac{2}{1+a_{n}}\\right)^{2^{n}}+\\frac{1}{2^{n}}\\left(\\frac{2}{1+1}\\right)^{2^{n}} & \\geq \\frac{1}{2^{n-1}}\\left(\\frac{2}{1+a_{n} \\cdot 1}\\right)^{2^{n-1}} \\\\\n\\frac{1}{2^{n-1}}\\left(\\frac{2}{1+a_{n-1}}\\right)^{2^{n-1}}+\\frac{1}{2^{n-1}}\\left(\\frac{2}{1+a_{n}}\\right)^{2^{n-1}} & \\geq \\frac{1}{2^{n-2}}\\left(\\frac{2}{1+a_{n-1} a_{n}}\\right)^{2^{n-2}} \\\\\n\\frac{1}{2^{n-2}}\\left(\\frac{2}{1+a_{n-2}}\\right)^{2^{n-2}}+\\frac{1}{2^{n-2}}\\left(\\frac{2}{1+a_{n-1} a_{n}}\\right)^{2^{n-2}} & \\geq \\frac{1}{2^{n-3}}\\left(\\frac{2}{1+a_{n-2} a_{n-1} a_{n}}\\right)^{2^{n-3}} \\\\\n\\cdots & 2^{2^{k}} \\\\\n\\frac{1}{2^{k}}\\left(\\frac{2}{1+a_{k}}\\right)^{2^{k}}+\\frac{1}{2^{k}}\\left(\\frac{2}{1+a_{k+1} \\ldots a_{n-1} a_{n}}\\right)^{2^{k-1}} & \\geq \\frac{1}{2^{k-1}}\\left(\\frac{2}{1+a_{k} \\ldots a_{n-2} a_{n-1} a_{n}}\\right)^{-} \\\\\n\\frac{1}{2}\\left(\\frac{2}{1+a_{1}}\\right)^{2}+\\frac{1}{2}\\left(\\frac{2}{1+a_{2} \\ldots a_{n-1} a_{n}}\\right)^{2} & \\geq \\frac{2}{1+a_{1} \\ldots a_{n-2} a_{n-1} a_{n}}\n\\end{aligned}\n\\]\n\nComment: Equality occurs if and only if \\(a_{1}=a_{2}=\\cdots=a_{n}=1\\).\n\nComment: The main motivation for the lemma is trying to \"telescope\" the sum\n\\[\n\\frac{1}{2^{n}}+\\sum_{i=1}^{n} \\frac{1}{2^{i}}\\left(\\frac{2}{1+a_{i}}\\right)^{2^{i}},\n\\]\nthat is,\n\\[\n\\frac{1}{2}\\left(\\frac{2}{1+a_{1}}\\right)^{2}+\\cdots+\\frac{1}{2^{n-1}}\\left(\\frac{2}{1+a_{n-1}}\\right)^{2^{n-1}}+\\frac{1}{2^{n}}\\left(\\frac{2}{1+a_{n}}\\right)^{2^{n}}+\\frac{1}{2^{n}}\\left(\\frac{2}{1+1}\\right)^{2^{n}}\n\\]\nto obtain an expression larger than or equal to\n\\[\n\\frac{2}{1+a_{1} a_{2} \\ldots a_{n}} .\n\\]\n\nIt seems reasonable to obtain a inequality that can be applied from right to left, decreases the exponent of the factor \\(1 / 2^{k}\\) by 1 , and multiplies the variables in the denominator. Given that, the lemma is quite natural:\n\\[\n\\frac{1}{2^{k}}\\left(\\frac{2}{1+x}\\right)^{2^{k}}+\\frac{1}{2^{k}}\\left(\\frac{2}{1+y}\\right)^{2^{k}} \\geq \\frac{1}{2^{k-1}}\\left(\\frac{2}{1+x y}\\right)^{2^{i-1}},\n\\]\nor\n\\[\n\\left(\\frac{2}{1+x}\\right)^{2^{k}}+\\left(\\frac{2}{1+y}\\right)^{2^{k}} \\geq 2\\left(\\frac{2}{1+x y}\\right)^{2^{k-1}} .\n\\]", "source_pdf": "apmo_2024.pdf", "notes": ""}
{"id": "APMO-2024-4", "contest": "APMO", "year": "2024", "problem_number": "4", "problem": "Prove that for every positive integer \\(t\\) there is a unique permutation \\(a_{0}, a_{1}, \\ldots, a_{t-1}\\) of \\(0,1, \\ldots, t-\\) 1 such that, for every \\(0 \\leq i \\leq t-1\\), the binomial coefficient \\(\\binom{t+i}{2 a_{i}}\\) is odd and \\(2 a_{i} \\neq t+i\\).", "solution": "\\section*{Solution}\n\nWe constantly make use of Kummer's theorem which, in particular, implies that \\(\\binom{n}{k}\\) is odd if and only if \\(k\\) and \\(n-k\\) have ones in different positions in binary. In other words, if \\(S(x)\\) is the set of positions of the digits 1 of \\(x\\) in binary (in which the digit multiplied by \\(2^{i}\\) is in position \\(i),\\binom{n}{k}\\) is odd if and only if \\(S(k) \\subseteq S(n)\\). Moreover, if we set \\(k<n, S(k)\\) is a proper subset of \\(S(n)\\), that is, \\(|S(k)|<|S(n)|\\).\nWe start with a lemma that guides us how the permutation should be set.\n\n\\section*{Lemma 1.}\n\\[\n\\sum_{i=0}^{t-1}|S(t+i)|=t+\\sum_{i=0}^{t-1}|S(2 i)| .\n\\]\n\nThe proof is just realizing that \\(S(2 i)=\\{1+x, x \\in S(i)\\}\\) and \\(S(2 i+1)=\\{0\\} \\cup\\{1+x, x \\in S(i)\\}\\), because \\(2 i\\) in binary is \\(i\\) followed by a zero and \\(2 i+1\\) in binary is \\(i\\) followed by a one. Therefore\n\\[\n\\begin{aligned}\n\\sum_{i=0}^{t-1}|S(t+i)| & =\\sum_{i=0}^{2 t-1}|S(i)|-\\sum_{i=0}^{t-1}|S(i)|=\\sum_{i=0}^{t-1}|S(2 i)|+\\sum_{i=0}^{t-1}|S(2 i+1)|-\\sum_{i=0}^{t-1}|S(i)| \\\\\n& =\\sum_{i=0}^{t-1}|S(i)|+\\sum_{i=0}^{t-1}(1+|S(i)|)-\\sum_{i=0}^{t-1}|S(i)|=t+\\sum_{i=0}^{t-1}|S(i)|=t+\\sum_{i=0}^{t-1}|S(2 i)| .\n\\end{aligned}\n\\]\n\nThe lemma has an immediate corollary: since \\(t+i>2 a_{i}\\) and \\(\\binom{t+i}{2 a_{i}}\\) is odd for all \\(i, 0 \\leq i \\leq t-1\\), \\(S\\left(2 a_{i}\\right) \\subset S(t+i)\\) with \\(\\left|S\\left(2 a_{i}\\right)\\right| \\leq|S(t+i)|-1\\). Since the sum of \\(\\left|S\\left(2 a_{i}\\right)\\right|\\) is \\(t\\) less than the sum of \\(|S(t+i)|\\), and there are \\(t\\) values of \\(i\\), equality must occur, that is, \\(\\left|S\\left(2 a_{i}\\right)\\right|=|S(t+i)|-1\\), which in conjunction with \\(S\\left(2 a_{i}\\right) \\subset S(t+i)\\) means that \\(t+i-2 a_{i}=2^{k_{i}}\\) for every \\(i, 0 \\leq i \\leq t-1\\), \\(k_{i} \\in S(t+i)\\) (more precisely, \\(\\left\\{k_{i}\\right\\}=S(t+i) \\backslash S\\left(2 a_{i}\\right)\\).)\nIn particular, for \\(t+i\\) odd, this means that \\(t+i-2 a_{i}=1\\), because the only odd power of 2 is 1. Then \\(a_{i}=\\frac{t+i-1}{2}\\) for \\(t+i\\) odd, which takes up all the numbers greater than or equal to \\(\\frac{t-1}{2}\\). Now we need to distribute the numbers that are smaller than \\(\\frac{t-1}{2}\\) (call these numbers small). If \\(t+i\\) is even then by Lucas' Theorem \\(\\binom{t+i}{2 a_{i}} \\equiv\\left(\\frac{t+i}{2}\\right)(\\bmod 2)\\), so we pair numbers from \\(\\lceil t / 2\\rceil\\) to \\(t-1\\) (call these numbers big) with the small numbers.\nSay that a set \\(A\\) is paired with another set \\(B\\) whenever \\(|A|=|B|\\) and there exists a bijection \\(\\pi: A \\rightarrow B\\) such that \\(S(a) \\subset S(\\pi(a))\\) and \\(|S(a)|=|S(\\pi(a))|-1\\); we also say that \\(a\\) and \\(\\pi(a)\\) are paired. We prove by induction in \\(t\\) that \\(A_{t}=\\{0,1,2, \\ldots,\\lfloor t / 2\\rfloor-1\\}\\) (the set of small numbers) and \\(B_{t}=\\{\\lceil t / 2\\rceil, \\ldots, t-2, t-1\\}\\) (the set of big numbers) can be uniquely paired.\nThe claim is immediate for \\(t=1\\) and \\(t=2\\). For \\(t>2\\), there is exactly one power of two in \\(B_{t}\\), since \\(t / 2 \\leq 2^{a}<t \\Longleftrightarrow a=\\left\\lceil\\log _{2}(t / 2)\\right\\rceil\\). Let \\(2^{a}\\) be this power of two. Then, since \\(2^{a} \\geq t / 2\\), no number in \\(A_{t}\\) has a one in position \\(a\\) in binary. Since for every number \\(x, 2^{a} \\leq x<t, a \\in S(x)\\) and \\(a \\notin S(y)\\) for all \\(y \\in A_{t}, x\\) can only be paired with \\(x-2^{a}\\), since \\(S(x)\\) needs to be stripped of exactly one position. This takes cares of \\(x \\in B_{t}, 2^{a} \\leq x<t\\), and \\(y \\in A_{t}, 0 \\leq y<t-2^{a}\\).\nNow we need to pair the numbers from \\(A^{\\prime}=\\left\\{t-2^{a}, t-2^{a}+1, \\ldots,\\lfloor t / 2\\rfloor-1\\right\\} \\subset A\\) with the numbers from \\(B^{\\prime}=\\left\\{\\lceil t / 2\\rceil,\\lceil t / 2\\rceil+1, \\ldots, 2^{a}-1\\right\\} \\subset B\\). In order to pair these \\(t-2\\left(t-2^{a}\\right)= 2^{a+1}-t<t\\) numbers, we use the induction hypothesis and a bijection between \\(A^{\\prime} \\cup B^{\\prime}\\) and \\(B_{2^{a+1}{ }_{-t}} \\cup A_{2^{a+1}{ }_{-t}}\\). Let \\(S=S\\left(2^{a}-1\\right)=\\{0,1,2, \\ldots, a-1\\}\\). Then take a pair \\(x, y, x \\in A_{2^{a+1}-t}\\) and \\(y \\in B_{2^{a+1}-t}\\) and biject it with \\(2^{a}-1-x \\in B^{\\prime}\\) and \\(2^{a}-1-y \\in A^{\\prime}\\). In fact,\n\\[\n0 \\leq x \\leq\\left\\lfloor\\frac{2^{a+1}-t}{2}\\right\\rfloor-1=2^{a}-\\left\\lceil\\frac{t}{2}\\right\\rceil-1 \\Longleftrightarrow\\left\\lceil\\frac{t}{2}\\right\\rceil \\leq 2^{a}-1-x \\leq 2^{a}-1\n\\]\nand\n\\[\n\\left\\lceil\\frac{2^{a+1}-t}{2}\\right\\rceil=2^{a}-\\left\\lfloor\\frac{t}{2}\\right\\rfloor \\leq y \\leq 2^{a+1}-t-1 \\Longleftrightarrow t-2^{a} \\leq 2^{a}-1-y \\leq\\left\\lfloor\\frac{t}{2}\\right\\rfloor-1 .\n\\]\n\nMoreover, \\(S\\left(2^{a}-1-x\\right)=S \\backslash S(x)\\) and \\(S\\left(2^{a}-1-y\\right)=S \\backslash S(y)\\) are complements with respect to \\(S\\), and \\(S(x) \\subset S(y)\\) and \\(|S(x)|=|S(y)|-1\\) implies \\(S\\left(2^{a}-1-y\\right) \\subset S\\left(2^{a}-1-x\\right)\\) and \\(\\left|S\\left(2^{a}-1-y\\right)\\right|=\\left|S\\left(2^{a}-1-x\\right)\\right|-1\\). Therefore a pairing between \\(A^{\\prime}\\) and \\(B^{\\prime}\\) corresponds to a pairing between \\(A_{2^{a+1}-t}\\) and \\(B_{2^{a+1}-t}\\). Since the latter pairing is unique, the former pairing is also unique, and the result follows.\nWe illustrate the bijection by showing the case \\(t=23\\) :\n\\[\nA_{23}=\\{0,1,2, \\ldots, 10\\}, \\quad B_{23}=\\{12,13,14, \\ldots, 22\\}\n\\]\n\nThe pairing is\n\\[\n\\left(\\begin{array}{ccccccccccc}\n12 & 13 & 14 & 15 & 16 & 17 & 18 & 19 & 20 & 21 & 22 \\\\\n8 & 9 & 10 & 7 & 0 & 1 & 2 & 3 & 4 & 5 & 6\n\\end{array}\\right)\n\\]\nin which the bijection is between\n\\[\n\\left(\\begin{array}{cccc}\n12 & 13 & 14 & 15 \\\\\n8 & 9 & 10 & 7\n\\end{array}\\right) \\quad \\text { and } \\quad\\left(\\begin{array}{cccc}\n3 & 2 & 1 & 0 \\\\\n7 & 6 & 5 & 8\n\\end{array}\\right) \\rightarrow\\left(\\begin{array}{cccc}\n5 & 6 & 7 & 8 \\\\\n1 & 2 & 3 & 0\n\\end{array}\\right)\n\\]", "source_pdf": "apmo_2024.pdf", "notes": ""}
{"id": "APMO-2024-5", "contest": "APMO", "year": "2024", "problem_number": "5", "problem": "Line \\(\\ell\\) intersects sides \\(B C\\) and \\(A D\\) of cyclic quadrilateral \\(A B C D\\) in its interior points \\(R\\) and \\(S\\) respectively, and intersects ray \\(D C\\) beyond point \\(C\\) at \\(Q\\), and ray \\(B A\\) beyond point \\(A\\) at \\(P\\). Circumcircles of the triangles \\(Q C R\\) and \\(Q D S\\) intersect at \\(N \\neq Q\\), while circumcircles of the triangles \\(P A S\\) and \\(P B R\\) intersect at \\(M \\neq P\\). Let lines \\(M P\\) and \\(N Q\\) meet at point \\(X\\), lines \\(A B\\) and \\(C D\\) meet at point \\(K\\) and lines \\(B C\\) and \\(A D\\) meet at point \\(L\\). Prove that point \\(X\\) lies on line \\(K L\\).", "solution": "\\section*{Solution 1}\n\nWe start with the following lemma.\nLemma 1. Points \\(M, N, P, Q\\) are concyclic.\nPoint \\(M\\) is the Miquel point of lines \\(A P=A B, P S=\\ell, A S=A D\\), and \\(B R=B C\\), and point \\(N\\) is the Miquel point of lines \\(C Q=C D, R C=B C, Q R=\\ell\\), and \\(D S=A D\\). Both points \\(M\\) and \\(N\\) are on the circumcircle of the triangle determined by the common lines \\(A D, \\ell\\), and \\(B C\\), which is \\(L R S\\).\nThen, since quadrilaterals \\(Q N R C, P M A S\\), and \\(A B C D\\) are all cyclic, using directed angles (modulo \\(180^{\\circ}\\) )\n\\[\n\\begin{aligned}\n\\measuredangle N M P & =\\measuredangle N M S+\\measuredangle S M P=\\measuredangle N R S+\\measuredangle S A P=\\measuredangle N R Q+\\measuredangle D A B=\\measuredangle N R Q+\\measuredangle D C B \\\\\n& =\\measuredangle N R Q+\\measuredangle Q C R=\\measuredangle N R Q+\\measuredangle Q N R=\\measuredangle N Q R=\\measuredangle N Q P,\n\\end{aligned}\n\\]\nwhich implies that \\(M N Q P\\) is a cyclic quadrilateral.\n![](https://cdn.mathpix.com/cropped/2025_08_23_cf9a878261b0acb030afg-08.jpg?height=952&width=1094&top_left_y=1319&top_left_x=451)\n\nLet \\(E\\) be the Miquel point of \\(A B C D\\) (that is, of lines \\(A B, B C, C D, D A\\) ). It is well known that \\(E\\) lies in the line \\(t\\) connecting the intersections of the opposite lines of \\(A B C D\\). Let lines \\(N Q\\) and \\(t\\) meet at \\(T\\). If \\(T \\neq E\\), using directed angles, looking at the circumcircles of \\(L A B\\) (which contains, by definition, \\(E\\) and \\(M\\) ), \\(A P S\\) (which also contains \\(M\\) ), and \\(M N Q P\\),\n\\[\n\\measuredangle T E M=\\measuredangle L E M=\\measuredangle L A M=\\measuredangle S A M=\\measuredangle S P M=\\measuredangle Q P M=\\measuredangle Q N M=\\measuredangle T N M,\n\\]\nthat is, \\(T\\) lies in the circumcircle \\(\\omega\\) of \\(E M N\\). If \\(T=E\\), the same computation shows that \\(\\measuredangle L E M=\\measuredangle E N M\\), which means that \\(t\\) is tangent to \\(\\omega\\).\n\nNow let lines \\(M P\\) and \\(t\\) meet at \\(V\\). An analogous computation shows, by looking at the circumcircles of \\(L C D\\) (which contains \\(E\\) and \\(N\\) ), \\(C Q R\\), and \\(M N Q P\\), that \\(V\\) lies in \\(\\omega\\) as well, and that if \\(V=E\\) then \\(t\\) is tangent to \\(\\omega\\).\nTherefore, since \\(\\omega\\) meet \\(t\\) at \\(T, V\\), and \\(E\\), either \\(T=V\\) if both \\(T \\neq E\\) and \\(V \\neq E\\) or \\(T=V=E\\). At any rate, the intersection of lines \\(M P\\) and \\(N Q\\) lies in \\(t\\).\n\n\\section*{Solution 2}\n\nBarycentric coordinates are a viable way to solve the problem, but even the solution we have found had some clever computations. Here is an outline of this solution.\n\nLemma 2. Denote by \\(\\operatorname{pow}_{\\omega} X\\) the power of point \\(X\\) with respect to circle \\(\\omega\\). Let \\(\\Gamma_{1}\\) and \\(\\Gamma_{2}\\) be circles with different centers. Considering \\(A B C\\) as the reference triangle in barycentric coordinates, the radical axis of \\(\\Gamma_{1}\\) and \\(\\Gamma_{2}\\) is given by\n\\[\n\\left(\\operatorname{pow}_{\\Gamma_{1}} A-\\operatorname{pow}_{\\Gamma_{2}} A\\right) x+\\left(\\operatorname{pow}_{\\Gamma_{1}} B-\\operatorname{pow}_{\\Gamma_{2}} B\\right) y+\\left(\\operatorname{pow}_{\\Gamma_{1}} C-\\operatorname{pow}_{\\Gamma_{2}} C\\right) z=0 .\n\\]\n\nProof: Let \\(\\Gamma_{i}\\) have the equation \\(\\Gamma_{i}(x, y, z)=-a^{2} y z-b^{2} z x-c^{2} x y+(x+y+z)\\left(r_{i} x+s_{i} y+t_{i} z\\right)\\). Then \\(\\operatorname{pow}_{\\Gamma_{i}} P=\\Gamma_{i}(P)\\). In particular, \\(\\operatorname{pow}_{\\Gamma_{i}} A=\\Gamma_{i}(1,0,0)=r_{i}\\) and, similarly, \\(\\operatorname{pow}_{\\Gamma_{i}} B=s_{i}\\) and \\(\\operatorname{pow}_{\\Gamma_{i}} C=t_{i}\\).\nFinally, the radical axis is\n\\[\n\\begin{aligned}\n& \\operatorname{pow}_{\\Gamma_{1}} P=\\operatorname{pow}_{\\Gamma_{2}} P \\\\\n\\Longleftrightarrow & \\Gamma_{1}(x, y, z)=\\Gamma_{2}(x, y, z) \\\\\n\\Longleftrightarrow & r_{1} x+s_{1} y+t_{1} z=r_{2} x+s_{2} y+t_{2} z \\\\\n\\Longleftrightarrow & \\left(\\operatorname{pow}_{\\Gamma_{1}} A-\\operatorname{pow}_{\\Gamma_{2}} A\\right) x+\\left(\\operatorname{pow}_{\\Gamma_{1}} B-\\operatorname{pow}_{\\Gamma_{2}} B\\right) y+\\left(\\operatorname{pow}_{\\Gamma_{1}} C-\\operatorname{pow}_{\\Gamma_{2}} C\\right) z=0 .\n\\end{aligned}\n\\]\n\nWe still use the Miquel point \\(E\\) of \\(A B C D\\). Notice that the problem is equivalent to proving that lines \\(M P, N Q\\), and \\(E K\\) are concurrent. The main idea is writing these three lines as radical axes. In fact, by definition of points \\(M, N\\), and \\(E\\) :\n- \\(M P\\) is the radical axis of the circumcircles of \\(P A S\\) and \\(P B R\\);\n- \\(N Q\\) is the radical axis of the circumcircles of \\(Q C R\\) and \\(Q D S\\);\n- \\(E K\\) is the radical axis of the circumcircles of \\(K B C\\) and \\(K A D\\).\n\nLooking at these facts and the diagram, it makes sense to take triangle \\(K Q P\\) the reference triangle. Because of that, we do not really need to draw circles nor even points \\(M\\) and \\(N\\), as all powers can be computed directly from points in lines \\(K P, K Q\\), and \\(P Q\\).\n![](https://cdn.mathpix.com/cropped/2025_08_23_cf9a878261b0acb030afg-09.jpg?height=507&width=1035&top_left_y=2058&top_left_x=482)\n\nAssociate \\(P\\) with the \\(x\\)-coordinate, \\(Q\\) with the \\(y\\)-coordinate, and \\(K\\) with the \\(z\\)-coordinate. Applying the lemma, the equations of lines \\(P M, Q N\\), and \\(E K\\) are\n- \\(M P:(K A \\cdot K P-K B \\cdot K P) x+(Q S \\cdot Q P-Q R \\cdot Q P) y=0\\)\n- \\(N Q:(K C \\cdot K Q-K D \\cdot K Q) x+(P R \\cdot P Q-P S \\cdot P Q) z=0\\)\n- \\(M P:(-Q C \\cdot Q K+Q D \\cdot Q K) y+(P B \\cdot P K-P A \\cdot P K) z=0\\)\n\nThese equations simplify to\n- \\(M P:(A B \\cdot K P) x+(P Q \\cdot R S) y=0\\)\n- \\(N Q:(-C D \\cdot K Q) x+(P Q \\cdot R S) z=0\\)\n- \\(M P:(C D \\cdot K Q) y+(A B \\cdot K P) z=0\\)\n\nNow, if \\(u=A B \\cdot K P, v=P Q \\cdot R S\\), and \\(w=C D \\cdot K Q\\), it suffices to show that\n\\[\n\\left|\\begin{array}{ccc}\nu & v & 0 \\\\\n-w & 0 & v \\\\\n0 & w & u\n\\end{array}\\right|=0,\n\\]\nwhich is a straightforward computation.", "source_pdf": "apmo_2024.pdf", "notes": ""}
{"id": "APMO-2025-1", "contest": "APMO", "year": "2025", "problem_number": "1", "problem": "Let \\(A B C\\) be an acute triangle inscribed in a circle \\(\\Gamma\\). Let \\(A_{1}\\) be the orthogonal projection of \\(A\\) onto \\(B C\\) so that \\(A A_{1}\\) is an altitude. Let \\(B_{1}\\) and \\(C_{1}\\) be the orthogonal projections of \\(A_{1}\\) onto \\(A B\\) and \\(A C\\), respectively. Point \\(P\\) is such that quadrilateral \\(A B_{1} P C_{1}\\) is convex and has the same area as triangle \\(A B C\\). Is it possible that \\(P\\) strictly lies in the interior of circle \\(\\Gamma\\) ? Justify your answer.\n\nAnswer: No.", "solution": "\\section*{Solution}\n\nFirst notice that, since angles \\(\\angle A A_{1} B_{1}\\) and \\(\\angle A A_{1} C_{1}\\) are both right, the points \\(B_{1}\\) and \\(C_{1}\\) lie on the circle with \\(A A_{1}\\) as a diameter. Therefore, \\(A C_{1}=A A_{1} \\sin \\angle A A_{1} C_{1}=A A_{1} \\sin \\left(90^{\\circ}-\\right. \\left.\\angle A_{1} A C\\right)=A A_{1} \\sin \\angle C\\), similarly \\(A B_{1}=A A_{1} \\sin \\angle B\\), and \\(B_{1} C_{1}=A A_{1} \\sin \\angle A\\). Hence; triangles \\(A C_{1} B_{1}\\) and \\(A B C\\) are similar.\n![](https://cdn.mathpix.com/cropped/2025_08_23_c776d6401e128283d249g-1.jpg?height=672&width=601&top_left_y=936&top_left_x=696)\n\nLet \\(O\\) be the circumcenter of \\(A B C\\) and \\(A D\\) be one of its diameters. Since \\(\\angle O A C=\\frac{1}{2}\\left(180^{\\circ}-\\right. \\angle A O C)=90^{\\circ}-\\angle B=90^{\\circ}-\\angle A C_{1} B_{1}\\), it follows that \\(A D\\) is perpendicular to \\(B_{1} C_{1}\\). Let \\(A D=2 R\\); recall that, from the law of sines, \\(\\frac{B C}{\\sin \\angle A}=2 R \\Longleftrightarrow B C=2 R \\sin \\angle A\\). The area of quadrilateral \\(A B_{1} D C_{1}\\) is\n\\[\n\\frac{B_{1} C_{1} \\cdot A D}{2}=\\frac{A A_{1} \\sin \\angle A \\cdot 2 R}{2}=\\frac{A A_{1} \\cdot B C}{2},\n\\]\nwhich is indeed the area of \\(A B C\\).\nSince \\(B_{1}\\) and \\(C_{1}\\) are fixed points, the loci of the points \\(P\\) such that \\(A B_{1} P C_{1}\\) is a convex quadrilateral with the same area as \\(A B C\\) is a line parallel to \\(B_{1} C_{1}\\). That is, perpendicular to \\(A D\\). Since the area of \\(A B_{1} D C_{1}\\) is the same as the area of \\(A B C\\), this locus is the line perpendicular to \\(A D\\) through \\(D\\), which is tangent to the circumcircle of \\(A B C\\). Therefore, it is not possible that the point \\(P\\) lies inside the circumcircle of \\(A B C\\).", "source_pdf": "apmo_2025.pdf", "notes": ""}
{"id": "APMO-2025-2", "contest": "APMO", "year": "2025", "problem_number": "2", "problem": "Let \\(\\alpha\\) and \\(\\beta\\) be positive real numbers. Emerald makes a trip in the coordinate plane, starting off from the origin \\((0,0)\\). Each minute she moves one unit up or one unit to the right, restricting herself to the region \\(|x-y|<2025\\), in the coordinate plane. By the time she visits a point ( \\(x, y\\) ) she writes down the integer \\(\\lfloor x \\alpha+y \\beta\\rfloor\\) on it. It turns out that Emerald wrote each non-negative integer exactly once. Find all the possible pairs ( \\(\\alpha, \\beta\\) ) for which such a trip would be possible.\n\nAnswer: \\((\\alpha, \\beta)\\) such that \\(\\alpha+\\beta=2\\).", "solution": "\\section*{Solution}\n\nLet \\(\\left(x_{n}, y_{n}\\right)\\) be the point that Emerald visits after \\(n\\) minutes. Then \\(\\left(x_{n+1}, y_{n+1}\\right) \\in\\left\\{\\left(x_{n}+\\right.\\right. \\left.\\left.1, y_{n}\\right),\\left(x_{n}, y_{n}+1\\right)\\right\\}\\). Either way, \\(x_{n+1}+y_{n+1}=x_{n}+y_{n}+1\\), and since \\(x_{0}+y_{0}=0+0=0\\), \\(x_{n}+y_{n}=n\\).\nThe \\(n\\)-th number would be then\n\\[\nz_{n}=\\left\\lfloor x_{n} \\alpha+\\left(n-x_{n}\\right) \\beta\\right\\rfloor \\Longrightarrow n \\beta+x_{n}(\\alpha-\\beta)-1<z_{n}<n \\beta+x_{n}(\\alpha-\\beta),\n\\]\nin which\n\\[\n-2025<x_{n}-y_{n}<2025 \\Longleftrightarrow \\frac{n-2025}{2}<x_{n}<\\frac{n+2025}{2} .\n\\]\n\nSuppose without loss of generality that \\(\\alpha \\geq \\beta\\). Then\n\\[\nn \\beta+\\frac{n-2025}{2}(\\alpha-\\beta)-1<z_{n}<n \\beta+\\frac{n+2025}{2}(\\alpha-\\beta),\n\\]\nwhich reduces to\n\\[\n\\left|z_{n}-\\frac{\\alpha+\\beta}{2} n\\right|<\\frac{2025}{2}(\\alpha-\\beta)+1 .\n\\]\n\nOn the other hand, \\(z_{n+1}=\\left\\lfloor x_{n+1} \\alpha+y_{n+1} \\beta\\right\\rfloor \\in\\left\\{\\left\\lfloor x_{n} \\alpha+y_{n} \\beta+\\alpha\\right\\rfloor,\\left\\lfloor x_{n} \\alpha+y_{n} \\beta+\\beta\\right\\rfloor\\right\\}\\), which implies \\(z_{n+1} \\geq z_{n}\\). Since every non-negative integer appears exactly once, in increasing order, it follows that \\(z_{n}=n\\).\nTherefore, for all positive integers \\(n\\),\n\\[\n\\left|n-\\frac{\\alpha+\\beta}{2} n\\right|<\\frac{2025}{2}(\\alpha-\\beta)+1,\n\\]\nwhich can only be possible if \\(\\alpha+\\beta=2\\); otherwise, the left hand side would be unbounded. If \\(\\alpha+\\beta=2\\), consider \\(x_{n}=\\left\\lceil\\frac{n}{2}\\right\\rceil\\) and \\(y_{n}=\\left\\lfloor\\frac{n}{2}\\right\\rfloor\\). If \\(n\\) is even,\n\\[\nz_{n}=\\left\\lfloor\\frac{n}{2} \\alpha+\\frac{n}{2} \\beta\\right\\rfloor=n ;\n\\]\nif \\(n\\) is odd,\n\\[\nz_{n}=\\left\\lfloor\\frac{n+1}{2} \\alpha+\\frac{n-1}{2} \\beta\\right\\rfloor=n+\\left\\lfloor\\frac{\\alpha-\\beta}{2}\\right\\rfloor,\n\\]\nwhich equals \\(n\\) because \\(0<\\beta \\leq \\alpha<\\alpha+\\beta=2 \\Longrightarrow 0 \\leq \\alpha-\\beta<2\\).", "source_pdf": "apmo_2025.pdf", "notes": ""}
{"id": "APMO-2025-3", "contest": "APMO", "year": "2025", "problem_number": "3", "problem": "Let \\(P(x)\\) be a non-constant polynomial with integer coefficients such that \\(P(0) \\neq 0\\). Let \\(a_{1}, a_{2}, a_{3}, \\ldots\\) be an infinite sequence of integers such that \\(P(i-j)\\) divides \\(a_{i}-a_{j}\\) for all distinct positive integers \\(i, j\\). Prove that the sequence \\(a_{1}, a_{2}, a_{3}, \\ldots\\) must be constant, that is, \\(a_{n}\\) equals a constant \\(c\\) for all \\(n\\) positive integer.", "solution": "\\section*{Solution}\n\nLet \\(a_{0}=P(0) \\neq 0\\) be the independent coefficient, i.e., the constant term of \\(P(x)\\). Then there are infinitely many primes \\(p\\) such that \\(p\\) divides \\(P(k)\\) but \\(p\\) does not divide \\(k\\). In fact, since \\(P(k)-a_{0}\\) is a multiple of \\(k, \\operatorname{gcd}(P(k), k)=\\operatorname{gcd}\\left(k, a_{0}\\right) \\leq a_{0}\\) is bounded, so pick, say, \\(k\\) with prime factors each larger than \\(a_{0}\\).\nSince \\(P(k)\\) divides \\(a_{i+k}-a_{i}, p\\) divides \\(a_{i+k}-a_{i}\\). Moreover, since \\(P(k+p) \\equiv P(k) \\equiv 0(\\bmod p)\\), \\(p\\) also divides \\(a_{i+k+p}-a_{i}\\). Therefore, \\(a_{i} \\bmod p\\) is periodic with periods \\(k+p\\) and \\(k\\). By Bezout's theorem, \\(\\operatorname{gcd}(k+p, k)=1\\) is also a period, that is, \\(p\\) divides \\(a_{i+1}-a_{i}\\) for all \\(i\\) and \\(p\\) such that \\(p \\mid P(k)\\) and \\(p \\nmid k\\) for some \\(k\\). Since there are infinitely many such primes \\(p, a_{i+1}-a_{i}\\) is divisible by infinitely many primes, which implies \\(a_{i+1}=a_{i}\\), that is, the sequence is constant.", "source_pdf": "apmo_2025.pdf", "notes": ""}
{"id": "APMO-2025-4", "contest": "APMO", "year": "2025", "problem_number": "4", "problem": "Let \\(n \\geq 3\\) be an integer. There are \\(n\\) cells on a circle, and each cell is assigned either 0 or 1 . There is a rooster on one of these cells, and it repeats the following operations:\n- If the rooster is on a cell assigned 0 , it changes the assigned number to 1 and moves to the next cell counterclockwise.\n- If the rooster is on a cell assigned 1 , it changes the assigned number to 0 and moves to the cell after the next cell counterclockwise.\n\nProve that the following statement holds true after sufficiently many operations:\nIf the rooster is on a cell \\(C\\), then the rooster would go around the circle exactly three times, stopping again at \\(C\\). Moreover, every cell would be assigned the same number as it was assigned right before the rooster went around the circle 3 times.", "solution": "\\section*{Solution 1}\n\nReformulate the problem as a \\(n\\)-string of numbers in \\(\\{0,1\\}\\) and a position at which the action described in the problem is performed, and add 1 or 2 modulo \\(n\\) to the position according to the action. Say that a lap is complete for each time the position resets to 0 or 1 . We will prove that the statement claim holds after at most two laps, after which the \\(n\\)-tuple cycles every three laps.\nSay the rooster stops at a position in a certain lap if it performs an action at that position on that lap; otherwise, the rooster bypasses that position. We start with some immediate claims:\n- The rooster has to stop at at least one of each two consecutive positions.\n- The rooster stops at every position preceded by a 0 . Indeed, if the numbers preceding that position are 00 then the rooster will definitely stop at the second zero, and it the numbers preceding that position are 10 then the rooster will either stop at 1 and go directly to the position or bypass 1 and stop at the second zero, and then stop at the position.\n- Therefore, if the rooster bypasses a position, then it is preceded by a 1 , and that 1 must be changed to a 0 . This means that the rooster never bypasses a position in two consecutive laps.\n- The rooster bypasses every position preceded by 01 . Indeed, the rooster stops at either 1 or at 0 , after which it will move to 1 ; at any rate, it stops at 1 and bypasses the position.\n\nOur goal is to prove that, eventually, for every three consecutive laps, each position is bypassed exactly once. Then each position changes states exactly twice, so it gets back to its initial state after three laps. The following two lemmata achieve this goal:\n\nLemma 1. If the rooster stops at a certain position in two laps in a row, it bypasses it on the next lap, except for the \\(n\\)-string 1010 . . . 10, for which the problem statement holds.\n\nProof. If the rooster stopped at a position in lap \\(t\\), then it is preceded by either (A) a 0 that was changed to 1 , (B) a 11 that was changed to 01 , or (C) a 10 in which the rooster stopped at 1 . In case (A), the position must be preceded by 11 in the lap \\(t+1\\), which becomes 01 , so the rooster will bypass the position in the lap \\(t+2\\). In case (B), the position will be bypassed in lap \\(t+1\\).\nNow we deal with case ( C ): suppose that the position was preceded by \\(m\\) occurrences of 10 , that is, \\((10)^{m}\\), on lap \\(t\\) and take \\(m \\leq \\frac{n}{2}\\) maximal. The rooster stopped at the 1 from each occurrence of 10 , except possibly the first one.\n\nFirst, suppose that \\(n \\geq 2 m+2\\). After lap \\(t,(10)^{m}\\) becomes either \\((00)^{m}\\) or \\(11(00)^{m-1}\\) in lap \\(t+1\\). In the latter case, initially we had \\(1(10)^{m}\\), which became \\(011(00)^{m-1}\\). It will then become \\(a 01(11)^{m-1}\\) in lap \\(t+2\\), in which the rooster will bypass the position. In the former case, \\((10)^{m}\\) becomes \\((00)^{m}\\), so it was either \\(00(10)^{m}\\) or \\(11(10)^{m}\\) in lap \\(t\\), which becomes respectively \\(a 1(00)^{m}\\) and \\(01(00)^{m}\\) in lap \\(t+1\\), respectively. In the second sub-case, it becomes \\(b 001(11)^{m-1}\\) in lap \\(t+2\\), and the position will be bypassed. In the first sub-case, it must be \\(11(00)^{m}\\) after which it becomes either \\(01(11)^{m}\\) or \\(1001(11)^{m-1}\\). In any case, the position will be bypassed in lap \\(t+2\\). If \\(n=2 m+1\\), the possible configurations are\n\\[\n(10)^{m} 0 \\rightarrow(00)^{m} 1 \\rightarrow(11)^{m} 0 \\rightarrow(10)^{m} 0\n\\]\nthe rooster stops at the 1 from the first 10 because it was preceded by a 0 .\n\\[\n(10)^{m} 1 \\rightarrow(00)^{m} 0 \\rightarrow 0(11)^{m} \\rightarrow 1(01)^{m}\n\\]\nor\n\\[\n(10)^{m} 1 \\rightarrow 11(00)^{m-1} 0 \\rightarrow 01(11)^{m-1} 1 \\rightarrow(10)^{m} 1\n\\]\n\nIn any case, the position is bypassed in lap \\(t+2\\).\nIf \\(n=2 m\\), the entire configuration is \\((10)^{m}, m \\geq 2\\). If the rooster did not stop at the first 1 , it becomes \\(11(00)^{m-1}\\) in the lap \\(t+1\\), then \\(01(11)^{m-1}\\) in the lap \\(t+2\\), so the position is bypassed in this last lap. If the rooster stopped at the first 1 , it becomes \\((00)^{m}\\), then \\((11)^{m}\\), then \\((01)^{m}\\), then \\(10(00)^{m-1}\\), then \\((11)^{m}\\), and then it cycles between \\((11)^{m},(01)^{m}\\) and \\(10(00)^{m-1}\\).\nSo, apart from this specific string, the rooster will stop at most two laps in a row at each position.\n\nLemma 2. If the rooster bypasses one position on a lap, then it stops at that position on the next two laps, with the same exception as lemma 1.\n\nProof. The position must be preceded by 1 in lap \\(t\\). If it is preceded by 11 , it changes to 10 in lap \\(t+1\\). Then it becomes 00 because the 1 was already skipped in the previous lap, and the rooster will stop at the position in the lap \\(t+2\\).\nNow suppose that the position was preceded by \\((01)^{m}\\) on lap \\(t\\) and take \\(m \\leq \\frac{n}{2}\\) maximal. It becomes \\(10(00)^{m-1}\\) or \\((00)^{m}\\) in lap \\(t+1\\). In the former case, in lap \\(t+2\\) it becomes either \\(00(11)^{m-1}\\), after which the rooster stops at the position again, or \\((11)^{m}\\), which we'll study later. In the former case, \\((00)^{m}\\) becomes \\((11)^{m}\\) or \\(01(11)^{m-1}\\). In the latter case, the 0 was bypassed, so it must be sopped in the next lap, becoming \\((10)^{m}\\). In the \\((11)^{m}\\) case, in order to bypass the position in lap \\(t+2\\), it must become \\((10)^{m}\\). All in all, the preceding terms are \\((01)^{m}\\). Then, either \\(10(00)^{m-1}\\) or \\((00)^{m}\\), then either \\((11)^{m}\\) or \\(01(11)^{m-1}\\), then \\((10)^{m}\\). Then the second term in \\((01)^{m}\\) is 1 , then 0 , then 1 , and then 0 , that is, it changed three times. So we fall under the exception to lemma 1.\n\nThe result then immediately follows from lemmata 1 and 2 .\n\n\\section*{Solution 2}\n\nDefine positions, laps, stoppings, and bypassing as in Solution 1. This other pair of lemmata also solves the problem.\n\nLemma 3. There is a position and a lap in which the rooster stops twice and bypasses once (in some order) in the next three laps.\n\nProof. There is a position \\(j\\) the rooster stops for infinitely many times. Each time it stops at \\(j\\), it changes between stopping and bypassing \\(j+1\\). So the rooster stops and bypasses \\(j+1\\) infinitely many times. Then there is a lap in which the rooster stops at \\(j+1\\), and bypasses it in the next. As in solution 1 , it cannot bypass \\(j+1\\) two times in a row, so it stops at \\(j+1\\) in the next lap.\n\nLemma 4. If the rooster stops twice and bypasses once (in some order) at some position in three consecutive laps, it also stops twice and bypasses once at the next position (in some order) in the same laps (or in the next laps, in case the lap changes from one position to the other).\n\nProof. When the rooster bypasses the position, it must stop at the next one. In the two times it stops at the position, the cell has different numbers on it, so the rooster will stop once and bypass once at the next position.\n\nBy lemmata 3 and 4, there would be a moment that the rooster stops twice and bypasses once (in some order) at any position after this moment. After this moment, if the rooster is in a cell \\(C\\) in lap \\(t\\), we know that it stopped; stopped-bypassed; and bypassed-stopped at \\(C\\) in laps \\(t, t+1, t+2\\). Since it stopped twice and bypassed once (in some order) in laps \\(t+1, t+2, t+3\\), it must stop at \\(C\\) in lap \\(t+3\\). Moreover, the rooster stopped twice and bypassed once (in some order) each cell between stopping at \\(C\\) in laps \\(t\\) and \\(t+3\\), so every cell has the same assigned number before and after going around the circle three times.\n\n\\section*{Solution 3}\n\nLet us reformulate the problem in terms of Graphs: we have a directed graph \\(G\\) with \\(V= \\left\\{v_{1}, v_{2}, \\ldots, v_{n}\\right\\}\\) representing positions and \\(E=\\left\\{v_{i} \\rightarrow v_{i+1}, v_{i} \\rightarrow v_{i+2} \\mid 1 \\leq i \\leq n\\right\\}\\) representing moves. Indices are taken \\(\\bmod n\\). Note that each vertex has in-degree and out-degree both equal to 2 . We say that the edge \\(v_{i} \\rightarrow v_{i+1}\\) is active and \\(v_{i} \\rightarrow v_{i+2}\\) is inactive if the number on \\(v_{i}\\) is 0 , or the edge \\(v_{i} \\rightarrow v_{i+2}\\) is active and \\(v_{i} \\rightarrow v_{i+1}\\) is inactive if the number on \\(v_{i}\\) is 1 . The rooster then traces an infinite trail on the graph in the following manner;\n- it starts at \\(v_{1}\\);\n- if the rooster is at \\(v_{i}\\), it uses the active edge going out of \\(v_{i}\\) to continue the path, and changes the number on \\(v_{i}\\).\n\nTake the first vertex that appears 3 times on the rooster's trail, and suppose without any loss of generality that it is \\(v_{1}\\) (otherwise, just ignore the path before the first time that this vertex appears). Consider the sub-trail from the first to the third time \\(v_{1}\\) appears: \\(C=v_{1} \\rightarrow \\cdots \\rightarrow v_{1} \\rightarrow \\cdots \\rightarrow v_{1}\\). Trail \\(C\\) induces a circuit \\(C^{*}\\) on \\(G\\) that passes through \\(v_{1}\\) twice.\nIn between two occurrences of \\(v_{1}\\), the rooster must have completed at least one lap. Vertex \\(v_{1}\\) appears three times at \\(C\\), so \\(C\\) contains at least two laps. Since (as per Solution 1) no vertex is bypassed twice in a row, \\(C^{*}\\) must contain every vertex. Moreover, \\(v_{1}\\) is the first (and only) vertex that appeared three times on the rooster's path, so each vertex appear at most twice on \\(C^{*}\\).\n\nLemma 5. Take \\(V^{\\prime}\\) to be the subset of \\(V\\) containing the vertices that only appears once on \\(C^{*}\\) and \\(E^{\\prime}\\) to be the edges of \\(G\\) that don't appear on \\(C^{*}\\). So \\(G^{\\prime}=\\left(V^{\\prime}, E^{\\prime}\\right)\\) is a simple cycle or \\(V^{\\prime}=E^{\\prime}=\\emptyset\\).\n\nProof. We will first prove that each edge in \\(C^{*}\\) appears exactly one. Suppose, for the sake of contradiction, that there is an edge \\(u \\rightarrow v\\) that appears twice on \\(C^{*}\\). So \\(u\\) must appear times in \\(C\\), because the active edge going out of \\(u\\) changes at each visit to it. So \\(u=v_{1}\\), but the rooster only goes out of \\(v_{1}\\) twice in \\(C\\), which is a contradiction.\nNow, since \\(C^{*}\\) does not have repeated edges, all four edges through \\(v\\) are in \\(C^{*}\\) if \\(v\\) is visited twice in this cycle. So the edges on \\(E^{\\prime}\\) cannot pass through vertices in \\(V \\backslash V^{\\prime}\\), then \\(G^{\\prime}\\) is well-defined.\nSince \\(v \\in V^{\\prime}\\) is visited once on \\(C^{*}\\), it has \\(\\operatorname{deg}_{\\text {in }}(v)=\\operatorname{deg}_{\\text {out }}(v)=1\\) in \\(G^{\\prime}\\), so \\(G^{\\prime}\\) is a union of disjoint simple cycles. Each of these cycles completes at least one lap, and \\(v_{1}\\) is skipped on these laps, so all cycles must use the edge \\(v_{n} \\rightarrow v_{2}\\). But the cycles are disjoint, so there is at most one cycle.\n\nLemma 6. The rooster eventually traverses a contiguous Eulerian circuit of \\(G\\).\n\nProof. If \\(V^{\\prime}=E^{\\prime}=\\emptyset, C^{*}\\) is already an Eulerian circuit traversed in \\(C\\). If not, take \\(u_{1}\\) to be the first vertex of \\(C\\) that is in \\(V^{\\prime}\\). Let \\(U=u_{1} \\rightarrow \\cdots \\rightarrow u_{k} \\rightarrow u_{1}\\) be the cycle determined by \\(G^{\\prime}\\) by Lemma 5, \\(C_{1}=v_{1} \\rightarrow \\cdots \\rightarrow u_{1}\\) be the sub-path of \\(C\\) from the first \\(v_{1}\\) to \\(u_{1}\\), and \\(C_{2}=u_{1} \\rightarrow \\cdots \\rightarrow v_{1}\\) be the rest of \\(C\\).\nEach vertex on \\(V \\backslash V^{\\prime}\\) has been changed twice, so they would be in their initial states after \\(C\\); every vertex on \\(V^{\\prime}\\) has been changed only once, and therefore are not on their initial states. Let us trace the rooster's trail after it traversed \\(C\\). By the minimality of \\(u_{1}\\), all the edges of \\(C_{1}\\) are active after \\(C\\), so the rooster traverses \\(C_{1}\\) after \\(C\\). Moreover, each \\(u_{i}\\) was visited exactly once in \\(C\\) and has not yet used the edge \\(u_{i} \\rightarrow u_{i+1}\\). Since all their states have changed, all edges of \\(U\\) are active after \\(C\\). Therefore, the rooster traverse \\(U\\) after \\(C_{1}\\), flipping all the vertices in \\(U\\) to their initial states. Then, since every state in \\(U\\) was changed, the rooster traverses \\(C_{2}\\) instead of \\(U\\). The trail is then \\(C \\rightarrow C_{1} \\rightarrow U \\rightarrow C_{2}\\), and hen \\(C_{1} \\rightarrow U \\rightarrow C_{2}\\) is an Eulerian circuit.\n\nHaving this in mind, after the rooster completes an Eulerian circuit, it has passed through each vertex twice and returned to its initial vertex, so the state of the rooster and of the edges are the same before and after the Eulerian cycle. The rooster will then traverse the Eulerian circuit repeatedly.\nThe edges \\(v_{i} \\rightarrow v_{i+1}\\) move forward by one position and the edges \\(v_{i} \\rightarrow v_{i+2}\\) move forward by two positions. Since all edges are used, each time the rooster traverses the Eulerian circuit, it moves forward a total of \\(n(1+2)=3 n\\) positions, which corresponds to three laps. The proof is now complete.\n\nComment: Solution 1 presents a somewhat brute-force case analysis; the main ideas are\n- Lemma 1: The rooster stops at one position in at most two consecutive laps, with one notable exception.\n- Lemma 2: If the rooster bypasses one position then it stops at it in the next two laps, with the same notable exception.\n\nSolution 2 has a recursive nature; the main ideas are\n- Lemma 3: Proving that one position changes states exactly two out of three laps.\n- Lemma 4: Given that this happens to one position, it also happens to the next position in the same laps, so it happens to every position.\n\nSolution 3 cleverly identifies the moves the rooster performs within a graph theoretical framework. The main goal is to prove that the rooster traces an Eulerian circuit in a graph.\n- Lemma 5: Analyzing what happens after the rooster first visits a position three times.\n- Lemma 6: Proving that the rooster traces an Eulerian circuit.", "source_pdf": "apmo_2025.pdf", "notes": ""}
{"id": "APMO-2025-5", "contest": "APMO", "year": "2025", "problem_number": "5", "problem": "Consider an infinite sequence \\(a_{1}, a_{2}, \\ldots\\) of positive integers such that\n\\[\n100!\\left(a_{m}+a_{m+1}+\\cdots+a_{n}\\right) \\quad \\text { is a multiple of } \\quad a_{n-m+1} a_{n+m}\n\\]\nfor all positive integers \\(m, n\\) such that \\(m \\leq n\\).\nProve that the sequence is either bounded or linear.\nObservation: A sequence of positive integers is bounded if there exists a constant \\(N\\) such that \\(a_{n}<N\\) for all \\(n \\in \\mathbb{Z}_{>0}\\). A sequence is linear if \\(a_{n}=n \\cdot a_{1}\\) for all \\(n \\in \\mathbb{Z}_{>0}\\).", "solution": "\\section*{Solution}\n\nLet \\(c=100\\) !. Suppose that \\(n \\geq m+2\\). Then \\(a_{m+n}=a_{(m+1)+(n-1)}\\) divides both \\(c\\left(a_{m}+a_{m+1}+\\right. \\left.\\cdots+a_{n-1}+a_{n}\\right)\\) and \\(c\\left(a_{m+1}+\\cdots+a_{n-1}\\right)\\), so it also divides the difference \\(c\\left(a_{m}+a_{n}\\right)\\). Notice that if \\(n=m+1\\) then \\(a_{m+n}\\) divides \\(c\\left(a_{m}+a_{m+1}\\right)=c\\left(a_{m}+a_{n}\\right)\\), and if \\(n=m\\) then \\(a_{m+n}\\) divides both \\(c a_{m}\\) and \\(2 c a_{m}=c\\left(a_{m}+a_{n}\\right)\\). In either cases; \\(a_{m+n}\\) divides \\(c\\left(a_{m}+a_{n}\\right)\\).\nAnalogously, one can prove that if \\(m>n, a_{m-n}=a_{(m-1)-(n-1)}\\) divides \\(c\\left(a_{m}-a_{n}\\right)\\), as it divides both \\(c\\left(a_{n+1}+\\cdots+a_{m}\\right)\\) and \\(c\\left(a_{n}+\\cdots+a_{m-1}\\right)\\).\nFrom now on, drop the original divisibility statement and keep the statements \" \\(a_{m+n}\\) divides \\(c\\left(a_{m}+a_{n}\\right)\\) \" and \" \\(a_{m-n}\\) divides \\(c\\left(a_{m}-a_{n}\\right)\\).\" Now, all conditions are linear, and we can suppose without loss of generality that there is no integer \\(D>1\\) that divides every term of the sequence; if there is such an integer \\(D\\), divide all terms by \\(D\\).\nHaving this in mind, notice that \\(a_{m}=a_{m+n-n}\\) divides \\(c\\left(a_{m+n}-a_{n}\\right)\\) and also \\(c\\left(a_{m+n}-a_{m}-a_{n}\\right)\\); analogously, \\(a_{n}\\) also divides \\(c\\left(a_{m+n}-a_{m}-a_{n}\\right)\\), and since \\(a_{m+n}\\) divides \\(c\\left(a_{m}+a_{n}\\right)\\), it also divides \\(c\\left(a_{m+n}-a_{m}-a_{n}\\right)\\). Therefore, \\(c\\left(a_{m+n}-a_{m}-a_{n}\\right)\\) is divisible by \\(a_{m}, a_{n}\\), and \\(a_{m+n}\\), and therefore also by \\(\\operatorname{lcm}\\left(a_{m}, a_{n}, a_{m+n}\\right)\\). In particular, \\(c a_{m+n} \\equiv c\\left(a_{m}+a_{n}\\right)\\left(\\bmod \\operatorname{lcm}\\left(a_{m}, a_{n}\\right)\\right)\\).\nSince \\(a_{m+n}\\) divides \\(c\\left(a_{m}+a_{n}\\right), a_{m+n} \\leq c\\left(a_{m}+a_{n}\\right)\\).\nFrom now on, we divide the problem in two cases.\nCase 1: there exist \\(m, n\\) such that \\(\\operatorname{lcm}\\left(a_{m}, a_{n}\\right)>c^{2}\\left(a_{m}+a_{n}\\right)\\).\nIf \\(\\operatorname{lcm}\\left(a_{m}, a_{n}\\right)>c^{2}\\left(a_{m}+a_{n}\\right)>c\\left(a_{m}+a_{n}\\right)\\) then both \\(c\\left(a_{m}+a_{n}\\right)\\) and \\(c a_{m+n}\\) are less than \\(c a_{m+n} \\leq c^{2}\\left(a_{m}+a_{n}\\right)<\\operatorname{lcm}\\left(a_{m}, a_{n}\\right)\\). This implies \\(c a_{m+n}=c\\left(a_{m}+a_{n}\\right) \\Longleftrightarrow a_{m+n}=a_{m}+a_{n}\\). Now we can extend this further: since \\(\\operatorname{gcd}\\left(a_{m}, a_{m+n}\\right)=\\operatorname{gcd}\\left(a_{m}, a_{m}+a_{n}\\right)=\\operatorname{gcd}\\left(a_{m}, a_{n}\\right)\\), it follows that\n\\[\n\\begin{aligned}\n\\operatorname{lcm}\\left(a_{m}, a_{m+n}\\right) & =\\frac{a_{m} a_{m+n}}{\\operatorname{gcd}\\left(a_{m}, a_{n}\\right)}=\\frac{a_{m+n}}{a_{n}} \\operatorname{lcm}\\left(a_{m}, a_{n}\\right)>\\frac{c^{2}\\left(a_{m}+a_{n}\\right)^{2}}{a_{n}} \\\\\n& >\\frac{c^{2}\\left(2 a_{m} a_{n}+a_{n}^{2}\\right)}{a_{n}}=c^{2}\\left(2 a_{m}+a_{n}\\right)=c^{2}\\left(a_{m}+a_{m+n}\\right)\n\\end{aligned}\n\\]\n\nWe can iterate this reasoning to obtain that \\(a_{k m+n}=k a_{m}+a_{n}\\), for all \\(k \\in \\mathbb{Z}_{>0}\\). In fact, if the condition \\(\\operatorname{lcm}\\left(a_{m}, a_{n}\\right)>c^{2}\\left(a_{m}+a_{n}\\right)\\) holds for the pair ( \\(n, m\\) ), then it also holds for the pairs \\((m+n, m),(2 m+n, m), \\ldots,((k-1) m+n, m)\\), which implies \\(a_{k m+n}=a_{(k-1) m+n}+a_{m}= a_{(k-2) m+n}+2 a_{m}=\\cdots=a_{n}+k a_{m}\\).\nSimilarly, \\(a_{m+k n}=a_{m}+k a_{n}\\).\nNow, \\(a_{m+n+m n}=a_{n+(n+1) m}=a_{m+(m+1) n} \\Longrightarrow a_{n}+(n+1) a_{m}=a_{m}+(m+1) a_{n} \\Longleftrightarrow m a_{n}= n a_{m}\\). If \\(d=\\operatorname{gcd}(m, n)\\) then \\(\\frac{n}{d} a_{m}=\\frac{m}{d} a_{n}\\).\nTherefore, since \\(\\operatorname{gcd}\\left(\\frac{m}{d}, \\frac{n}{d}\\right)=1, \\frac{m}{d}\\) divides \\(a_{m}\\) and \\(\\frac{n}{d}\\) divides \\(a_{n}\\), which means that\n\\[\na_{n}=\\frac{m}{d} \\cdot t=\\frac{t}{d} m \\quad \\text { and } \\quad a_{m}=\\frac{n}{d} \\cdot t=\\frac{t}{d} n, \\quad \\text { for some } t \\in \\mathbb{Z}_{>0}\n\\]\nwhich also implies\n\\[\na_{k m+n}=\\frac{t}{d}(k m+n) \\quad \\text { and } \\quad a_{m+k n}=\\frac{t}{d}(m+k n), \\quad \\text { for all } k \\in \\mathbb{Z}_{>0} .\n\\]\n\nNow let's prove that \\(a_{k d}=t k=\\frac{t}{d}(k d)\\) for all \\(k \\in \\mathbb{Z}_{>0}\\). In fact, there exist arbitrarily large positive integers \\(R, S\\) such that \\(k d=R m-S n=(n+(R+1) m)-(m+(S+1) n)\\) (for instance, let \\(u, v \\in \\mathbb{Z}\\) such that \\(k d=m u-n v\\) and take \\(R=u+Q n\\) and \\(S=v+Q m\\) for \\(Q\\) sufficiently large.)\nLet \\(x=n+(R+1) m\\) and \\(y=m+(S+1) n\\). Then \\(k d=x-y \\Longleftrightarrow x=y+k d, a_{x}=\\frac{t}{d} x\\), and \\(a_{y}=\\frac{t}{d} y=\\frac{t}{d}(x-k d)=a_{x}-t k\\). Thus \\(a_{x}\\) divides \\(c\\left(a_{y}+a_{k d}\\right)=c\\left(a_{k d}+a_{x}-t k\\right)\\), and therefore also \\(c\\left(a_{k d}-t k\\right)\\). Since \\(a_{x}=\\frac{t}{d} x\\) can be arbitrarily large, \\(a_{k d}=t k=\\frac{t}{d}(k d)\\). In particular, \\(a_{d}=t\\), so \\(a_{k d}=k a_{d}\\).\nSince \\(k a_{d}=a_{k d}=a_{1+(k d-1)}\\) divides \\(c\\left(a_{1}+a_{k d-1}\\right), b_{k}=a_{k d-1}\\) is unbounded. Pick \\(p>a_{k d-1}\\) a large prime and consider \\(a_{p d}=p a_{d}\\). Then\n\\[\n\\operatorname{lcm}\\left(a_{p d}, a_{k d-1}\\right) \\geq \\operatorname{lcm}\\left(p, a_{k d-1}\\right)=p a_{k d-1}\n\\]\n\nWe can pick \\(a_{k d-1}\\) and \\(p\\) large enough so that their product is larger than a particular linear combination of them, that is,\n\\[\n\\operatorname{lcm}\\left(p, a_{k d-1}\\right)=p a_{k d-1}>c^{2}\\left(p a_{d}+a_{k d-1}\\right)=c^{2}\\left(a_{p d}+a_{k d-1}\\right)\n\\]\n\nThen all the previous facts can be applied, and since \\(\\operatorname{gcd}(p d, k d-1)=1, a_{k}=a_{k \\operatorname{gcd}(p d, k d-1)} =k a_{\\operatorname{gcd}(p d, k d-1)}=k a_{1}\\), that is, the sequence is linear. Also, since \\(a_{1}\\) divides all terms, \\(a_{1}=1\\).\nCase 2: \\(\\operatorname{lcm}\\left(a_{m}, a_{n}\\right) \\leq c^{2}\\left(a_{m}+a_{n}\\right)\\) for all \\(m, n\\).\nSuppose that \\(a_{m} \\leq a_{n}\\); then \\(\\operatorname{lcm}\\left(a_{m}, a_{n}\\right)=M a_{n} \\leq c^{2}\\left(a_{m}+a_{n}\\right) \\leq 2 c^{2} a_{n} \\Longrightarrow M \\leq 2 c^{2}\\), that is, the factor in the smaller term that is not in the larger term is at most \\(2 c^{2}\\).\nWe prove that in this case the sequence must be bounded. Suppose on the contrary; then there is a term \\(a_{m}\\) that is divisible by a large prime power \\(p^{d}\\). Then every larger term \\(a_{n}\\) is divisible by a factor larger than \\(\\frac{p^{d}}{2 c^{2}}\\). So we pick \\(p^{d}>\\left(2 c^{2}\\right)^{2}\\), so that every large term \\(a_{n}\\) is divisible by the prime power \\(p^{e}>2 c^{2}\\). Finally, fix \\(a_{k}\\) for any \\(k\\). It follows from \\(a_{k+n} \\mid c\\left(a_{k}+a_{n}\\right)\\) that \\(\\left(a_{n}\\right)\\) is unbounded, so we can pick \\(a_{n}\\) and \\(a_{k+n}\\) large enough such that both are divisible by \\(p^{e}\\). Hence any \\(a_{k}\\) is divisible by \\(p\\), which is a contradiction to the fact that there is no \\(D>1\\) that divides every term in the sequence.", "source_pdf": "apmo_2025.pdf", "notes": ""}
